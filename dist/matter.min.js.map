{"version":3,"sources":["matter.min.js","/source/matter.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","global","factory","exports","module","require","define","amd","Matter","_","superagent","this","buildMessageStr","logData","msg","isObject","has","obj","func","file","each","omit","keys","ind","list","isString","handleResponse","req","Promise","resolve","reject","end","err","res","status","logger","warn","body","addAuthHeader","storage","getItem","config","tokenName","set","info","message","request","serverUrl","log","msgStr","envName","console","debug","error","data","item","itemName","itemValue","localExists","window","sessionStorage","setItem","removeItem","description","clear","get","testKey","token","value","tokenStr","string","endpoint","queryData","query","post","send","put","del","user","undefined","appName","opts","Error","name","options","signupData","then","response","errRes","loginData","password","username","text","localServer","location","host"],"mappings":"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","file":"matter.min.js","sourcesContent":[null,"(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('underscore'), require('superagent')) :\n\ttypeof define === 'function' && define.amd ? define(['underscore', 'superagent'], factory) :\n\tglobal.Matter = factory(global._,global.superagent);\n}(this, function (_,superagent) { 'use strict';\n\n\t_ = 'default' in _ ? _['default'] : _;\n\tsuperagent = 'default' in superagent ? superagent['default'] : superagent;\n\n\tlet config = {\n\t\tserverUrl: 'http://tessellate.elasticbeanstalk.com',\n\t\ttokenName: 'tessellate'\n\t};\n\n\tlet logger = {\n\t\tlog() {\n\t\t\tlet msgStr = buildMessageStr(logData);\n\t\t\tif (config.envName == 'local') {\n\t\t\t\tconsole.log(logData);\n\t\t\t} else {\n\t\t\t\tconsole.log(msgStr);\n\t\t\t}\n\t\t},\n\t\tinfo() {\n\t\t\tlet msgStr = buildMessageStr(logData);\n\t\t\tif (config.envName == 'local') {\n\t\t\t\tconsole.info(logData);\n\t\t\t} else {\n\t\t\t\tconsole.info(msgStr);\n\t\t\t}\n\t\t},\n\t\twarn() {\n\t\t\tlet msgStr = buildMessageStr(logData);\n\t\t\tif (config.envName == 'local') {\n\t\t\t\tconsole.warn(logData);\n\t\t\t} else {\n\t\t\t\tconsole.warn(msgStr);\n\t\t\t}\n\t\t},\n\t\tdebug() {\n\t\t\tlet msgStr = buildMessageStr(logData);\n\t\t\tif (config.envName == 'local') {\n\t\t\t\tconsole.log(logData);\n\t\t\t} else {\n\t\t\t\tconsole.log(msgStr);\n\t\t\t}\n\t\t},\n\t\terror() {\n\t\t\tlet msgStr = buildMessageStr(logData);\n\t\t\tif (config.envName == 'local') {\n\t\t\t\tconsole.error(logData);\n\t\t\t} else {\n\t\t\t\t// console.error(msgStr);\n\t\t\t\t//TODO: Log to external logger\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction buildMessageStr(logData) {\n\t\tvar msg = '';\n\t\t//TODO: Attach time stamp\n\t\tif (_.isObject(logData)) {\n\t\t\tif (_.has(logData, 'func')) {\n\t\t\t\tif (_.has(logData, 'obj')) {\n\t\t\t\t\tmsg += '[' + logData.obj + '.' + logData.func + '()] ';\n\t\t\t\t} else if (_.has(logData, 'file')) {\n\t\t\t\t\tmsg += '[' + logData.file + ' > ' + logData.func + '()] ';\n\t\t\t\t} else {\n\t\t\t\t\tmsg += '[' + logData.func + '()] ';\n\t\t\t\t}\n\t\t\t}\n\t\t\t//Print each key and its value other than obj and func\n\t\t\t_.each(_.omit(_.keys(logData), 'obj', 'func'), function(key, ind, list) {\n\t\t\t\tif (_.isString(logData[key])) {\n\t\t\t\t\tmsg += key + ': ' + logData[key] + ', ';\n\t\t\t\t} else {\n\t\t\t\t\t//Print objects differently\n\t\t\t\t\tmsg += key + ': ' + logData[key] + ', ';\n\t\t\t\t}\n\t\t\t\tif (ind != list.length - 1) {\n\t\t\t\t\tmsg += '\\n';\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (_.isString(logData)) {\n\t\t\tmsg = logData;\n\t\t}\n\t\treturn msg;\n\t}\n\n\tlet data = {};\n\t// TODO: Store objects within local storage.\n\tlet storage = {\n\t\tget localExists() {\n\t\t\tconst testKey = 'test';\n\t\t\tif (typeof window != 'undefined' && typeof window.sessionStorage != 'undefined') {\n\t\t\t\ttry {\n\t\t\t\t\twindow.sessionStorage.setItem(testKey, '1');\n\t\t\t\t\twindow.sessionStorage.removeItem(testKey);\n\t\t\t\t\treturn true;\n\t\t\t\t} catch (err) {\n\t\t\t\t\tlogger.error({description: 'Error saving to session storage', error: err,  obj: 'storage', func: 'localExists'});\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Safley sets item to session storage.\n\t\t *\n\t\t * @param {String} itemName The items name\n\t\t * @param {String} itemValue The items value\n\t\t *\n\t\t */\n\t\titem(itemName, itemValue) {\n\t\t\t//TODO: Handle itemValue being an object instead of a string\n\t\t\tdata[itemName] = itemValue;\n\t\t\tif (this.localExists) {\n\t\t\t\twindow.sessionStorage.setItem(itemName, itemValue);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Safley sets item to session storage. Alias: item()\n\t\t *\n\t\t * @param {String} itemName The items name\n\t\t * @param {String} itemValue The items value\n\t\t *\n\t\t */\n\t\tsetItem(itemName, itemValue) {\n\t\t\t//TODO: Handle itemValue being an object instead of a string\n\t\t\t// this.item(itemName) = itemValue;\n\t\t},\n\n\t\t/**\n\t\t * @description\n\t\t * Safley gets an item from session storage. Alias: item()\n\t\t *\n\t\t * @param {String} itemName The items name\n\t\t *\n\t\t * @return {String}\n\t\t *\n\t\t */\n\t\tgetItem(itemName) {\n\t\t\tif (data[itemName]) {\n\t\t\t\treturn data[itemName];\n\t\t\t} else if (this.localExists) {\n\t\t\t\treturn window.sessionStorage.getItem(itemName);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Safley removes item from session storage.\n\t\t *\n\t\t * @param {String} itemName - The items name\n\t\t *\n\t\t */\n\t\tremoveItem(itemName) {\n\t\t\t//TODO: Only remove used items\n\t\t\tif (data[itemName]) {\n\t\t\t\tdata[itemName] = null;\n\t\t\t}\n\t\t\tif (this.localExists) {\n\t\t\t\ttry {\n\t\t\t\t\t//Clear session storage\n\t\t\t\t\twindow.sessionStorage.removeItem(itemName);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tlogger.error({description: 'Error removing item from session storage', error: err,  obj: 'storage', func: 'removeItem'});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Safley removes item from session storage.\n\t\t *\n\t\t * @param {String} itemName the items name\n\t\t * @param {String} itemValue the items value\n\t\t *\n\t\t */\n\t\tclear() {\n\t\t\t//TODO: Only remove used items\n\t\t\tdata = {};\n\t\t\tif (this.localExists) {\n\t\t\t\ttry {\n\t\t\t\t\t\t//Clear session storage\n\t\t\t\t\twindow.sessionStorage.clear();\n\t\t\t\t} catch (err) {\n\t\t\t\t\tlogger.warn('Session storage could not be cleared.', err);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t};\n\n\tclass token {\n\t\tget string() {\n\t\t\treturn storage.getItem(config.tokenName);\n\t\t}\n\t\tget data() {\n\t\t\t//TODO: Decode token\n\t\t}\n\t\tstring(tokenStr) {\n\t\t\tconsole.log('Token was set', tokenStr);\n\t\t\treturn storage.setItem(config.tokenName, tokenStr);\n\t\t}\n\t\tsave(tokenStr) {\n\t\t\tthis.string = tokenStr;\n\t\t\tstorage.setItem(config.tokenName, tokenStr);\n\t\t}\n\t\tdelete() {\n\t\t\tstorage.removeItem(config.tokenName);\n\t\t\tconsole.log('Token was removed');\n\t\t}\n\t}\n\n\tlet request = {\n\t\tget(endpoint, queryData) {\n\t\t\tvar req = superagent.get(endpoint);\n\t\t\tif (queryData) {\n\t\t\t\treq.query(queryData);\n\t\t\t}\n\t\t\treq = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t},\n\t\tpost(endpoint, data) {\n\t\t\tvar req = superagent.post(endpoint).send(data);\n\t\t\treq = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t},\n\t\tput(endpoint, data) {\n\t\t\tvar req = superagent.put(endpoint).send(data);\n\t\t\treq = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t},\n\t\tdel(endpoint, data) {\n\t\t\tvar req = superagent.put(endpoint).send(data);\n\t\t\treq = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t}\n\n\t};\n\n\tfunction handleResponse(req) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\treq.end((err, res) => {\n\t\t\t\tif (!err) {\n\t\t\t\t\t// console.log('Response:', res);\n\t\t\t\t\treturn resolve(res.body);\n\t\t\t\t} else {\n\t\t\t\t\tif (err.status == 401) {\n\t\t\t\t\t\tlogger.warn('Unauthorized. You must be signed into make this request.');\n\t\t\t\t\t}\n\t\t\t\t\treturn reject(err);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\tfunction addAuthHeader(req) {\n\t\tif (storage.getItem(config.tokenName)) {\n\t\t\treq = req.set('Authorization', 'Bearer ' + storage.getItem(config.tokenName));\n\t\t\tlogger.info({message: 'Set auth header', func: addAuthHeader, file: request});\n\t\t}\n\t\treturn req;\n\t}\n\n\tlet user;\n\tlet endpoints;\n\n\tclass Matter {\n\t\t/* Constructor\n\t\t * @param {string} appName Name of application\n\t\t */\n\t\tconstructor(appName, opts) {\n\t\t\tif (!appName) {\n\t\t\t\tthrow new Error('Application name is required to use Matter');\n\t\t\t} else {\n\t\t\t\tthis.name = appName;\n\t\t\t}\n\t\t\tif (opts) {\n\t\t\t\tthis.options = opts;\n\t\t\t}\n\t\t}\n\t\t/* Endpoint getter\n\t\t *\n\t\t */\n\t\tget endpoint() {\n\t\t\tlet serverUrl = config.serverUrl;\n\t\t\tif (_.has(this, 'options') && this.options.localServer) {\n\t\t\t\tserverUrl = 'http://localhost:4000';\n\t\t\t}\n\t\t\tif (this.name == 'tessellate') {\n\t\t\t\t//Remove url if host is server\n\t\t\t\tif (window && _.has(window, 'location') && window.location.host == serverUrl) {\n\t\t\t\t\tconsole.warn('Host is Server, serverUrl simplified!');\n\t\t\t\t\tserverUrl = '';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tserverUrl = config.serverUrl + '/apps/' + this.name;\n\t\t\t}\n\t\t\treturn serverUrl;\n\t\t}\n\t\t/* Signup\n\t\t *\n\t\t */\n\t\tsignup(signupData) {\n\t\t\treturn request.post(this.endpoint + '/signup', signupData)\n\t\t\t.then(function(response) {\n\t\t\t  console.log(response);\n\t\t\t})\n\t\t\t['catch'](function(errRes) {\n\t\t\t  console.error('[signup()] Error signing up:', errRes);\n\t\t\t  return Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t/** Login\n\t\t *\n\t\t */\n\t\tlogin(loginData) {\n\t\t\tif (!loginData || !loginData.password || !loginData.username) {\n\t\t\t\tconsole.error('Username/Email and Password are required to login');\n\t\t\t  return Promise.reject({message: 'Username/Email and Password are required to login'});\n\t\t\t}\n\t\t\treturn request.put(this.endpoint + '/login', loginData)\n\t\t\t.then(function(response) {\n\t\t\t\t//TODO: Save token locally\n\t\t\t\tif (_.has(response, 'data') && _.has(response.data, 'status') && response.data.status == 409) {\n\t\t\t\t\tconsole.error('[Matter.login()] Account not found: ', response);\n\t\t\t\t\treturn Promise.reject(response.data);\n\t\t\t\t} else {\n\t\t\t\t\tif (_.has(response, 'token')) {\n\t\t\t\t\t\ttoken.string = response.token;\n\t\t\t\t\t}\n\t\t\t\t\tconsole.log('[Matter.login()] Successful login: ', response);\n\t\t\t\t\treturn response;\n\t\t\t\t}\n\t\t\t})['catch'](function(errRes) {\n\t\t\t\tif (errRes.status == 409 || errRes.status == 400) {\n\t\t\t\t\terrRes = errRes.response.text;\n\t\t\t\t}\n\t\t\t  return Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t/** Logout\n\t\t */\n\t\tlogout() {\n\t\t\treturn request.put(this.endpoint + '/logout').then(function(response) {\n\t\t\t  console.log('[Matter.logout()] Logout successful: ', response);\n\t\t\t  token.delete();\n\t\t\t  return response;\n\t\t\t})['catch'](function(errRes) {\n\t\t\t  console.error('[Matter.logout()] Error logging out: ', errRes);\n\t\t\t  token.delete();\n\t\t\t  return Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\n\t\tgetCurrentUser() {\n\t\t\t//TODO: Check Current user variable\n\t\t\treturn request.get(this.endpoint + '/user', {\n\t\t\t}).then(function(response) {\n\t\t\t\t//TODO: Save user information locally\n\t\t\t\tconsole.log('[getCurrentUser()] Current User:', response.data);\n\t\t\t\tuser = response.data;\n\t\t\t\treturn user;\n\t\t\t})['catch'](function(errRes) {\n\t\t\t\tconsole.error('[getCurrentUser()] Error getting current user: ', errRes);\n\t\t\t  return Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\n\t\tgetAuthToken() {\n\t\t\treturn token.string;\n\t\t}\n\t};\n\n\treturn Matter;\n\n}));"],"sourceRoot":"/source/"}