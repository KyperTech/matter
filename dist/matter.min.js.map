{"version":3,"sources":["matter.min.js","/source/matter.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","global","factory","exports","module","require","define","amd","Matter","superagent","this","handleResponse","req","Promise","resolve","reject","end","err","res","status","console","warn","body","addAuthHeader","storage","getItem","config","tokenName","set","log","serverUrl","window","location","hostname","setItem","itemName","itemValue","exists","sessionStorage","removeItem","clear","get","testKey","requester","undefined","error","request","endpoint","queryData","query","post","data","send","put","del","user","token","value","signupData","then","response","errRes","loginData","password","username","localStorage","matter"],"mappings":"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","file":"matter.min.js","sourcesContent":[null,"(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('superagent')) :\n\ttypeof define === 'function' && define.amd ? define(['superagent'], factory) :\n\tglobal.Matter = factory(global.superagent);\n}(this, function (superagent) { 'use strict';\n\n\tsuperagent = 'default' in superagent ? superagent['default'] : superagent;\n\n\tlet config = {\n\t\tserverUrl: 'http://tessellate.elasticbeanstalk.com',\n\t\ttokenName: 'matter'\n\t};\n\t//Set server to local server if developing\n\tif (typeof window != 'undefined' && (window.location.hostname == '' || window.location.hostname == 'localhost')) {\n\t\tconfig.serverUrl = 'http://localhost:4000';\n\t}\n\n\tlet storage = {\n\t\tget exists() {\n\t\t\tconst testKey = 'test';\n\t\t\tconsole.log('storage exists called');\n\t\t\tif (typeof window != 'undefined') {\n\t\t\t\ttry {\n\t\t\t\t\twindow.sessionStorage.setItem(testKey, '1');\n\t\t\t\t\twindow.sessionStorage.removeItem(testKey);\n\t\t\t\t\treturn true;\n\t\t\t\t} catch (err) {\n\t\t\t\t\tconsole.warn('Session storage does not exist.', err);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Safley sets item to session storage.\n\t\t *\n\t\t * @param {String} itemName The items name\n\t\t * @param {String} itemValue The items value\n\t\t *\n\t\t *  @private\n\t\t */\n\t\tsetItem(itemName, itemValue) {\n\t\t\t//TODO: Handle itemValue being an object instead of a string\n\t\t\tif (this.exists) {\n\t\t\t\twindow.sessionStorage.setItem(itemName, itemValue);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Safley gets an item from session storage.\n\t\t *\n\t\t * @param {String} itemName The items name\n\t\t *\n\t\t * @return {String}\n\t\t *\n\t\t */\n\t\tgetItem(itemName) {\n\t\t\tif (this.exists) {\n\t\t\t\tconsole.log('item loaded from session');\n\t\t\t\treturn window.sessionStorage.getItem(itemName);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Safley removes item from session storage.\n\t\t *\n\t\t * @param {String} itemName - The items name\n\t\t *\n\t\t */\n\t\tremoveItem(itemName) {\n\t\t\t//TODO: Only remove used items\n\t\t\tif (this.exists) {\n\t\t\t\ttry {\n\t\t\t\t\t//Clear session storage\n\t\t\t\t\twindow.sessionStorage.removeItem(itemName);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tconsole.warn('Item could not be removed from session storage.', err);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Safley removes item from session storage.\n\t\t *\n\t\t * @param {String} itemName the items name\n\t\t * @param {String} itemValue the items value\n\t\t *\n\t\t *  @private\n\t\t */\n\t\tclear() {\n\t\t\t//TODO: Only remove used items\n\t\t\tif (this.exists) {\n\t\t\t\ttry {\n\t\t\t\t\t\t//Clear session storage\n\t\t\t\t\twindow.sessionStorage.clear();\n\t\t\t\t} catch (err) {\n\t\t\t\t\tconsole.warn('Session storage could not be cleared.', err);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t};\n\n\tlet requester;\n\tif (typeof window == 'undefined') { //Node Mode\n\t\trequester = superagent;\n\t} else if (typeof window.superagent == 'undefined') {\n\t\tconsole.error('Superagent is required to use Matter');\n\t} else { //Browser mode\n\t\trequester = window.superagent;\n\t}\n\n\tlet request = {\n\t\tget(endpoint, queryData) {\n\t\t\tvar req = requester.get(endpoint);\n\t\t\tif (queryData) {\n\t\t\t\treq.query(queryData);\n\t\t\t}\n\t\t\treq = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t},\n\t\tpost(endpoint, data) {\n\t\t\tvar req = requester.post(endpoint).send(data);\n\t\t\treq = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t},\n\t\tput(endpoint, data) {\n\t\t\tvar req = requester.put(endpoint).send(data);\n\t\t\treq = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t},\n\t\tdel(endpoint, data) {\n\t\t\tvar req = requester.put(endpoint).send(data);\n\t\t\treq = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t}\n\n\t};\n\n\tfunction handleResponse(req) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\treq.end((err, res) => {\n\t\t\t\tif (!err) {\n\t\t\t\t\t// console.log('Response:', res);\n\t\t\t\t\treturn resolve(res.body);\n\t\t\t\t} else {\n\t\t\t\t\tif (err.status == 401) {\n\t\t\t\t\t\tconsole.warn('Unauthorized. You must be signed into make this request.');\n\t\t\t\t\t}\n\t\t\t\t\treturn reject(err);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\tfunction addAuthHeader(req) {\n\t\tif (storage.getItem(config.tokenName)) {\n\t\t\treq = req.set('Authorization', 'Bearer ' + storage.getItem(config.tokenName));\n\t\t\tconsole.log('Set auth header');\n\t\t}\n\t\treturn req;\n\t}\n\n\tlet user;\n\tlet token;\n\n\tclass Matter {\n\t\tsignup(signupData) {\n\t\t\treturn request.post(config.serverUrl + '/signup', signupData)\n\t\t\t.then(function(response) {\n\t\t\t  console.log(response);\n\t\t\t})\n\t\t\t['catch'](function(errRes) {\n\t\t\t  console.error('[signup()] Error signing up:', errRes);\n\t\t\t  return Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\n\t\tlogin(loginData) {\n\t\t\tif (!loginData || !loginData.password || !loginData.username) {\n\t\t\t\tconsole.error('Username/Email and Password are required to login');\n\t\t\t}\n\t\t\treturn request.put(config.serverUrl + '/login', loginData)\n\t\t\t.then(function(response) {\n\t\t\t\t//TODO: Save token locally\n\t\t\t\tconsole.log(response);\n\t\t\t\ttoken = response.data.token;\n\t\t\t\tif (window.localStorage.getItem(config.tokenName) === null) {\n\t\t\t\t\twindow.localStorage.setItem(config.tokenName, response.data.token);\n\t\t\t\t\tconsole.log('token set to storage:', window.localStorage.getItem(config.tokenName));\n\t\t\t\t}\n\t\t\t\treturn response.data;\n\t\t\t})['catch'](function(errRes) {\n\t\t\t\tconsole.error('[login()] Error logging in: ', errRes);\n\t\t\t  return Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\n\t\tlogout() {\n\t\t\treturn request.put(config.serverUrl + '/logout', {\n\t\t\t}).then(function(response) {\n\t\t\t  console.log('[logout()] Logout successful: ', response);\n\t\t\t  if (typeof window != 'undefined' && typeof window.localStorage.getItem(config.tokenName) != null) {\n\t\t\t\t\twindow.localStorage.setItem(config.tokenName, null);\n\t\t\t\t}\n\t\t\t  return response.body;\n\t\t\t})['catch'](function(errRes) {\n\t\t\t  console.error('[logout()] Error logging out: ', errRes);\n\t\t\t  return Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\n\t\tgetCurrentUser() {\n\t\t\t//TODO: Check Current user variable\n\t\t\treturn request.get(config.serverUrl + '/user', {\n\t\t\t}).then(function(response) {\n\t\t\t\t//TODO: Save user information locally\n\t\t\t\tconsole.log('[getCurrentUser()] Current User:', response.data);\n\t\t\t\tuser = response.data;\n\t\t\t\treturn user;\n\t\t\t})['catch'](function(errRes) {\n\t\t\t\tconsole.error('[getCurrentUser()] Error getting current user: ', errRes);\n\t\t\t  return Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\n\t\tgetAuthToken() {\n\t\t\t//TODO: Load token from storage\n\t\t\tif (typeof window == 'undefined' || typeof window.localStorage.getItem(config.tokenName) == 'undefined') {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn window.localStorage.getItem(config.tokenName);\n\t\t}\n\n\t};\n\tvar matter = new Matter();\n\n\treturn matter;\n\n}));"],"sourceRoot":"/source/"}