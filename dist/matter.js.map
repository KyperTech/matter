{"version":3,"sources":["matter.js"],"names":[],"mappings":"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","file":"matter.js","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('lodash'), require('jwt-decode'), require('superagent')) :\n\ttypeof define === 'function' && define.amd ? define(['lodash', 'jwt-decode', 'superagent'], factory) :\n\tglobal.Matter = factory(global._,global.jwtDecode,global.superagent);\n}(this, function (_,jwtDecode,superagent) { 'use strict';\n\n\tvar ___default = 'default' in _ ? _['default'] : _;\n\tjwtDecode = 'default' in jwtDecode ? jwtDecode['default'] : jwtDecode;\n\tsuperagent = 'default' in superagent ? superagent['default'] : superagent;\n\n\tlet defaultConfig = {\n\t\tenvs: {\n\t\t\tlocal: {\n\t\t\t\tserverUrl: 'http://localhost:4000',\n\t\t\t\tlogLevel: 'trace'\n\t\t\t},\n\t\t\tdev: {\n\t\t\t\tserverUrl: 'http://tessellate-stage.elasticbeanstalk.com',\n\t\t\t\tlogLevel: 'debug'\n\t\t\t},\n\t\t\tstage: {\n\t\t\t\tserverUrl: 'http://tessellate-stage.elasticbeanstalk.com',\n\t\t\t\tlogLevel: 'info'\n\t\t\t},\n\t\t\tprod: {\n\t\t\t\tserverUrl: 'http://tessellate.elasticbeanstalk.com',\n\t\t\t\tlogLevel: 'warn'\n\t\t\t}\n\t\t},\n\t\ttokenName: 'tessellate',\n\t\ttokenDataName: 'tessellate-tokenData',\n\t\ttokenUserDataName: 'tessellate-currentUser',\n\t};\n\tlet instance = null;\n\tlet envName = 'prod';\n\tclass Config {\n\t\tconstructor() {\n\t\t\tif (!instance) {\n\t      instance = this;\n\t    }\n\t\t\t// console.log({description: 'Config object created.', config: merge(this, defaultConfig), func: 'constructor', obj: 'Config'});\n\t\t\treturn _.merge(instance, defaultConfig);\n\t\t}\n\t\tget serverUrl() {\n\t\t\tlet url = defaultConfig.envs[envName].serverUrl;\n\t\t\tif (typeof window !== 'undefined' && _.has(window, 'location') && window.location.host === url) {\n\t\t\t\turl = '';\n\t\t\t}\n\t\t\treturn url;\n\t\t}\n\t\tget logLevel() {\n\t\t\treturn defaultConfig.envs[envName].logLevel;\n\t\t}\n\t\tset envName(newEnv) {\n\t\t\tenvName = newEnv;\n\t\t\t// this.envName = newEnv;\n\t\t\t// console.log('Environment name set:', envName);\n\t\t}\n\t\tget env() {\n\t\t\treturn defaultConfig.envs[envName];\n\t\t}\n\t\tapplySettings(settings) {\n\t\t\t_.merge(instance, settings);\n\t\t}\n\n\t}\n\tlet config = new Config();\n\n\t//Set default log level to debug\n\tlet logLevel = 'debug';\n\t//Set log level from config\n\n\tlet logger = {\n\t\tlog(logData) {\n\t\t\tlet msgArgs = buildMessageArgs(logData);\n\t\t\tif (config.envName == 'production') {\n\t\t\t\trunConsoleMethod('log', msgArgs);\n\t\t\t} else {\n\t\t\t\trunConsoleMethod('log', msgArgs);\n\t\t\t}\n\t\t},\n\t\tinfo(logData) {\n\t\t\tlet msgArgs = buildMessageArgs(logData);\n\t\t\tif (config.envName == 'production') {\n\t\t\t\trunConsoleMethod('info', msgArgs);\n\t\t\t} else {\n\t\t\t\trunConsoleMethod('info', msgArgs);\n\t\t\t}\n\t\t},\n\t\twarn(logData) {\n\t\t\tlet msgArgs = buildMessageArgs(logData);\n\t\t\tif (config.envName == 'production') {\n\t\t\t\trunConsoleMethod('warn', msgArgs);\n\t\t\t} else {\n\t\t\t\trunConsoleMethod('warn', msgArgs);\n\t\t\t}\n\t\t},\n\t\tdebug(logData) {\n\t\t\tlet msgArgs = buildMessageArgs(logData);\n\t\t\tif (config.envName == 'production') {\n\t\t\t\t// runConsoleMethod('debug', msgArgs);\n\t\t\t\t//Do not display console debugs in production\n\t\t\t} else {\n\t\t\t\trunConsoleMethod('debug', msgArgs);\n\t\t\t}\n\t\t},\n\t\terror(logData) {\n\t\t\tlet msgArgs = buildMessageArgs(logData);\n\t\t\tif (config.envName == 'production') {\n\t\t\t\t//TODO: Log to external logger\n\t\t\t\trunConsoleMethod('error', msgArgs);\n\t\t\t} else {\n\t\t\t\trunConsoleMethod('error', msgArgs);\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction runConsoleMethod(methodName, methodData) {\n\t\t//Safley run console methods or use console log\n\t\tif (methodName && console[methodName]) {\n\t\t\treturn console[methodName].apply(console, methodData);\n\t\t} else {\n\t\t\treturn console.log.apply(console, methodData);\n\t\t}\n\t}\n\tfunction buildMessageArgs(logData) {\n\t\tvar msgStr = '';\n\t\tvar msgObj = {};\n\t\t//TODO: Attach time stamp\n\t\t//Attach location information to the beginning of message\n\t\tif (___default.isObject(logData)) {\n\t\t\tif (logLevel == 'debug') {\n\t\t\t\tif (___default.has(logData, 'func')) {\n\t\t\t\t\tif (___default.has(logData, 'obj')) {\n\t\t\t\t\t\t//Object and function provided\n\t\t\t\t\t\tmsgStr += `[${logData.obj}.${logData.func}()]\\n `;\n\t\t\t\t\t} else if (___default.has(logData, 'file')) {\n\t\t\t\t\t\tmsgStr += `[${logData.file} > ${logData.func}()]\\n `;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmsgStr += `[${logData.func}()]\\n `;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t//Print each key and its value other than obj and func\n\t\t\t___default.each(___default.omit(___default.keys(logData)), (key, ind, list) => {\n\t\t\t\tif (key != 'func' && key != 'obj') {\n\t\t\t\t\tif (key == 'description' || key == 'message') {\n\t\t\t\t\t\tmsgStr += logData[key];\n\t\t\t\t\t} else if (___default.isString(logData[key])) {\n\t\t\t\t\t\t// msgStr += key + ': ' + logData[key] + ', ';\n\t\t\t\t\t\tmsgObj[key] = logData[key];\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//Print objects differently\n\t\t\t\t\t\t// msgStr += key + ': ' + logData[key] + ', ';\n\t\t\t\t\t\tmsgObj[key] = logData[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tmsgStr += '\\n';\n\t\t} else if (___default.isString(logData)) {\n\t\t\tmsgStr = logData;\n\t\t}\n\t\tvar msg = [msgStr, msgObj];\n\n\t\treturn msg;\n\t}\n\n\tlet domUtil = {\n\t\t/**\n\t\t * @description\n\t\t * Appends given css source to DOM head.\n\t\t *\n\t\t * @param {String} src - url src for css to append\n\t\t *\n\t\t */\n\t\tloadCss: (src) => {\n\t\t\tif (typeof document == 'undefined') {\n\t\t\t\tlogger.error({description: 'Document does not exsist to load assets into.', func: 'loadCss', obj: 'dom'});\n\t\t\t\tthrow new Error('Document object is required to load assets.');\n\t\t\t} else {\n\t\t\t\tlet css = document.createElement('link');\n\t\t\t\tcss.rel = 'stylesheet';\n\t\t\t\tcss.type = 'text/css';\n\t\t\t\tcss.href = src;\n\t\t\t\tdocument.getElementsByTagName('head')[0].insertBefore(css, document.getElementsByTagName('head')[0].firstChild);\n\t\t\t\tlogger.log({description: 'CSS was loaded into document.', element: css, func: 'loadCss', obj: 'dom'});\n\t\t\t\treturn css; //Return link element\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Appends given javascript source to DOM head.\n\t\t *\n\t\t * @param {String} src - url src for javascript to append\n\t\t *\n\t\t */\n\t\tloadJs: (src) => {\n\t\t\tif (typeof window == 'undefined' || !___default.has(window, 'document')) {\n\t\t\t\tlogger.error({description: 'Document does not exsist to load assets into.', func: 'loadCss', obj: 'dom'});\n\t\t\t\tthrow new Error('Document object is required to load assets.');\n\t\t\t} else {\n\t\t\t\tlet js = window.document.createElement('script');\n\t\t\t\tjs.src = src;\n\t\t\t\tjs.type = 'text/javascript';\n\t\t\t\twindow.document.getElementsByTagName('head')[0].appendChild(js);\n\t\t\t\tlogger.log({description: 'JS was loaded into document.', element: js, func: 'loadCss', obj: 'dom'});\n\t\t\t\treturn js; //Return script element\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Appends given javascript source to DOM head.\n\t\t *\n\t\t * @param {String} src - url src for javascript to append\n\t\t *\n\t\t */\n\t\tasyncLoadJs: (src) => {\n\t\t\tif (typeof window == 'undefined' || !___default.has(window, 'document')) {\n\t\t\t\tlogger.error({description: 'Document does not exsist to load assets into.', func: 'loadCss', obj: 'dom'});\n\t\t\t\tthrow new Error('Document object is required to load assets.');\n\t\t\t} else {\n\t\t\t\tlet js = window.document.createElement('script');\n\t\t\t\tjs.src = src;\n\t\t\t\tjs.type = 'text/javascript';\n\t\t\t\twindow.document.getElementsByTagName('head')[0].appendChild(js);\n\t\t\t\tlogger.log({description: 'JS was loaded into document.', element: js, func: 'loadCss', obj: 'dom'});\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\twindow.setTimeout(resolve, 30);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tlet data = {};\n\n\tlet storage = {\n\t\t/** Gets whether or not local storage exists.\n\t\t * @param {String} itemName The items name\n\t\t * @param {String} itemValue The items value\n\t\t * @return {Boolean}\n\t\t *\n\t\t */\n\t\tget localExists() {\n\t\t\tconst testKey = 'test';\n\t\t\tif (typeof window != 'undefined' && typeof window.sessionStorage != 'undefined') {\n\t\t\t\ttry {\n\t\t\t\t\twindow.sessionStorage.setItem(testKey, '1');\n\t\t\t\t\twindow.sessionStorage.removeItem(testKey);\n\t\t\t\t\treturn true;\n\t\t\t\t} catch (err) {\n\t\t\t\t\tlogger.error({description: 'Error saving to session storage', error: err,  obj: 'storage', func: 'localExists'});\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Safley sets item to session storage.\n\t\t *\n\t\t * @param {String} itemName The items name\n\t\t * @param {String} itemValue The items value\n\t\t *\n\t\t */\n\t\titem(itemName, itemValue) {\n\t\t\treturn this.setItem(itemName, itemValue);\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Safley sets item to session storage. Alias: item()\n\t\t *\n\t\t * @param {String} itemName The items name\n\t\t * @param {String} itemValue The items value\n\t\t *\n\t\t */\n\t\tsetItem(itemName, itemValue) {\n\t\t\tdata[itemName] = itemValue;\n\t\t\tif (this.localExists) {\n\t\t\t\t//Convert object to string\n\t\t\t\tif (___default.isObject(itemValue)) {\n\t\t\t\t\titemValue = JSON.stringify(itemValue);\n\t\t\t\t}\n\t\t\t\twindow.sessionStorage.setItem(itemName, itemValue);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Safley gets an item from session storage. Alias: item()\n\t\t *\n\t\t * @param {String} itemName The items name\n\t\t * @return {String}\n\t\t *\n\t\t */\n\t\tgetItem(itemName) {\n\t\t\tif (data[itemName]) {\n\t\t\t\treturn data[itemName];\n\t\t\t} else if (this.localExists) {\n\t\t\t\tlet itemStr = window.sessionStorage.getItem(itemName);\n\t\t\t\t//Check that str is not null before parsing\n\t\t\t\tif (itemStr) {\n\t\t\t\t\tlet isObj = false;\n\t\t\t\t\tlet itemObj = null;\n\t\t\t\t\t//Try parsing to object\n\t\t\t\t\ttry {\n\t\t\t\t\t\titemObj = JSON.parse(itemStr);\n\t\t\t\t\t\tisObj = true;\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t// logger.log({message: 'String could not be parsed.', error: err, func: 'getItem', obj: 'storage'});\n\t\t\t\t\t\t//Parsing failed, this must just be a string\n\t\t\t\t\t\tisObj = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (isObj) {\n\t\t\t\t\t\treturn itemObj;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn itemStr;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @description Safley removes item from session storage.\n\t\t *\n\t\t * @param {String} itemName - The items name\n\t\t *\n\t\t */\n\t\tremoveItem(itemName) {\n\t\t\t//TODO: Only remove used items\n\t\t\tif (data[itemName]) {\n\t\t\t\tdata[itemName] = null;\n\t\t\t}\n\t\t\tif (this.localExists) {\n\t\t\t\ttry {\n\t\t\t\t\t//Clear session storage\n\t\t\t\t\twindow.sessionStorage.removeItem(itemName);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tlogger.error({description: 'Error removing item from session storage', error: err,  obj: 'storage', func: 'removeItem'});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Safley removes item from session storage.\n\t\t *\n\t\t * @param {String} itemName the items name\n\t\t * @param {String} itemValue the items value\n\t\t *\n\t\t */\n\t\tclear() {\n\t\t\t//TODO: Only remove used items\n\t\t\tdata = {};\n\t\t\tif (this.localExists) {\n\t\t\t\ttry {\n\t\t\t\t\t\t//Clear session storage\n\t\t\t\t\twindow.sessionStorage.clear();\n\t\t\t\t} catch (err) {\n\t\t\t\t\tlogger.warn({description: 'Session storage could not be cleared.', error: err});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction decodeToken(tokenStr) {\n\t\tlet tokenData;\n\t\tif (tokenStr && tokenStr != '') {\n\t\t\ttry {\n\t\t\t\ttokenData = jwtDecode(tokenStr);\n\t\t\t} catch (err) {\n\t\t\t\tlogger.error({description: 'Error decoding token.', data: tokenData, error: err, func: 'decodeToken', file: 'token'});\n\t\t\t\tthrow new Error('Invalid token string.');\n\t\t\t}\n\t\t}\n\t\treturn tokenData;\n\t}\n\tlet token = {\n\t\t/** Get string value of token\n\t\t * @return {String}\n\t\t * @example\n\t\t * console.log('String value of current token', token.string);\n\t\t */\n\t\tget string() {\n\t\t\treturn storage.getItem(config.tokenName);\n\t\t},\n\t\t/** Get decoded data within token (unencrypted data only)\n\t\t * @return {Object}\n\t\t * @example\n\t\t * console.log('Data of current token:', token.data);\n\t\t */\n\t\tget data() {\n\t\t\tif (storage.getItem(config.tokenDataName)) {\n\t\t\t\treturn storage.getItem(config.tokenDataName);\n\t\t\t} else {\n\t\t\t\treturn decodeToken(this.string);\n\t\t\t}\n\t\t},\n\t\t/** Set token data\n\t\t */\n\t\tset data(tokenData) {\n\t\t\tif (___default.isString(tokenData)) {\n\t\t\t\tlet tokenStr = tokenData;\n\t\t\t\ttokenData = decodeToken(tokenStr);\n\t\t\t\tlogger.info({description: 'Token data was set as string. Decoding token.', token: tokenStr, tokenData: tokenData, func: 'data', obj: 'token'});\n\t\t\t} else {\n\t\t\t\tlogger.log({description: 'Token data was set.', data: tokenData, func: 'data', obj: 'token'});\n\t\t\t\tstorage.setItem(config.tokenDataName, tokenData);\n\t\t\t}\n\t\t},\n\t\t/** Set token value as a string\n\t\t */\n\t\tset string(tokenData) {\n\t\t\tlet tokenStr;\n\t\t\t//Handle object being passed\n\t\t\tif (!___default.isString(tokenData)) {\n\t\t\t\t//Token is included in object\n\t\t\t\tlogger.log({description: 'Token data is not string.', token: tokenData, func: 'string', obj: 'token'});\n\n\t\t\t\tif (___default.isObject(tokenData) && ___default.has(tokenData, 'token')) {\n\t\t\t\t\ttokenStr = tokenData.token;\n\t\t\t\t} else {\n\t\t\t\t\t//Input is either not an string or object that contains nessesary info\n\t\t\t\t\tlogger.error({description: 'Invalid value set to token.', token: tokenData, func: 'string', obj: 'token'});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttokenStr = tokenData;\n\t\t\t}\n\t\t\tlogger.log({description: 'Token was set.', token: tokenData, tokenStr: tokenStr, func: 'string', obj: 'token'});\n\t\t\tstorage.setItem(config.tokenName, tokenStr);\n\t\t\tthis.data = jwtDecode(tokenStr);\n\t\t},\n\t\t/** Save token data\n\t\t */\n\t\tsave(tokenStr) {\n\t\t\tthis.string = tokenStr;\n\t\t},\n\t\t/** Delete token data\n\t\t */\n\t\tdelete() {\n\t\t\t//Remove string token\n\t\t\tstorage.removeItem(config.tokenName);\n\t\t\t//Remove user data\n\t\t\tstorage.removeItem(config.tokenDataName);\n\t\t\tlogger.log({description: 'Token was removed.', func: 'delete', obj: 'token'});\n\t\t}\n\t};\n\n\tlet request = {\n\t\tget(endpoint, queryData) {\n\t\t\tvar req = superagent.get(endpoint);\n\t\t\tif (queryData) {\n\t\t\t\treq.query(queryData);\n\t\t\t}\n\t\t\treq = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t},\n\t\tpost(endpoint, data) {\n\t\t\tvar req = superagent.post(endpoint).send(data);\n\t\t\treq = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t},\n\t\tput(endpoint, data) {\n\t\t\tvar req = superagent.put(endpoint, data);\n\t\t\treq = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t},\n\t\tdel(endpoint, data) {\n\t\t\tvar req = superagent.put(endpoint, data);\n\t\t\treq = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t}\n\t};\n\n\tfunction handleResponse(req) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\treq.end((err, res) => {\n\t\t\t\tif (!err) {\n\t\t\t\t\t// logger.log({description: 'Response:', response:res, func:'handleResponse', file: 'request'});\n\t\t\t\t\treturn resolve(res.body);\n\t\t\t\t} else {\n\t\t\t\t\tif (err.status == 401) {\n\t\t\t\t\t\tlogger.warn({description: 'Unauthorized. You must be signed into make this request.', func: 'handleResponse'});\n\t\t\t\t\t}\n\t\t\t\t\tif (err && err.response) {\n\t\t\t\t\t\treturn reject(err.response.text);\n\t\t\t\t\t}\n\t\t\t\t\tlogger.warn({description: 'Unauthorized. You must be signed into make this request.', error: err, func: 'handleResponse'});\n\t\t\t\t\treturn reject(err);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\tfunction addAuthHeader(req) {\n\t\tif (token.string) {\n\t\t\treq = req.set('Authorization', 'Bearer ' + token.string);\n\t\t\tconsole.info({message: 'Set auth header', func: 'addAuthHeader', file: 'request'});\n\t\t}\n\t\treturn req;\n\t}\n\n\t// import hello from 'hellojs'; //Modifies objects to have id parameter?\n\t// import hello from 'hellojs'; //After es version of module is created\n\t//Private object containing clientIds\n\tlet clientIds = {};\n\n\tclass ProviderAuth {\n\t\tconstructor(actionData) {\n\t\t\tthis.app = actionData.app ? actionData.app : null;\n\t\t\tthis.redirectUri = actionData.redirectUri ? actionData.redirectUri : 'redirect.html';\n\t\t\tthis.provider = actionData.provider ? actionData.provider : null;\n\t\t}\n\t\t/** Load hellojs library script into DOM\n\t\t */\n\t\tloadHello() {\n\t\t\t//Load hellojs script\n\t\t\t//TODO: Replace this with es6ified version\n\t\t\tif (typeof window != 'undefined' && !window.hello) {\n\t\t\t\treturn domUtil.asyncLoadJs('https://s3.amazonaws.com/kyper-cdn/js/hello.js');\n\t\t\t} else {\n\t\t\t\treturn Promise.reject();\n\t\t\t}\n\t\t}\n\t\thelloLoginListener() {\n\t\t\t//Login Listener\n\t\t\twindow.hello.on('auth.login', (auth) => {\n\t\t\t\tlogger.info({description: 'User logged in to google.', func: 'loadHello', obj: 'Google'});\n\t\t\t\t// Call user information, for the given network\n\t\t\t\twindow.hello(auth.network).api('/me').then(function(r) {\n\t\t\t\t\t// Inject it into the container\n\t\t\t\t\t//TODO:Send account informaiton to server\n\t\t\t\t\tvar userData = r;\n\t\t\t\t\tuserData.provider = auth.network;\n\t\t\t\t\t//Login or Signup endpoint\n\t\t\t\t\treturn request.post(this.endpoint + '/provider', userData)\n\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\tlogger.log({description: 'Provider request successful.',  response: response, func: 'signup', obj: 'GoogleUtil'});\n\t\t\t\t\t\t\treturn response;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t['catch']((errRes) => {\n\t\t\t\t\t\t\tlogger.error({description: 'Error requesting login.', error: errRes, func: 'signup', obj: 'Matter'});\n\t\t\t\t\t\t\treturn Promise.reject(errRes);\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\t/** Initialize hellojs library and request app providers\n\t\t */\n\t\tinitHello() {\n\t\t\treturn this.loadHello().then(() => {\n\t\t\t\treturn request.get(`${this.app.endpoint}/providers`)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tlogger.log({description: 'Provider request successful.',  response: response, func: 'initHello', obj: 'ProviderAuth'});\n\t\t\t\t\tlet provider = response[this.provider];\n\t\t\t\t\tif (!provider) {\n\t\t\t\t\t\tlogger.error({description: 'Provider is not setup. Visit tessellate.kyper.io to enter your client id for ' + this.provider, provider: this.provider, clientIds: clientIds, func: 'login', obj: 'ProviderAuth'});\n\t\t\t\t\t\treturn Promise.reject({message: 'Provider is not setup.'});\n\t\t\t\t\t}\n\t\t\t\t\tlogger.log({description: 'Providers config built', providersConfig: response, func: 'initHello', obj: 'ProviderAuth'});\n\t\t\t\t\treturn window.hello.init(response, {redirect_uri: 'redirect.html'});\n\t\t\t\t}, (err) => {\n\t\t\t\t\tlogger.error({description: 'Error loading hellojs.', error: errRes, func: 'initHello', obj: 'ProviderAuth'});\n\t\t\t\t\treturn Promise.reject({message: 'Error requesting application third party providers.'});\n\t\t\t\t})\n\t\t\t\t['catch']((errRes) => {\n\t\t\t\t\tlogger.error({description: 'Error loading hellojs.', error: errRes, func: 'initHello', obj: 'ProviderAuth'});\n\t\t\t\t\treturn Promise.reject({message: 'Error loading third party login capability.'});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t  /** External provider login\n\t   * @example\n\t   * //Login to account that was started through external account signup (Google, Facebook, Github)\n\t   * ProviderAuth('google').login().then(function(loginRes){\n\t   * \t\tconsole.log('Successful login:', loginRes)\n\t   * }, function(err){\n\t   * \t\tconsole.error('Error with provider login:', err);\n\t   * });\n\t   */\n\t\tlogin() {\n\t\t\treturn this.initHello().then(() => {\n\t\t\t\treturn window.hello.login(this.provider);\n\t\t\t}, (err) => {\n\t\t\t\tlogger.error({description: 'Error initalizing hellojs.', error: err, func: 'login', obj: 'Matter'});\n\t\t\t\treturn Promise.reject({message: 'Error with third party login.'});\n\t\t\t});\n\t\t}\n\t\t/** Signup using external provider account (Google, Facebook, Github)\n\t   * @example\n\t   * //Signup using external account (Google, Facebook, Github)\n\t   * ProviderAuth('google').signup().then(function(signupRes){\n\t   * \t\tconsole.log('Successful signup:', signupRes)\n\t   * }, function(err){\n\t   * \t\tconsole.error('Error with provider signup:', err);\n\t   * });\n\t\t */\n\t\tsignup() {\n\t\t\t//TODO: send info to server\n\t\t\treturn this.login();\n\t\t}\n\t}\n\n\tclass Matter {\n\t\t/** Constructor\n\t\t * @param {String} appName Name of application\n\t\t */\n\t\tconstructor(appName, opts) {\n\t\t\tif (!appName) {\n\t\t\t\tlogger.error({description: 'Application name requires to use Matter.', func: 'constructor', obj: 'Matter'});\n\t\t\t\tthrow new Error('Application name is required to use Matter');\n\t\t\t} else {\n\t\t\t\tthis.name = appName;\n\t\t\t}\n\t\t\tif (opts) {\n\t\t\t\tthis.options = opts;\n\t\t\t}\n\t\t\tthis.config = config;\n\t\t}\n\t\t/** Endpoint generation that handles default/provided settings and environment\n\t\t * @return {String} endpoint - endpoint for tessellate application\n\t\t */\n\t\tget endpoint() {\n\t\t\t//Handle options\n\t\t\tif (___default.has(this, 'options')) {\n\t\t\t\tif (this.options.localServer) {\n\t\t\t\t\tconfig.envName = 'local';\n\t\t\t\t\tlogger.info({description: 'LocalServer option was set to true. Now server url is local server.', url: config.serverUrl, func: 'endpoint', obj: 'Matter'});\n\t\t\t\t}\n\t\t\t\tif (this.options.env) {\n\t\t\t\t\tconfig.envName = this.options.env;\n\t\t\t\t\tlogger.info({description: 'Environment set based on provided environment.', config: config, func: 'endpoint', obj: 'Matter'});\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet appEndpoint = `${config.serverUrl}/apps/${this.name}`;\n\t\t\t//Handle tessellate as name\n\t\t\tif (this.name == 'tessellate') {\n\t\t\t\t//Remove url if host is a tessellate server\n\t\t\t\tif (typeof window !== 'undefined' && ___default.has(window, 'location') && (window.location.host.indexOf('tessellate') !== -1 || window.location.host.indexOf('localhost') !== -1)) {\n\t\t\t\t\tappEndpoint = serverUrl;\n\t\t\t\t\tlogger.info({description: 'Host is Tessellate Server, serverUrl simplified!', url: serverUrl, func: 'endpoint', obj: 'Matter'});\n\t\t\t\t}\n\t\t\t}\n\t\t\tlogger.log({description: 'Endpoint created.', url: appEndpoint, func: 'endpoint', obj: 'Matter'});\n\t\t\treturn appEndpoint;\n\t\t}\n\t\t/** Signup a new user\n\t   * @param {Object} signupData - Object containing data to use while signing up to application.\n\t   * @param {String} signupData.username - Username of new user (error will be returned if username is taken)\n\t   * @param {String} signupData.email - Email of new user (error will be returned if email is already used)\n\t\t * @param {String} signupData.password - Password to be used with account (will be encrypted).\n\t   * @return {Promise}\n\t   * @example\n\t   * //Signup a new user\n\t   * var signupData = {username: 'testuser1', email:'test@email.com', password: 'testpassword'};\n\t   * matter.signup(signupData).then(function(signupRes){\n\t   *  console.log('New user signed up successfully. New account: ', signupRes.account);\n\t   * }, function(err){\n\t   *  console.error('Error signing up:', err);\n\t   * });\n\t   */\n\t\tsignup(signupData) {\n\t\t\tlogger.log({description: 'Signup called.', signupData: signupData, func: 'signup', obj: 'Matter'});\n\t\t\tif (!signupData || (!___default.isObject(signupData) && !___default.isString(signupData))) {\n\t\t\t\tlogger.error({description: 'Signup information is required to signup.', func: 'signup', obj: 'Matter'});\n\t\t\t\treturn Promise.reject({message: 'Login data is required to login.'});\n\t\t\t}\n\t\t\tif (___default.isObject(signupData)) {\n\t\t\t\treturn request.post(this.endpoint + '/signup', signupData)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tlogger.log({description: 'Account request successful.', signupData: signupData, response: response, func: 'signup', obj: 'Matter'});\n\t\t\t\t\tif (___default.has(response, 'account')) {\n\t\t\t\t\t\treturn response.account;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlogger.warn({description: 'Account was not contained in signup response.', signupData: signupData, response: response, func: 'signup', obj: 'Matter'});\n\t\t\t\t\t\treturn response;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t['catch']((errRes) => {\n\t\t\t\t\tlogger.error({description: 'Error requesting signup.', signupData: signupData, error: errRes, func: 'signup', obj: 'Matter'});\n\t\t\t\t\treturn Promise.reject(errRes);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t//Handle 3rd Party signups\n\t\t\t\tlet auth = new ProviderAuth({provider: signupData, app: this});\n\t\t\t\treturn auth.signup(signupData).then((res) => {\n\t\t\t\t\tlogger.info({description: 'Provider signup successful.', provider: signupData, res: res, func: 'signup', obj: 'Matter'});\n\t\t\t\t\treturn Promise.resolve(res);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t  /** Login by username/email or external provider\n\t   * @param {Object} loginData - Object containing data to use while logging in to application.\n\t   * @param {String} loginData.username - Username of user to login as\n\t   * @param {String} loginData.email - Email of new user (Optional instead of username)\n\t   * @param {String} loginData.password - Password to be used with account (will be encrypted).\n\t   * @return {Promise}\n\t   * @example\n\t   * //Login as 'testuser1'\n\t   * var loginData = {username: 'testuser1', password: 'testpassword'};\n\t   * matter.login(loginData).then(function(loginRes){\n\t   *  console.log('New user logged in succesfully. Account: ', loginRes.account);\n\t   * }, function(err){\n\t   *  console.error('Error logging in:', err);\n\t   * });\n\t   */\n\t\tlogin(loginData) {\n\t\t\tif (!loginData || (!___default.isObject(loginData) && !___default.isString(loginData))) {\n\t\t\t\tlogger.error({description: 'Username/Email and Password are required to login', func: 'login', obj: 'Matter'});\n\t\t\t\treturn Promise.reject({message: 'Login data is required to login.'});\n\t\t\t}\n\t\t\tif (___default.isObject(loginData)) {\n\t\t\t\tif (!loginData.password || !loginData.username) {\n\t\t\t\t\treturn Promise.reject({message: 'Username/Email and Password are required to login'});\n\t\t\t\t}\n\t\t\t\t//Username/Email Login\n\t\t\t\treturn request.put(this.endpoint + '/login', loginData)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tif (___default.has(response, 'data') && ___default.has(response.data, 'status') && response.data.status == 409) {\n\t\t\t\t\t\tlogger.warn({description: 'Account not found.', response: response, func: 'login', obj: 'Matter'});\n\t\t\t\t\t\treturn Promise.reject(response.data);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlogger.log({description: 'Successful login.', response: response, func: 'login', obj: 'Matter'});\n\t\t\t\t\t\tif (___default.has(response, 'token')) {\n\t\t\t\t\t\t\tthis.token.string = response.token;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (___default.has(response, 'account')) {\n\t\t\t\t\t\t\tthis.storage.setItem(config.tokenUserDataName, response.account);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn response.account;\n\t\t\t\t\t}\n\t\t\t\t})['catch']((errRes) => {\n\t\t\t\t\tlogger.error({description: 'Error requesting login.', error: errRes, status: errRes.status,  func: 'login', obj: 'Matter'});\n\t\t\t\t\tif (errRes.status == 409 || errRes.status == 400) {\n\t\t\t\t\t\terrRes = errRes.response.text;\n\t\t\t\t\t}\n\t\t\t\t\treturn Promise.reject(errRes);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t//Provider login\n\t\t\t\tlet auth = new ProviderAuth({provider: loginData, app: this});\n\t\t\t\treturn auth.login().then((res) => {\n\t\t\t\t\tlogger.info({description: 'Provider login successful.', provider: loginData, res: res, func: 'login', obj: 'Matter'});\n\t\t\t\t\treturn Promise.resolve(res);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t/** Logout\n\t\t * @return {Promise}\n\t\t * @example\n\t\t * //Logout of currently logged in account\n\t\t * matter.logout().then(function(loginRes){\n\t\t *  console.log('Logged out successfully');\n\t\t * }, function(err){\n\t\t *  console.error('Error logging out:', err);\n\t\t * });\n\t\t */\n\t\tlogout() {\n\t\t\t//TODO: Handle logging out of providers\n\t\t\tif (!this.isLoggedIn) {\n\t\t\t\tlogger.warn({description: 'No logged in account to log out.', func: 'logout', obj: 'Matter'});\n\t\t\t\treturn Promise.reject({message: 'No logged in account to log out.'});\n\t\t\t}\n\t\t\treturn request.put(this.endpoint + '/logout').then((response) => {\n\t\t\t\tlogger.log({description: 'Logout successful.', response: response, func: 'logout', obj: 'Matter'});\n\t\t\t\tthis.currentUser = null;\n\t\t\t\tthis.token.delete();\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\tlogger.error({description: 'Error requesting log out: ', error: errRes, func: 'logout', obj: 'Matter'});\n\t\t\t\tthis.storage.removeItem(config.tokenUserDataName);\n\t\t\t\tthis.token.delete();\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t/** getCurrentUser\n\t\t * @return {Promise}\n\t\t * @example\n\t\t * //Logout of currently logged in account\n\t\t * matter.getCurrentUser().then(function(currentAccount){\n\t\t *  console.log('Currently logged in account:', currentAccount);\n\t\t * }, function(err){\n\t\t *  console.error('Error logging out:', err);\n\t\t * });\n\t\t */\n\t\tgetCurrentUser() {\n\t\t\tif (this.currentUser) {\n\t\t\t\treturn Promise.resolve(this.currentUser);\n\t\t\t} else {\n\t\t\t\tif (this.isLoggedIn) {\n\t\t\t\t\treturn request.get(this.endpoint + '/user').then((response) => {\n\t\t\t\t\t\t//TODO: Save user information locally\n\t\t\t\t\t\tlogger.log({description: 'Current User Request responded.', responseData: response, func: 'currentUser', obj: 'Matter'});\n\t\t\t\t\t\tthis.currentUser = response;\n\t\t\t\t\t\treturn response;\n\t\t\t\t\t})['catch']((errRes) => {\n\t\t\t\t\t\tif (errRes.status == 401) {\n\t\t\t\t\t\t\tlogger.warn({description: 'Called for current user without token.', error: errRes, func: 'currentUser', obj: 'Matter'});\n\t\t\t\t\t\t\ttoken.delete();\n\t\t\t\t\t\t\treturn Promise.resolve(null);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlogger.error({description: 'Error requesting current user.', error: errRes, func: 'currentUser', obj: 'Matter'});\n\t\t\t\t\t\t\treturn Promise.reject(errRes);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturn Promise.resolve(null);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/** updateProfile\n\t\t * @param {Object} updateData - Data to update within profile (only provided data will be modified).\n\t\t * @return {Promise}\n\t\t * @example\n\t\t * //Update current account's profile\n\t\t * matter.updateProfile().then(function(updatedAccount){\n\t\t *  console.log('Currently logged in account:', updatedAccount);\n\t\t * }, function(err){\n\t\t *  console.error('Error updating profile:', err);\n\t\t * });\n\t\t */\n\t\tupdateProfile(updateData) {\n\t\t\tif (!this.isLoggedIn) {\n\t\t\t\tlogger.error({description: 'No current user profile to update.', func: 'updateProfile', obj: 'Matter'});\n\t\t\t\treturn Promise.reject({message: 'Must be logged in to update profile.'});\n\t\t\t}\n\t\t\t//Send update request\n\t\t\treturn request.put(`${this.endpoint}/user/${this.token.data.username}` , updateData).then((response) => {\n\t\t\t\tlogger.log({description: 'Update profile request responded.', responseData: response, func: 'updateProfile', obj: 'Matter'});\n\t\t\t\tthis.currentUser = response;\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\tlogger.error({description: 'Error requesting current user.', error: errRes, func: 'updateProfile', obj: 'Matter'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t/** changePassword\n\t\t * @param {Object} updateData - Data to update within profile (only provided data will be modified).\n\t\t * @return {Promise}\n\t\t * @example\n\t\t * //Update current account's profile\n\t\t * matter.changePassword().then(function(updatedAccount){\n\t\t *  console.log('Currently logged in account:', updatedAccount);\n\t\t * }, function(err){\n\t\t *  console.error('Error updating profile:', err);\n\t\t * });\n\t\t */\n\t\tchangePassword(updateData) {\n\t\t\tif (!this.isLoggedIn) {\n\t\t\t\tlogger.error({description: 'No current user profile for which to change password.', func: 'changePassword', obj: 'Matter'});\n\t\t\t\treturn Promise.reject({message: 'Must be logged in to change password.'});\n\t\t\t}\n\t\t\t//Send update request\n\t\t\treturn request.put(`${this.endpoint}/user/${this.token.data.username}` , updateData).then((response) => {\n\t\t\t\tlogger.log({description: 'Update password request responded.', responseData: response, func: 'changePassword', obj: 'Matter'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\tlogger.error({description: 'Error requesting password change.', error: errRes, func: 'changePassword', obj: 'Matter'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\trecoverPassword() {\n\t\t\tif (!this.isLoggedIn) {\n\t\t\t\tlogger.error({description: 'No current user for which to recover password.', func: 'recoverPassword', obj: 'Matter'});\n\t\t\t\treturn Promise.reject({message: 'Must be logged in to recover password.'});\n\t\t\t}\n\t\t\t//Send update request\n\t\t\treturn request.post(`${this.endpoint}/accounts/${this.token.data.username}/recover`).then((response) => {\n\t\t\t\tlogger.log({description: 'Recover password request responded.', responseData: response, func: 'recoverPassword', obj: 'Matter'});\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\tlogger.error({description: 'Error requesting password recovery.', error: errRes, func: 'recoverPassword', obj: 'Matter'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t/** Get current logged in status\n\t\t * @return {Boolean}\n\t\t * @example\n\t\t * //Check if there is an account currently logged in\n\t\t * if(matter.isLoggedIn){\n\t\t * console.log('There is currently an account logged in.');\n\t\t * } else {\n\t\t * console.warn('There is no account currently logged in.');\n\t\t * }\n\t\t */\n\t\tget isLoggedIn() {\n\t\t\treturn this.token.string ? true : false;\n\t\t}\n\t\t/** Save current user (handled automatically by default)\n\t\t * @param {Object} userData - Account data to set for current user\n\t\t * @example\n\t\t * //Save account response to current user\n\t\t * matter.currentUser = {username: 'testuser1', email: 'test@email.com'};\n\t\t * console.log('New current user set:', matter.currentUser);\n\t\t */\n\t\tset currentUser(userData) {\n\t\t\tlogger.log({description: 'Current User set.', user: userData, func: 'currentUser', obj: 'Matter'});\n\t\t\tthis.storage.setItem(config.tokenUserDataName, userData);\n\t\t}\n\t  /** Get currently logged in user or returns null\n\t   * @return {Object|null}\n\t   * @example\n\t   * //Return account if logged in\n\t   * if(matter.isLoggedIn){\n\t   * console.log('Current user account: ', matter.currentUser);\n\t   * } else {\n\t   * console.log('No current user. Current user: ', matter.currentUser)\n\t   * }\n\t   * matter.currentUser\n\t   * console.log('New current user set:', matter.currentUser);\n\t   */\n\t\tget currentUser() {\n\t\t\tif (this.storage.getItem(config.tokenUserDataName)) {\n\t\t\t\treturn this.storage.getItem(config.tokenUserDataName);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\t/* Storage Utility\n\t\t *\n\t\t */\n\t\tget storage() {\n\t\t\treturn storage;\n\t\t}\n\t\t/** Token Utility\n\t\t */\n\t\tget token() {\n\t\t\treturn token;\n\t\t}\n\t\t/** Utils placed in base library\n\t\t */\n\t\tget utils() {\n\t\t\treturn {logger: logger, request: request, storage: storage, dom: domUtil};\n\t\t}\n\n\t\t/** Check that user is in a single group or in all of a list of groups\n\t\t * @param {Array} checkGroups - List of groups to check for account membership\n\t\t * @return {Boolean}\n\t\t * @example\n\t\t * //Check for group membership\n\t\t * var isBoth = ;\n\t\t * if(matter.isInGroup('admins')){\n\t\t * console.log('Current account is an admin!');\n\t\t * } else {\n\t\t * console.warn('Current account is not an admin.');\n\t\t * }\n\t\t *\n\t\t */\n\t\tisInGroup(checkGroups) {\n\t\t\tif (!this.isLoggedIn) {\n\t\t\t\tlogger.log({description: 'No logged in user to check.', func: 'isInGroup', obj: 'Matter'});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t//Check if user is\n\t\t\tif (checkGroups && ___default.isString(checkGroups)) {\n\t\t\t\tlet groupName = checkGroups;\n\t\t\t\t//Single role or string list of roles\n\t\t\t\tlet groupsArray = groupName.split(',');\n\t\t\t\tif (groupsArray.length > 1) {\n\t\t\t\t\t//String list of groupts\n\t\t\t\t\tlogger.info({description: 'String list of groups.', list: groupsArray, func: 'isInGroup', obj: 'Matter'});\n\t\t\t\t\treturn this.isInGroups(groupsArray);\n\t\t\t\t} else {\n\t\t\t\t\t//Single group\n\t\t\t\t\tlet groups = this.token.data.groups || [];\n\t\t\t\t\tlogger.log({description: 'Checking if user is in group.', group: groupName, userGroups: this.token.data.groups || [],  func: 'isInGroup', obj: 'Matter'});\n\t\t\t\t\treturn ___default.any(groups, (group) =>  {\n\t\t\t\t\t\treturn groupName == group.name;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else if (checkGroups && ___default.isArray(checkGroups)) {\n\t\t\t\t//Array of roles\n\t\t\t\t//Check that user is in every group\n\t\t\t\tlogger.info({description: 'Array of groups.', list: checkGroups, func: 'isInGroup', obj: 'Matter'});\n\t\t\t\treturn this.isInGroups(checkGroups);\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t//TODO: Handle string and array inputs\n\t\t}\n\t  /** Check that user is in all of a list of groups\n\t   * @param {Array|String} checkGroups - List of groups to check for account membership\n\t   * @return {Boolean}\n\t   * @example\n\t   * //Check for group membership\n\t   * var isBoth = matter.isInGroups(['admins', 'users']);\n\t   * if(isBoth){\n\t   * console.log('Current account is both an admin and a user');\n\t   * } else {\n\t   * console.warn('Current account is not both an admin and a user')\n\t   * }\n\t   *\n\t   */\n\t\tisInGroups(checkGroups) {\n\t\t\tif (!this.isLoggedIn) {\n\t\t\t\tlogger.log({description: 'No logged in user to check.', func: 'isInGroups', obj: 'Matter'});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t//Check if user is in any of the provided groups\n\t\t\tif (checkGroups && ___default.isArray(checkGroups)) {\n\t\t\t\treturn ___default.every(___default.map(checkGroups, (group) =>  {\n\t\t\t\t\tif (___default.isString(group)) {\n\t\t\t\t\t\t//Group is string\n\t\t\t\t\t\treturn this.isInGroup(group);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//Group is object\n\t\t\t\t\t\tif (___default.has(group, 'name')) {\n\t\t\t\t\t\t\treturn this.isInGroup(group.name);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlogger.error({description: 'Invalid group object.', group: group, func: 'isInGroups', obj: 'Matter'});\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}), true);\n\t\t\t} else if (checkGroups && ___default.isString(checkGroups)) {\n\t\t\t\t//TODO: Handle spaces within string list\n\t\t\t\tlet groupsArray = checkGroups.split(',');\n\t\t\t\tif (groupsArray.length > 1) {\n\t\t\t\t\treturn this.isInGroups(groupsArray);\n\t\t\t\t}\n\t\t\t\treturn this.isInGroup(groupsArray[0]);\n\t\t\t} else {\n\t\t\t\tlogger.error({description: 'Invalid groups list.', func: 'isInGroups', obj: 'Matter'});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn Matter;\n\n}));"],"sourceRoot":"/source/"}