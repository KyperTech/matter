{"version":3,"sources":["matter.js"],"names":[],"mappings":"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","file":"matter.js","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('superagent'), require('underscore')) :\n\ttypeof define === 'function' && define.amd ? define(['superagent', 'underscore'], factory) :\n\tglobal.Matter = factory(global.requester,global._);\n}(this, function (requester,_) { 'use strict';\n\n\trequester = 'default' in requester ? requester['default'] : requester;\n\t_ = 'default' in _ ? _['default'] : _;\n\n\tlet config = {\n\t\tserverUrl: 'http://tessellate.elasticbeanstalk.com',\n\t\ttokenName: 'matter'\n\t};\n\t//Set server to local server if developing\n\tif (typeof window != 'undefined' && (window.location.hostname == '' || window.location.hostname == 'localhost')) {\n\t\tconfig.serverUrl = 'http://localhost:4000';\n\t}\n\n\tlet storage = {\n\t\tget exists() {\n\t\t\tconst testKey = 'test';\n\t\t\tif (typeof window != 'undefined') {\n\t\t\t\ttry {\n\t\t\t\t\twindow.sessionStorage.setItem(testKey, '1');\n\t\t\t\t\twindow.sessionStorage.removeItem(testKey);\n\t\t\t\t\treturn true;\n\t\t\t\t} catch (err) {\n\t\t\t\t\tconsole.warn('Session storage does not exist.', err);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Safley sets item to session storage.\n\t\t *\n\t\t * @param {String} itemName The items name\n\t\t * @param {String} itemValue The items value\n\t\t *\n\t\t *  @private\n\t\t */\n\t\tsetItem(itemName, itemValue) {\n\t\t\t//TODO: Handle itemValue being an object instead of a string\n\t\t\tif (this.exists) {\n\t\t\t\twindow.sessionStorage.setItem(itemName, itemValue);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Safley gets an item from session storage.\n\t\t *\n\t\t * @param {String} itemName The items name\n\t\t *\n\t\t * @return {String}\n\t\t *\n\t\t */\n\t\tgetItem(itemName) {\n\t\t\tif (this.exists) {\n\t\t\t\treturn window.sessionStorage.getItem(itemName);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Safley removes item from session storage.\n\t\t *\n\t\t * @param {String} itemName - The items name\n\t\t *\n\t\t */\n\t\tremoveItem(itemName) {\n\t\t\t//TODO: Only remove used items\n\t\t\tif (this.exists) {\n\t\t\t\ttry {\n\t\t\t\t\t//Clear session storage\n\t\t\t\t\twindow.sessionStorage.removeItem(itemName);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tconsole.warn('Item could not be removed from session storage.', err);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Safley removes item from session storage.\n\t\t *\n\t\t * @param {String} itemName the items name\n\t\t * @param {String} itemValue the items value\n\t\t *\n\t\t *  @private\n\t\t */\n\t\tclear() {\n\t\t\t//TODO: Only remove used items\n\t\t\tif (this.exists) {\n\t\t\t\ttry {\n\t\t\t\t\t\t//Clear session storage\n\t\t\t\t\twindow.sessionStorage.clear();\n\t\t\t\t} catch (err) {\n\t\t\t\t\tconsole.warn('Session storage could not be cleared.', err);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t};\n\n\tlet request = {\n\t\tget(endpoint, queryData) {\n\t\t\tvar req = requester.get(endpoint);\n\t\t\tif (queryData) {\n\t\t\t\treq.query(queryData);\n\t\t\t}\n\t\t\treq = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t},\n\t\tpost(endpoint, data) {\n\t\t\tvar req = requester.post(endpoint).send(data);\n\t\t\treq = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t},\n\t\tput(endpoint, data) {\n\t\t\tvar req = requester.put(endpoint).send(data);\n\t\t\treq = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t},\n\t\tdel(endpoint, data) {\n\t\t\tvar req = requester.put(endpoint).send(data);\n\t\t\treq = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t}\n\n\t};\n\n\tfunction handleResponse(req) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\treq.end((err, res) => {\n\t\t\t\tif (!err) {\n\t\t\t\t\t// console.log('Response:', res);\n\t\t\t\t\treturn resolve(res.body);\n\t\t\t\t} else {\n\t\t\t\t\tif (err.status == 401) {\n\t\t\t\t\t\tconsole.warn('Unauthorized. You must be signed into make this request.');\n\t\t\t\t\t}\n\t\t\t\t\treturn reject(err);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\tfunction addAuthHeader(req) {\n\t\tif (storage.getItem(config.tokenName)) {\n\t\t\treq = req.set('Authorization', 'Bearer ' + storage.getItem(config.tokenName));\n\t\t\tconsole.log('Set auth header');\n\t\t}\n\t\treturn req;\n\t}\n\n\tclass token {\n\t\tget string() {\n\t\t\treturn storage.getItem(config.tokenName);\n\t\t}\n\t\tget data() {\n\t\t\t//TODO: Decode token\n\t\t}\n\t\tstring(tokenStr) {\n\t\t\tconsole.log('Token was set', tokenStr);\n\t\t\treturn storage.setItem(config.tokenName, tokenStr);\n\t\t}\n\t\tsave(tokenStr) {\n\t\t\tthis.string = tokenStr;\n\t\t\tstorage.setItem(config.tokenName, tokenStr);\n\t\t}\n\t\tdelete() {\n\t\t\tstorage.removeItem(config.tokenName);\n\t\t}\n\t}\n\n\tlet user;\n\tlet endpoints;\n\n\tclass Matter {\n\t\t/* Constructor\n\t\t * @param {string} appName Name of application\n\t\t */\n\t\tconstructor(appName) {\n\t\t\tif (!appName) {\n\t\t\t\tthrow new Error('Application name is required to use Matter');\n\t\t\t} else {\n\t\t\t\tthis.name = appName;\n\t\t\t}\n\t\t}\n\t\t/* Endpoint getter\n\t\t *\n\t\t */\n\t\tget endpoint() {\n\t\t\tlet serverUrl;\n\t\t\tif (this.name == 'tessellate') {\n\t\t\t\tserverUrl = config.serverUrl;\n\t\t\t\t//Remove url if host is server\n\t\t\t\tif (window && _.has(window, 'location') && window.location.host == serverUrl) {\n\t\t\t\t\tconsole.warn('Host is Server, serverUrl simplified!');\n\t\t\t\t\tserverUrl = '';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tserverUrl = config.serverUrl + '/apps/' + this.name;\n\t\t\t}\n\t\t\treturn serverUrl;\n\t\t}\n\t\t/* Signup\n\t\t *\n\t\t */\n\t\tsignup(signupData) {\n\t\t\treturn request.post(this.endpoint + '/signup', signupData)\n\t\t\t.then(function(response) {\n\t\t\t  console.log(response);\n\t\t\t})\n\t\t\t['catch'](function(errRes) {\n\t\t\t  console.error('[signup()] Error signing up:', errRes);\n\t\t\t  return Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t/** Login\n\t\t *\n\t\t */\n\t\tlogin(loginData) {\n\t\t\tif (!loginData || !loginData.password || !loginData.username) {\n\t\t\t\tconsole.error('Username/Email and Password are required to login');\n\t\t\t  return Promise.reject({message: 'Username/Email and Password are required to login'});\n\t\t\t}\n\t\t\treturn request.put(this.endpoint + '/login', loginData)\n\t\t\t.then(function(response) {\n\t\t\t\t//TODO: Save token locally\n\t\t\t\tif (_.has(response, 'data') && _.has(response.data, 'status') && response.data.status == 409) {\n\t\t\t\t\tconsole.error('[Matter.login()] Account not found: ', response);\n\t\t\t\t\treturn Promise.reject(response.data);\n\t\t\t\t} else {\n\t\t\t\t\tif (_.has(response, 'token')) {\n\t\t\t\t\t\ttoken.string = response.token;\n\t\t\t\t\t}\n\t\t\t\t\tconsole.log('[Matter.login()] Successful login: ', response);\n\t\t\t\t\treturn response;\n\t\t\t\t}\n\t\t\t})['catch'](function(errRes) {\n\t\t\t\tif (errRes.status == 409) {\n\t\t\t\t\terrRes = errRes.response.text;\n\t\t\t\t}\n\t\t\t  return Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\t/** Logout\n\t\t */\n\t\tlogout() {\n\t\t\treturn request.put(this.endpoint + '/logout', {\n\t\t\t}).then(function(response) {\n\t\t\t  console.log('[Matter.logout()] Logout successful: ', response);\n\t\t\t  if (typeof window != 'undefined' && typeof window.localStorage.getItem(config.tokenName) != null) {\n\t\t\t\t\twindow.localStorage.setItem(config.tokenName, null);\n\t\t\t\t}\n\t\t\t  return response.body;\n\t\t\t})['catch'](function(errRes) {\n\t\t\t  console.error('[Matter.logout()] Error logging out: ', errRes);\n\t\t\t  return Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\n\t\tgetCurrentUser() {\n\t\t\t//TODO: Check Current user variable\n\t\t\treturn request.get(this.endpoint + '/user', {\n\t\t\t}).then(function(response) {\n\t\t\t\t//TODO: Save user information locally\n\t\t\t\tconsole.log('[getCurrentUser()] Current User:', response.data);\n\t\t\t\tuser = response.data;\n\t\t\t\treturn user;\n\t\t\t})['catch'](function(errRes) {\n\t\t\t\tconsole.error('[getCurrentUser()] Error getting current user: ', errRes);\n\t\t\t  return Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\n\t\tgetAuthToken() {\n\t\t\t//TODO: Load token from storage\n\t\t\tif (typeof window == 'undefined' || typeof window.localStorage.getItem(config.tokenName) == 'undefined') {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn window.localStorage.getItem(config.tokenName);\n\t\t}\n\n\t};\n\n\treturn Matter;\n\n}));"],"sourceRoot":"/source/"}