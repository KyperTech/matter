function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("underscore"),require("superagent")):"function"==typeof define&&define.amd?define(["underscore","superagent"],t):e.Matter=t(e._,e.superagent)}(this,function(e,t){"use strict";function n(t){var n="";return e.isObject(t)?(e.has(t,"func")&&(n+=e.has(t,"obj")?"["+t.obj+"."+t.func+"()] ":e.has(t,"file")?"["+t.file+" > "+t.func+"()] ":"["+t.func+"()] "),e.each(e.omit(e.keys(t),"obj","func"),function(o,r,s){n+=e.isString(t[o])?o+": "+t[o]+", ":o+": "+t[o]+", ",r!=s.length-1&&(n+="\n")})):e.isString(t)&&(n=t),n}function o(e){return new Promise(function(t,n){e.end(function(e,o){return e?(401==e.status&&a.warn("Unauthorized. You must be signed into make this request."),n(e)):t(o.body)})})}function r(e){return u.getItem(s.tokenName)&&(e=e.set("Authorization","Bearer "+u.getItem(s.tokenName)),a.info({message:"Set auth header",func:r,file:l})),e}e="default"in e?e["default"]:e,t="default"in t?t["default"]:t;var s={serverUrl:"http://tessellate.elasticbeanstalk.com",tokenName:"tessellate"},a={log:function(){var e=n(logData);"local"==s.envName?console.log(logData):console.log(e)},info:function(){var e=n(logData);"local"==s.envName?console.info(logData):console.info(e)},warn:function(){var e=n(logData);"local"==s.envName?console.warn(logData):console.warn(e)},debug:function(){var e=n(logData);"local"==s.envName?console.log(logData):console.log(e)},error:function(){n(logData);"local"==s.envName&&console.error(logData)}},i={},u=Object.defineProperties({item:function(e,t){i[e]=t,this.localExists&&window.sessionStorage.setItem(e,t)},setItem:function(e,t){},getItem:function(e){return i[e]?i[e]:this.localExists?window.sessionStorage.getItem(e):null},removeItem:function(e){if(i[e]&&(i[e]=null),this.localExists)try{window.sessionStorage.removeItem(e)}catch(t){a.error({description:"Error removing item from session storage",error:t,obj:"storage",func:"removeItem"})}},clear:function(){if(i={},this.localExists)try{window.sessionStorage.clear()}catch(e){a.warn("Session storage could not be cleared.",e)}}},{localExists:{get:function(){var e="test";if("undefined"==typeof window||"undefined"==typeof window.sessionStorage)return!1;try{return window.sessionStorage.setItem(e,"1"),window.sessionStorage.removeItem(e),!0}catch(t){return a.error({description:"Error saving to session storage",error:t,obj:"storage",func:"localExists"}),!1}},configurable:!0,enumerable:!0}}),c=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"string",value:function(e){return console.log("Token was set",e),u.setItem(s.tokenName,e)}},{key:"save",value:function(e){this.string=e,u.setItem(s.tokenName,e)}},{key:"delete",value:function(){u.removeItem(s.tokenName),console.log("Token was removed")}},{key:"string",get:function(){return u.getItem(s.tokenName)}},{key:"data",get:function(){}}]),e}(),l={get:function(e,n){var s=t.get(e);return n&&s.query(n),s=r(s),o(s)},post:function(e,n){var s=t.post(e).send(n);return s=r(s),o(s)},put:function(e,n){var s=t.put(e).send(n);return s=r(s),o(s)},del:function(e,n){var s=t.put(e).send(n);return s=r(s),o(s)}},f=void 0,g=function(){function t(e,n){if(_classCallCheck(this,t),!e)throw new Error("Application name is required to use Matter");this.name=e,n&&(this.options=n)}return _createClass(t,[{key:"signup",value:function(e){return l.post(this.endpoint+"/signup",e).then(function(e){console.log(e)})["catch"](function(e){return console.error("[signup()] Error signing up:",e),Promise.reject(e)})}},{key:"login",value:function(t){return t&&t.password&&t.username?l.put(this.endpoint+"/login",t).then(function(t){return e.has(t,"data")&&e.has(t.data,"status")&&409==t.data.status?(console.error("[Matter.login()] Account not found: ",t),Promise.reject(t.data)):(e.has(t,"token")&&(c.string=t.token),console.log("[Matter.login()] Successful login: ",t),t)})["catch"](function(e){return(409==e.status||400==e.status)&&(e=e.response.text),Promise.reject(e)}):(console.error("Username/Email and Password are required to login"),Promise.reject({message:"Username/Email and Password are required to login"}))}},{key:"logout",value:function(){return l.put(this.endpoint+"/logout").then(function(e){return console.log("[Matter.logout()] Logout successful: ",e),c["delete"](),e})["catch"](function(e){return console.error("[Matter.logout()] Error logging out: ",e),c["delete"](),Promise.reject(e)})}},{key:"getCurrentUser",value:function(){return l.get(this.endpoint+"/user",{}).then(function(e){return console.log("[getCurrentUser()] Current User:",e.data),f=e.data})["catch"](function(e){return console.error("[getCurrentUser()] Error getting current user: ",e),Promise.reject(e)})}},{key:"getAuthToken",value:function(){return c.string}},{key:"endpoint",get:function(){var t=s.serverUrl;return e.has(this,"options")&&this.options.localServer&&(t="http://localhost:4000"),"tessellate"==this.name?window&&e.has(window,"location")&&window.location.host==t&&(console.warn("Host is Server, serverUrl simplified!"),t=""):t=s.serverUrl+"/apps/"+this.name,t}}]),t}();return g});
//# sourceMappingURL=matter.min.js.map