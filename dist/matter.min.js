!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Matter=e():t.Matter=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var s=r(47),c=o(s),l=r(1),f=o(l),d=r(50),p=o(d),h=r(9),g=o(h),v=r(22),m=o(v),b=r(2),y=o(b),j=r(11),w=o(j),x=r(5),k=o(x),A=r(24),_=n(A),M=r(26),P=o(M),E=r(27),I=o(E),O=r(25),U=o(O),L=r(41),S=o(L),q=function(){function t(e,r){if(u(this,t),!e)throw k.default.error({description:"Application name required to use Matter.",func:"constructor",obj:"Matter"}),new Error("Application name is required to use Matter");this.name=e,r&&(this.options=r,this.options.logLevel&&(w.default.logLevel=this.options.logLevel)),this.config=w.default,k.default.debug({description:"Matter object built.",matter:this,func:"constructor",obj:"Matter"})}return a(t,[{key:"signup",value:function(t){if(k.default.debug({description:"Signup called.",signupData:t,func:"signup",obj:"Matter"}),!t||!(0,y.default)(t)&&!(0,m.default)(t))return k.default.error({description:"Signup information is required to signup.",func:"signup",obj:"Matter"}),Promise.reject({message:"Signup data is required to signup.",status:"NULL_DATA"});if((0,y.default)(t))return t.username||t.email?t.password?P.default.post(this.endpoint+"/signup",t).then(function(e){return k.default.info({description:"Signup successful.",signupData:t,res:e,func:"signup",obj:"Matter"}),(0,g.default)(e,"account")?e.account:(k.default.warn({description:"Account was not contained in signup res.",signupData:t,res:e,func:"signup",obj:"Matter"}),e)}).catch(function(e){return k.default.error({description:"Error requesting signup.",error:e,signupData:t,func:"signup",obj:"Matter"}),Promise.reject(e)}):(k.default.error({description:"Password is required to signup.",func:"signup",obj:"Matter"}),Promise.reject({message:"Password is required to signup.",status:"PASS_REQUIRED"})):(k.default.error({description:"Email or Username required to signup.",func:"signup",obj:"Matter"}),Promise.reject({message:"Email or Username required to signup.",status:"ID_REQUIRED"}));k.default.debug({description:"Third party signup called.",provider:t,func:"signup",obj:"Matter"});var e=new S.default({provider:t,app:this});return e.signup(t).then(function(e){return k.default.info({description:"Provider signup successful.",provider:t,res:e,func:"signup",obj:"Matter"}),e},function(e){return k.default.error({description:"Error with provider authentication.",provider:t,error:e,func:"signup",obj:"Matter"}),Promise.reject(e)})}},{key:"login",value:function(t){var e=this;if(!t||!(0,y.default)(t)&&!(0,m.default)(t))return k.default.error({description:"Username/Email and Password are required to login",func:"login",obj:"Matter"}),Promise.reject({message:"Login data is required to login.",status:"DATA_REQUIRED"});if((0,y.default)(t))return t.username||t.email?t.password&&""!==t.password?P.default.put(this.endpoint+"/login",t).then(function(t){if((0,g.default)(t,"data")&&(0,g.default)(t.data,"status")&&409==t.data.status)return k.default.error({description:"Account not found.",response:t,func:"login",obj:"Matter"}),Promise.reject(t.data);k.default.info({description:"Successful login.",response:t,func:"login",obj:"Matter"}),(0,g.default)(t,"token")&&(e.token.string=t.token);var r={};return(0,g.default)(t,"account")?r=t.account:e.token.data?(k.default.debug({description:"User data available from token.",tokenData:e.token.data,type:i(e.token.data),func:"login",obj:"Matter"}),e.token.data.un?(k.default.log({description:"Token is AuthRocket format.",func:"login",obj:"Matter"}),r={username:e.token.data.un,name:e.token.data.n||null,authrocketId:e.token.data.uid||null}):(k.default.debug({description:"Token is default format.",func:"login",obj:"Matter"}),r=e.token.data)):(k.default.error({description:"User data not available from response or token.",func:"login",obj:"Matter"}),r={token:e.token.string}),e.storage.setItem(w.default.tokenUserDataName,r),r}).catch(function(t){return k.default.error({description:"Error requesting login.",error:t,status:t.status,func:"login",obj:"Matter"}),(409==t.status||400==t.status)&&(t=t.response.text),Promise.reject(t)}):Promise.reject({message:"Password is required to login.",status:"PASS_REQUIRED"}):(k.default.error({description:"Email or Username required to login.",func:"login",obj:"Matter"}),Promise.reject({message:"Email or Username required to login.",status:"ID_REQUIRED"}));var r=new S.default({provider:t,app:this});return r.login().then(function(e){return k.default.info({description:"Provider login successful.",provider:t,res:e,func:"login",obj:"Matter"}),e})}},{key:"logout",value:function(){var t=this;return this.isLoggedIn?P.default.put(this.endpoint+"/logout").then(function(e){return k.default.info({description:"Logout successful.",response:e,func:"logout",obj:"Matter"}),t.currentUser=null,t.token.delete(),e}).catch(function(e){return k.default.error({description:"Error requesting log out: ",error:e,func:"logout",obj:"Matter"}),t.storage.removeItem(w.default.tokenUserDataName),t.token.delete(),Promise.reject(e)}):(k.default.warn({description:"No logged in account to log out.",func:"logout",obj:"Matter"}),Promise.reject({message:"No logged in account to log out.",status:"NULL_ACCOUNT"}))}},{key:"providerSignup",value:function(t){if(!t)return Promise.reject("Provider data is required to signup.");var e=t.provider,r=t.code;if(!e)return Promise.reject("Provider name is required to signup.");if(!r)return Promise.reject("Provider code is required to signup.");var n=new S.default({provider:e,app:this});return n.accountFromCode(r).then(function(e){return k.default.info({description:"Provider login successful.",providerData:t,res:e,func:"providerSignup",obj:"Matter"}),e},function(t){return k.default.error({description:"Provider signup error.",error:t,func:"providerSignup",obj:"Matter"}),Promise.reject(t)})}},{key:"getCurrentUser",value:function(){var t=this;return this.currentUser?(k.default.debug({description:"Current is already available. Returning user.",func:"currentUser",obj:"Matter"}),Promise.resolve(this.currentUser)):this.isLoggedIn?P.default.get(this.endpoint+"/user").then(function(e){return k.default.log({description:"Current User Request responded.",responseData:e,func:"currentUser",obj:"Matter"}),t.currentUser=e,e}).catch(function(t){return 401==t.status?(k.default.warn({description:"Called for current user without token.",error:t,func:"currentUser",obj:"Matter"}),I.default.delete(),Promise.resolve(null)):(k.default.error({description:"Error requesting current user.",error:t,func:"currentUser",obj:"Matter"}),Promise.reject(t))}):(k.default.debug({description:"Current user is null.",func:"currentUser",obj:"Matter"}),Promise.resolve(null))}},{key:"updateAccount",value:function(t){var e=this;return this.isLoggedIn?t?P.default.put(this.urls.update,t).then(function(t){return k.default.info({description:"Update profile request responded.",responseData:t,func:"updateAccount",obj:"Matter"}),e.currentUser=t,t}).catch(function(t){return k.default.error({description:"Error requesting current user.",error:t,func:"updateAccount",obj:"Matter"}),Promise.reject(t)}):(k.default.error({description:"Data is required to update profile.",func:"updateAccount",obj:"Matter"}),Promise.reject({message:"Data required to update account.",status:"NULL_DATA"})):(k.default.error({description:"No current user profile to update.",func:"updateAccount",obj:"Matter"}),Promise.reject({message:"Must be logged in to update account."}))}},{key:"uploadImage",value:function(t){var e=this;if(!this.isLoggedIn)return k.default.error({description:"Must be logged in to upload an image.",func:"uploadImage",obj:"Matter"}),Promise.reject({message:"Must be logged in to upload image."});if(!t)return k.default.error({description:"Data is required to update profile.",func:"uploadImage",obj:"Matter"}),Promise.reject({message:"Data required to update profile.",status:"NULL_DATA"});this.endpoint+"/user/"+this.token.data.username;return P.default.put(this.urls.upload,t).then(function(t){return k.default.info({description:"Upload image request responded.",responseData:t,func:"uploadImage",obj:"Matter"}),e.currentUser=t,t}).catch(function(t){return k.default.error({description:"Error requesting current user.",error:t,func:"uploadImage",obj:"Matter"}),Promise.reject(t)})}},{key:"uploadAccountImage",value:function(t){var e=this;return this.uploadImage(t).then(function(t){return e.updateAccount({image:{url:t}})})}},{key:"changePassword",value:function(t){return this.isLoggedIn?P.default.put(this.urls.changePassword,t).then(function(t){return k.default.log({description:"Update password request responded.",updatedAccount:t,func:"changePassword",obj:"Matter"}),t}).catch(function(t){return k.default.error({description:"Error requesting password change.",error:t,func:"changePassword",obj:"Matter"}),Promise.reject(t)}):(k.default.error({description:"No current user profile for which to change password.",func:"changePassword",obj:"Matter"}),Promise.reject({message:"Must be logged in to change password."}))}},{key:"recoverAccount",value:function(t){if(!t||!(0,m.default)(t)&&!(0,y.default)(t))return k.default.error({description:"Account data is required to recover an account.",func:"recoverAccount",obj:"Matter"}),Promise.reject({message:"Account data is required to recover an account."});var e={};return e=(0,m.default)(t)?-1!==t.indexOf("@")?{email:t}:{username:t}:t,k.default.debug({description:"Requesting recovery of account.",account:e,func:"recoverAccount",obj:"Matter"}),P.default.post(this.urls.recover,e).then(function(t){return k.default.info({description:"Recover account request responded.",res:t,func:"recoverAccount",obj:"Matter"}),t}).catch(function(t){return k.default.error({description:"Error requesting password recovery.",error:t,func:"recoverAccount",obj:"Matter"}),Promise.reject(t)})}},{key:"isInGroup",value:function(t){var e=this;if(!this.isLoggedIn)return k.default.error({description:"No logged in user to check for groups.",func:"isInGroup",obj:"Matter"}),!1;if(!t)return k.default.log({description:"Invalid group(s).",func:"isInGroup",obj:"Matter"}),!1;if(!(0,m.default)(t))return(0,f.default)(t)?(k.default.info({description:"Array of groups.",list:t,func:"isInGroup",obj:"Matter"}),this.isInGroups(t)):!1;var r=function(){var r=t,n=r.split(",");if(n.length>1)return k.default.info({description:"String list of groups.",list:n,func:"isInGroup",obj:"Matter"}),{v:e.isInGroups(n)};var o=e.token.data.groups||[];return k.default.log({description:"Checking if user is in group.",group:r,userGroups:e.token.data.groups,func:"isInGroup",obj:"Matter"}),{v:(0,p.default)(o,function(t){return r==t.name})}}();return"object"===("undefined"==typeof r?"undefined":i(r))?r.v:void 0}},{key:"isInGroups",value:function(t){var e=this;if(!this.isLoggedIn)return k.default.log({description:"No logged in user to check.",func:"isInGroups",obj:"Matter"}),!1;if(!t)return k.default.log({description:"Invalid group(s).",func:"isInGroup",obj:"Matter"}),!1;if((0,f.default)(t))return(0,c.default)(t.map(function(t){return(0,m.default)(t)?e.isInGroup(t):(0,g.default)(t,"name")?e.isInGroup(t.name):(k.default.error({description:"Invalid group object.",group:t,func:"isInGroups",obj:"Matter"}),!1)}),!0);if((0,m.default)(t)){var r=t.split(",");return r.length>1?this.isInGroups(r):this.isInGroup(r[0])}return k.default.error({description:"Invalid groups list.",func:"isInGroups",obj:"Matter"}),!1}},{key:"isLoggedIn",get:function(){return this.token.string?!0:!1}},{key:"endpoint",get:function(){(0,g.default)(this,"options")&&(this.options.localServer&&(w.default.envName="local",k.default.log({description:"LocalServer option was set to true. Now server url is local server.",url:w.default.serverUrl,func:"endpoint",obj:"Matter"})),this.options.env&&(w.default.envName=this.options.env,k.default.log({description:"Environment set based on provided environment.",config:w.default,func:"endpoint",obj:"Matter"})));var t=w.default.serverUrl+"/apps/"+this.name;return"tessellate"==this.name&&("undefined"!=typeof window&&(0,g.default)(window,"location")&&-1!==window.location.host.indexOf("tessellate")?(t="",k.default.info({description:"Host is Tessellate Server, serverUrl simplified!",url:t,func:"endpoint",obj:"Matter"})):(t=w.default.serverUrl,k.default.info({description:"App is tessellate, serverUrl set as main tessellate server.",url:t,func:"endpoint",obj:"Matter"}))),k.default.log({description:"Endpoint created.",url:t,func:"endpoint",obj:"Matter"}),t}},{key:"urls",get:function(){return this.token&&this.token.data&&this.token.data.username?{update:this.endpoint+"/account/"+this.token.data.username,upload:this.endpoint+"/account/"+this.token.data.username+"/upload",recover:this.endpoint+"/recover"}:{recover:this.endpoint+"/recover"}}},{key:"currentUser",set:function(t){k.default.debug({description:"Current User set.",user:t,func:"currentUser",obj:"Matter"}),this.storage.setItem(w.default.tokenUserDataName,t)},get:function(){return this.storage.getItem(w.default.tokenUserDataName)?this.storage.getItem(w.default.tokenUserDataName):null}},{key:"storage",get:function(){return U.default}},{key:"token",get:function(){return I.default}},{key:"utils",get:function(){return{logger:k.default,request:P.default,storage:U.default,dom:_}}}]),t}();e.default=q,t.exports=e.default},function(t,e,r){var n=r(14),o=r(6),i=r(3),u="[object Array]",a=Object.prototype,s=a.toString,c=n(Array,"isArray"),l=c||function(t){return i(t)&&o(t.length)&&s.call(t)==u};t.exports=l},function(t,e){function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}t.exports=r},function(t,e){function r(t){return!!t&&"object"==typeof t}t.exports=r},function(t,e,r){function n(t){return o(t)?t:Object(t)}var o=r(2);t.exports=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){return t&&console[t]?console[t].apply(console,e):console.log.apply(console,e)}function i(t){var e="",r={};(0,m.default)(t)?("error"!==y.default.logLevel&&(0,g.default)(t,"func")&&(e+=(0,g.default)(t,"obj")?"["+t.obj+"."+t.func+"()]\n ":(0,g.default)(t,"file")?"["+t.file+" > "+t.func+"()]\n ":"["+t.func+"()]\n "),(0,p.default)((0,f.default)((0,c.default)(t)),function(n){"func"!=n&&"obj"!=n&&("description"==n||"message"==n?e+=t[n]:(0,a.default)(t[n])?r[n]=t[n]:r[n]=t[n])}),e+="\n"):(0,a.default)(t)&&(e=t);var n=[e,r];return n}Object.defineProperty(e,"__esModule",{value:!0});var u=r(22),a=n(u),s=r(10),c=n(s),l=r(94),f=n(l),d=r(46),p=n(d),h=r(9),g=n(h),v=r(2),m=n(v),b=r(11),y=n(b),j={log:function(t){var e=i(t);"trace"===y.default.logLevel&&o("log",e)},debug:function(t){var e=i(t);("trace"===y.default.logLevel||"debug"===y.default.logLevel)&&o("debug",e)},info:function(t){if("trace"===y.default.logLevel||"debug"===y.default.logLevel||"info"===y.default.logLevel){var e=i(t);o("info",e)}},warn:function(t){var e=i(t);("trace"===y.default.logLevel||"debug"===y.default.logLevel||"info"===y.default.logLevel||"warn"===y.default.logLevel)&&o("warn",e)},error:function(t){var e=i(t);("trace"===y.default.logLevel||"debug"===y.default.logLevel||"info"===y.default.logLevel||"warn"===y.default.logLevel||"error"===y.default.logLevel||"fatal"===y.default.logLevel)&&o("error",e)}};e.default=j,t.exports=e.default},function(t,e){function r(t){return"number"==typeof t&&t>-1&&t%1==0&&n>=t}var n=9007199254740991;t.exports=r},function(t,e,r){function n(t){return null!=t&&i(o(t))}var o=r(37),i=r(6);t.exports=n},function(t,e,r){function n(t){return i(t)&&o(t)&&a.call(t,"callee")&&!s.call(t,"callee")}var o=r(7),i=r(3),u=Object.prototype,a=u.hasOwnProperty,s=u.propertyIsEnumerable;t.exports=n},function(t,e,r){function n(t,e){if(null==t)return!1;var r=h.call(t,e);if(!r&&!c(e)){if(e=d(e),t=1==e.length?t:o(t,i(e,0,-1)),null==t)return!1;e=f(e),r=h.call(t,e)}return r||l(t.length)&&s(e,t.length)&&(a(t)||u(t))}var o=r(18),i=r(36),u=r(8),a=r(1),s=r(15),c=r(20),l=r(6),f=r(28),d=r(21),p=Object.prototype,h=p.hasOwnProperty;t.exports=n},function(t,e,r){var n=r(14),o=r(7),i=r(2),u=r(88),a=n(Object,"keys"),s=a?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&o(t)?u(t):i(t)?a(t):[]}:u;t.exports=s},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var u=r(48),a=n(u),s=r(9),c=n(s),l=r(93),f=n(l),d={envs:{local:{serverUrl:"http://localhost:4000",logLevel:"trace"},dev:{serverUrl:"http://tessellate-stage.elasticbeanstalk.com",logLevel:"debug"},stage:{serverUrl:"http://tessellate-stage.elasticbeanstalk.com",logLevel:"info"},prod:{serverUrl:"http://tessellate.elasticbeanstalk.com",logLevel:"error"}},tokenName:"tessellate",tokenDataName:"tessellate-tokenData",tokenUserDataName:"tessellate-currentUser",externalAuth:{tessellate:{google:"582741153619-9b3vifnmv2a32v49l63got889tgmnrhs.apps.googleusercontent.com",redirectUrl:"http://localhost:3000/oauth"},devshare:{google:"54741256621-d511263ke51ni32g1jalb9or85ckf5gr.apps.googleusercontent.com",redirectUrl:"http://devshare.io/oauth"}}},p=null,h="prod",g=null,v=function(){function t(){return o(this,t),p||(p=this),(0,f.default)(p,d)}return i(t,[{key:"applySettings",value:function(t){(0,f.default)(p,t)}},{key:"serverUrl",get:function(){var t=d.envs[h].serverUrl;if("undefined"!=typeof window&&(0,c.default)(window,"location")&&(0,c.default)(window.location,"host")&&""!==window.location.host){var e=(0,a.default)(d.envs,function(t){return t.serverUrl===window.location.host});e&&(t="")}return t}},{key:"logLevel",set:function(t){g=t},get:function(){return g?g:d.envs[h].logLevel}},{key:"envName",set:function(t){h=t},get:function(){return h}},{key:"env",get:function(){return d.envs[h]?d.envs[h]:void 0}}]),t}(),m=new v;e.default=m,t.exports=e.default},function(t,e,r){var n=r(62),o=r(76),i=o(n);t.exports=i},function(t,e,r){function n(t,e,r){if("function"!=typeof t)return o;if(void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 3:return function(r,n,o){return t.call(e,r,n,o)};case 4:return function(r,n,o,i){return t.call(e,r,n,o,i)};case 5:return function(r,n,o,i,u){return t.call(e,r,n,o,i,u)}}return function(){return t.apply(e,arguments)}}var o=r(39);t.exports=n},function(t,e,r){function n(t,e){var r=null==t?void 0:t[e];return o(r)?r:void 0}var o=r(90);t.exports=n},function(t,e){function r(t,e){return t="number"==typeof t||n.test(t)?+t:-1,e=null==e?o:e,t>-1&&t%1==0&&e>t}var n=/^\d+$/,o=9007199254740991;t.exports=r},function(t,e,r){function n(t){if(null==t)return[];s(t)||(t=Object(t));var e=t.length;e=e&&a(e)&&(i(t)||o(t))&&e||0;for(var r=t.constructor,n=-1,c="function"==typeof r&&r.prototype===t,f=Array(e),d=e>0;++n<e;)f[n]=n+"";for(var p in t)d&&u(p,e)||"constructor"==p&&(c||!l.call(t,p))||f.push(p);return f}var o=r(8),i=r(1),u=r(15),a=r(6),s=r(2),c=Object.prototype,l=c.hasOwnProperty;t.exports=n},function(t,e,r){function n(t,e,r){var n=typeof t;return"function"==n?void 0===e?t:u(t,e,r):null==t?a:"object"==n?o(t):void 0===e?s(t):i(t,e)}var o=r(66),i=r(67),u=r(13),a=r(39),s=r(96);t.exports=n},function(t,e,r){function n(t,e,r){if(null!=t){void 0!==r&&r in o(t)&&(e=[r]);for(var n=0,i=e.length;null!=t&&i>n;)t=t[e[n++]];return n&&n==i?t:void 0}}var o=r(4);t.exports=n},function(t,e,r){function n(t,e,r){if(!u(r))return!1;var n=typeof e;if("number"==n?o(r)&&i(e,r.length):"string"==n&&e in r){var a=r[e];return t===t?t===a:a!==a}return!1}var o=r(7),i=r(15),u=r(2);t.exports=n},function(t,e,r){function n(t,e){var r=typeof t;if("string"==r&&a.test(t)||"number"==r)return!0;if(o(t))return!1;var n=!u.test(t);return n||null!=e&&t in i(e)}var o=r(1),i=r(4),u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=n},function(t,e,r){function n(t){if(i(t))return t;var e=[];return o(t).replace(u,function(t,r,n,o){e.push(n?o.replace(a,"$1"):r||t)}),e}var o=r(72),i=r(1),u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,a=/\\(\\)?/g;t.exports=n},function(t,e,r){function n(t){return"string"==typeof t||o(t)&&a.call(t)==i}var o=r(3),i="[object String]",u=Object.prototype,a=u.toString;t.exports=n},function(t,e,r){function n(t){return i(t)&&o(t.length)&&!!I[U.call(t)]}var o=r(6),i=r(3),u="[object Arguments]",a="[object Array]",s="[object Boolean]",c="[object Date]",l="[object Error]",f="[object Function]",d="[object Map]",p="[object Number]",h="[object Object]",g="[object RegExp]",v="[object Set]",m="[object String]",b="[object WeakMap]",y="[object ArrayBuffer]",j="[object Float32Array]",w="[object Float64Array]",x="[object Int8Array]",k="[object Int16Array]",A="[object Int32Array]",_="[object Uint8Array]",M="[object Uint8ClampedArray]",P="[object Uint16Array]",E="[object Uint32Array]",I={};I[j]=I[w]=I[x]=I[k]=I[A]=I[_]=I[M]=I[P]=I[E]=!0,I[u]=I[a]=I[y]=I[s]=I[c]=I[l]=I[f]=I[d]=I[p]=I[h]=I[g]=I[v]=I[m]=I[b]=!1;var O=Object.prototype,U=O.toString;t.exports=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t){if("undefined"==typeof document)throw f.default.error({description:"Document does not exsist to load assets into.",func:"loadCss",obj:"dom"}),new Error("Document object is required to load assets.");var e=document.createElement("link");return e.rel="stylesheet",e.type="text/css",e.href=t,document.getElementsByTagName("head")[0].insertBefore(e,document.getElementsByTagName("head")[0].firstChild),f.default.log({description:"CSS was loaded into document.",element:e,func:"loadCss",obj:"dom"}),e}function i(t){if("undefined"!=typeof window&&(0,c.default)(window,"document")){var e=window.document.createElement("script");return e.src=t,e.type="text/javascript",window.document.getElementsByTagName("head")[0].appendChild(e),f.default.log({description:"JS was loaded into document.",element:e,func:"loadJs",obj:"dom"}),e}throw f.default.error({description:"Document does not exsist to load assets into.",func:"loadJs",obj:"dom"}),new Error("Document object is required to load assets.")}function u(t){if("undefined"!=typeof window&&(0,c.default)(window,"document")){var e=window.document.createElement("script");return e.src=t,e.type="text/javascript",window.document.getElementsByTagName("head")[0].appendChild(e),f.default.log({description:"JS was loaded into document.",element:e,func:"asyncLoadJs",obj:"dom"}),new Promise(function(t){window.setTimeout(t,200)})}throw f.default.error({description:"Document does not exsist to load assets into.",func:"asyncLoadJs",obj:"dom"}),new Error("Document object is required to load assets.")}function a(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)"),r=e.exec(location.search);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))}Object.defineProperty(e,"__esModule",{value:!0}),e.loadCss=o,e.loadJs=i,e.asyncLoadJs=u,e.getQueryParam=a;var s=r(9),c=n(s),l=r(5),f=n(l)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(2),i=n(o),u=r(5),a=n(u),s={},c={get localExists(){var t="test";if("undefined"==typeof window||"undefined"==typeof window.sessionStorage)return!1;try{return window.sessionStorage.setItem(t,"1"),window.sessionStorage.removeItem(t),!0}catch(e){return a.default.error({description:"Error saving to session storage",error:e,obj:"storage",func:"localExists"}),!1}},item:function(t,e){return this.setItem(t,e)},setItem:function(t,e){s[t]=e,this.localExists&&((0,i.default)(e)&&(e=JSON.stringify(e)),window.sessionStorage.setItem(t,e))},getItem:function(t){if(s[t])return s[t];if(this.localExists){var e=window.sessionStorage.getItem(t);if(e){var r=!1,n=null;try{n=JSON.parse(e),r=!0}catch(o){r=!1}if(r)return n}return e}return null},removeItem:function(t){if(s[t]&&(s[t]=null),this.localExists)try{window.sessionStorage.removeItem(t)}catch(e){a.default.error({description:"Error removing item from session storage",error:e,obj:"storage",func:"removeItem"})}},clear:function(){if(s={},this.localExists)try{window.sessionStorage.clear()}catch(t){a.default.warn({description:"Session storage could not be cleared.",error:t})}}};e.default=c,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t){return new Promise(function(e,r){return"function"!=typeof t.end?(a.default.warn({description:"req.end is not a function",func:"handleResponse"}),r("req.end is not a function")):void t.end(function(t,n){if(t){var o=t.response.body.error?t.response.body.error:t.response.body;return a.default.warn({description:"Error in request.",error:o,errorRes:t,func:"handleResponse"}),401==t.status&&a.default.warn({description:"Unauthorized. You must be signed into make this request.",func:"handleResponse"}),r(o.message||o)}try{var i=JSON.parse(n.body);e(i)}catch(u){e(n.body)}})})}function i(t){return c.default.string&&(t=t.set("Authorization","Bearer "+c.default.string)),t}Object.defineProperty(e,"__esModule",{value:!0});var u=r(5),a=n(u),s=r(27),c=n(s),l=r(97),f=n(l),d={get:function(t,e){var r=f.default.get(t);return e&&r.query(e),r=i(r),o(r)},post:function(t,e){var r=f.default.post(t).send(e);return r=i(r),o(r)},put:function(t,e){var r=f.default.put(t,e);return r=i(r),o(r)},del:function(t,e){var r=f.default.put(t,e);return r=i(r),o(r)}};e.default=d,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t){var e=void 0;if(t&&""!=t)try{e=(0,b.default)(t)}catch(r){throw h.default.error({description:"Error decoding token.",data:e,error:r,func:"decodeToken",file:"token"}),new Error("Invalid token string.")}return e}Object.defineProperty(e,"__esModule",{value:!0});var i=r(9),u=n(i),a=r(2),s=n(a),c=r(22),l=n(c),f=r(11),d=n(f),p=r(5),h=n(p),g=r(25),v=n(g),m=r(43),b=n(m),y={get string(){return v.default.getItem(d.default.tokenName)},get data(){return v.default.getItem(d.default.tokenDataName)?v.default.getItem(d.default.tokenDataName):o(this.string)},set data(t){if((0,l.default)(t)){var e=t;t=o(e),h.default.info({description:"Token data was set as string. Decoding token.",token:e,tokenData:t,func:"data",obj:"token"})}else h.default.log({description:"Token data was set.",data:t,func:"data",obj:"token"}),v.default.setItem(d.default.tokenDataName,t)},set string(t){var e=void 0;if((0,l.default)(t))e=t;else{if(h.default.log({description:"Token data is not string.",token:t,func:"string",obj:"token"}),!(0,s.default)(t)||!(0,u.default)(t,"token"))return void h.default.error({description:"Invalid value set to token.",token:t,func:"string",obj:"token"});e=t.token}h.default.log({description:"Token was set.",token:t,tokenStr:e,func:"string",obj:"token"}),v.default.setItem(d.default.tokenName,e),this.data=(0,b.default)(e)},save:function(t){this.string=t},"delete":function(){v.default.removeItem(d.default.tokenName),v.default.removeItem(d.default.tokenDataName),h.default.log({description:"Token was removed.",func:"delete",obj:"token"})}};e.default=y,t.exports=e.default},function(t,e){function r(t){var e=t?t.length:0;return e?t[e-1]:void 0}t.exports=r},function(t,e){function r(t,e){if("function"!=typeof t)throw new TypeError(n);return e=o(void 0===e?t.length-1:+e||0,0),function(){for(var r=arguments,n=-1,i=o(r.length-e,0),u=Array(i);++n<i;)u[n]=r[e+n];switch(e){case 0:return t.call(this,u);case 1:return t.call(this,r[0],u);case 2:return t.call(this,r[0],r[1],u)}var a=Array(e+1);for(n=-1;++n<e;)a[n]=r[n];return a[e]=u,t.apply(this,a)}}var n="Expected a function",o=Math.max;t.exports=r},function(t,e){function r(t,e){for(var r=-1,n=t.length;++r<n&&e(t[r],r,t)!==!1;);return t}t.exports=r},function(t,e){function r(t,e){for(var r=-1,n=t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}t.exports=r},function(t,e,r){var n=r(77),o=n();t.exports=o},function(t,e,r){function n(t,e){return o(t,e,i)}var o=r(32),i=r(16);t.exports=n},function(t,e,r){function n(t,e,r,a,s,c){return t===e?!0:null==t||null==e||!i(t)&&!u(e)?t!==t&&e!==e:o(t,e,n,r,a,s,c)}var o=r(64),i=r(2),u=r(3);t.exports=n},function(t,e){function r(t){return function(e){return null==e?void 0:e[t]}}t.exports=r},function(t,e){function r(t,e,r){var n=-1,o=t.length;e=null==e?0:+e||0,0>e&&(e=-e>o?0:o+e),r=void 0===r||r>o?o:+r||0,0>r&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+e];return i}t.exports=r},function(t,e,r){var n=r(35),o=n("length");t.exports=o},function(t,e,r){function n(t){return t===t&&!o(t)}var o=r(2);t.exports=n},function(t,e){function r(t){return t}t.exports=r},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.logger=void 0;var o=r(5),i=n(o);e.logger=i.default},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var a=r(26),s=o(a),c=r(5),l=o(c),f=r(24),d=n(f),p=(r(40),r(11)),h=o(p),g=function(){function t(e){i(this,t);var r=e.app,n=e.redirectUrl,o=e.provider,u=h.default.externalAuth[r.name]?h.default.externalAuth[r.name]:null;this.app=r,this.provider=o,this.redirectUrl=u?u.redirectUrl:"/oauthcallback",n&&(this.redirectUrl=n)}return u(t,[{key:"login",value:function(){var t=this;return"google"===this.provider?this.googleAuth().then(function(e){if(!e)return Promise.reject("Error loading Google account.");var r=e.image,n=e.emails,o=n&&n[0]&&n[0].value?n[0].value:"",i={image:r,email:o,username:o.split("@")[0],provider:t.provider,providerAccount:e};return l.default.info({description:"Google account loaded, signing up.",account:i,googleAccount:e,func:"signup",obj:"providerAuth"}),new s.default.post(t.app.endpoint+"/signup",i).then(function(t){return l.default.info({description:"Signup with external account successful.",newAccount:t,func:"signup",obj:"providerAuth"}),t},function(t){return l.default.error({description:"Error loading google account.",account:i,googleAccount:e,error:t,func:"signup",obj:"providerAuth"}),Promise.reject(t)})},function(t){return l.default.error({description:"Error authenticating with Google.",error:t,func:"signup",obj:"providerAuth"}),Promise.reject("Error getting external account.")}):(l.default.error({description:"Invalid provider.",
func:"signup",obj:"providerAuth"}),Promise.reject("Invalid provider"))}},{key:"signup",value:function(){var t=this;return"google"===this.provider?this.googleAuth().then(function(e){if(!e)return Promise.reject("Error loading Google account.");var r=e.image,n=e.emails,o=n&&n[0]&&n[0].value?n[0].value:"",i={image:r,email:o,username:o.split("@")[0],provider:t.provider,providerAccount:e};return l.default.info({description:"Google account loaded, signing up.",account:i,googleAccount:e,func:"signup",obj:"providerAuth"}),new s.default.post(t.app.endpoint+"/signup",i).then(function(t){return l.default.info({description:"Signup with external account successful.",newAccount:t,func:"signup",obj:"providerAuth"}),t},function(t){return l.default.error({description:"Error loading google account.",account:i,googleAccount:e,error:t,func:"signup",obj:"providerAuth"}),Promise.reject(t)})},function(t){return l.default.error({description:"Error authenticating with Google.",error:t,func:"signup",obj:"providerAuth"}),Promise.reject("Error getting external account.")}):(l.default.error({description:"Invalid provider.",func:"signup",obj:"providerAuth"}),Promise.reject("Invalid provider"))}},{key:"googleAuth",value:function(){var t=this,e=this.app&&this.app.name&&h.default.externalAuth[this.app.name]?h.default.externalAuth[this.app.name].google:null;return e?"undefined"!=typeof window&&"undefined"==typeof window.gapi?this.addGoogleLib().then(function(){return t.googleAuth()}):new Promise(function(t,r){window.gapi.auth.authorize({client_id:e,scope:"email profile"},function(e){return!e||e.error||e.message?(l.default.error({description:"Error authorizing with google",func:"googleSignup",obj:"providerAuth"}),r(e.error||e.message)):(l.default.log({description:"Auth with google successful.",auth:e,func:"googleSignup",obj:"providerAuth"}),void window.gapi.client.load("plus","v1",function(){var e=gapi.client.plus.people.get({userId:"me"});e.execute(function(e){l.default.log({description:"Account loaded from google.",account:e,func:"googleSignup",obj:"providerAuth"}),t(e)})}))})}):(l.default.error({description:"ClientId is required to authenticate with Google.",func:"googleSignup",obj:"providerAuth"}),Promise.reject("Client id is required to authenticate with Google."))}},{key:"addGoogleLib",value:function(){var t="https://apis.google.com/js/client.js?onload=OnLoadCallback";return new Promise(function(e){d.asyncLoadJs(t),"undefined"!=typeof window&&(window.OnLoadCallback=function(){l.default.log({description:"Google library loaded",func:"googleSignup",obj:"providerAuth"}),e()})})}}]),t}();e.default=g,t.exports=e.default},function(t,e,r){var n=r(45);t.exports=function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}var r=n.atob(e);try{return decodeURIComponent(escape(r))}catch(o){return r}}},function(t,e,r){"use strict";var n=r(42),o=r(44);t.exports=function(t){if(!t)throw new Error("Invalid token specified");return o(n(t.split(".")[1]))}},function(module,exports){module.exports=function(str){var parsed;return parsed="object"==typeof JSON?JSON.parse(str):eval("("+str+")")}},function(t,e,r){!function(){var t=e,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=function(){try{document.createElement("$")}catch(t){return t}}();t.btoa||(t.btoa=function(t){for(var e,o,i=0,u=r,a="";t.charAt(0|i)||(u="=",i%1);a+=u.charAt(63&e>>8-i%1*8)){if(o=t.charCodeAt(i+=.75),o>255)throw n;e=e<<8|o}return a}),t.atob||(t.atob=function(t){if(t=t.replace(/=+$/,""),t.length%4==1)throw n;for(var e,o,i=0,u=0,a="";o=t.charAt(u++);~o&&(e=i%4?64*e+o:o,i++%4)?a+=String.fromCharCode(255&e>>(-2*i&6)):0)o=r.indexOf(o);return a})}()},function(t,e,r){t.exports=r(49)},function(t,e,r){function n(t,e,r){var n=a(t)?o:u;return r&&s(t,e,r)&&(e=void 0),("function"!=typeof e||void 0!==r)&&(e=i(e,r,3)),n(t,e)}var o=r(53),i=r(17),u=r(58),a=r(1),s=r(19);t.exports=n},function(t,e,r){var n=r(12),o=r(79),i=o(n);t.exports=i},function(t,e,r){var n=r(30),o=r(12),i=r(80),u=i(n,o);t.exports=u},function(t,e,r){function n(t,e,r){var n=a(t)?o:u;return r&&s(t,e,r)&&(e=void 0),("function"!=typeof e||void 0!==r)&&(e=i(e,r,3)),n(t,e)}var o=r(31),i=r(17),u=r(71),a=r(1),s=r(19);t.exports=n},function(t,e,r){(function(e){function n(t){var e=t?t.length:0;for(this.data={hash:a(null),set:new u};e--;)this.push(t[e])}var o=r(74),i=r(14),u=i(e,"Set"),a=i(Object,"create");n.prototype.push=o,t.exports=n}).call(e,function(){return this}())},function(t,e){function r(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}t.exports=r},function(t,e){function r(t,e){for(var r=-1,n=t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}t.exports=r},function(t,e){function r(t,e){for(var r=-1,n=t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}t.exports=r},function(t,e){function r(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}t.exports=r},function(t,e){function r(t,e,r){r||(r={});for(var n=-1,o=e.length;++n<o;){var i=e[n];r[i]=t[i]}return r}t.exports=r},function(t,e,r){function n(t,e){var r=t?t.length:0,n=[];if(!r)return n;var s=-1,c=o,l=!0,f=l&&e.length>=a?u(e):null,d=e.length;f&&(c=i,l=!1,e=f);t:for(;++s<r;){var p=t[s];if(l&&p===p){for(var h=d;h--;)if(e[h]===p)continue t;n.push(p)}else c(e,p,0)<0&&n.push(p)}return n}var o=r(63),i=r(73),u=r(78),a=200;t.exports=n},function(t,e,r){function n(t,e){var r=!0;return o(t,function(t,n,o){return r=!!e(t,n,o)}),r}var o=r(12);t.exports=n},function(t,e){function r(t,e,r,n){var o;return r(t,function(t,r,i){return e(t,r,i)?(o=n?r:t,!1):void 0}),o}t.exports=r},function(t,e){function r(t,e,r){for(var n=t.length,o=r?n:-1;r?o--:++o<n;)if(e(t[o],o,t))return o;return-1}t.exports=r},function(t,e,r){function n(t,e,r,c){c||(c=[]);for(var l=-1,f=t.length;++l<f;){var d=t[l];s(d)&&a(d)&&(r||u(d)||i(d))?e?n(d,e,r,c):o(c,d):r||(c[c.length]=d)}return c}var o=r(55),i=r(8),u=r(1),a=r(7),s=r(3);t.exports=n},function(t,e,r){function n(t,e){return o(t,e,i)}var o=r(32),i=r(10);t.exports=n},function(t,e,r){function n(t,e,r){if(e!==e)return o(t,r);for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var o=r(85);t.exports=n},function(t,e,r){function n(t,e,r,n,d,g,v){var m=a(t),b=a(e),y=l,j=l;m||(y=h.call(t),y==c?y=f:y!=f&&(m=s(t))),b||(j=h.call(e),j==c?j=f:j!=f&&(b=s(e)));var w=y==f,x=j==f,k=y==j;if(k&&!m&&!w)return i(t,e,y);if(!d){var A=w&&p.call(t,"__wrapped__"),_=x&&p.call(e,"__wrapped__");if(A||_)return r(A?t.value():t,_?e.value():e,n,d,g,v)}if(!k)return!1;g||(g=[]),v||(v=[]);for(var M=g.length;M--;)if(g[M]==t)return v[M]==e;g.push(t),v.push(e);var P=(m?o:u)(t,e,r,n,d,g,v);return g.pop(),v.pop(),P}var o=r(81),i=r(82),u=r(83),a=r(1),s=r(23),c="[object Arguments]",l="[object Array]",f="[object Object]",d=Object.prototype,p=d.hasOwnProperty,h=d.toString;t.exports=n},function(t,e,r){function n(t,e,r){var n=e.length,u=n,a=!r;if(null==t)return!u;for(t=i(t);n--;){var s=e[n];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++n<u;){s=e[n];var c=s[0],l=t[c],f=s[1];if(a&&s[2]){if(void 0===l&&!(c in t))return!1}else{var d=r?r(l,f,c):void 0;if(!(void 0===d?o(f,l,r,!0):d))return!1}}return!0}var o=r(34),i=r(4);t.exports=n},function(t,e,r){function n(t){var e=i(t);if(1==e.length&&e[0][2]){var r=e[0][0],n=e[0][1];return function(t){return null==t?!1:t[r]===n&&(void 0!==n||r in u(t))}}return function(t){return o(t,e)}}var o=r(65),i=r(84),u=r(4);t.exports=n},function(t,e,r){function n(t,e){var r=a(t),n=s(t)&&c(e),p=t+"";return t=d(t),function(a){if(null==a)return!1;var s=p;if(a=f(a),(r||!n)&&!(s in a)){if(a=1==t.length?a:o(a,u(t,0,-1)),null==a)return!1;s=l(t),a=f(a)}return a[s]===e?void 0!==e||s in a:i(e,a[s],void 0,!0)}}var o=r(18),i=r(34),u=r(36),a=r(1),s=r(20),c=r(38),l=r(28),f=r(4),d=r(21);t.exports=n},function(t,e,r){function n(t,e,r,d,p){if(!s(t))return t;var h=a(e)&&(u(e)||l(e)),g=h?void 0:f(e);return o(g||e,function(o,u){if(g&&(u=o,o=e[u]),c(o))d||(d=[]),p||(p=[]),i(t,e,u,n,r,d,p);else{var a=t[u],s=r?r(a,o,u,t,e):void 0,l=void 0===s;l&&(s=o),void 0===s&&(!h||u in t)||!l&&(s===s?s===a:a!==a)||(t[u]=s)}}),t}var o=r(30),i=r(69),u=r(1),a=r(7),s=r(2),c=r(3),l=r(23),f=r(10);t.exports=n},function(t,e,r){function n(t,e,r,n,f,d,p){for(var h=d.length,g=e[r];h--;)if(d[h]==g)return void(t[r]=p[h]);var v=t[r],m=f?f(v,g,r,t,e):void 0,b=void 0===m;b&&(m=g,a(g)&&(u(g)||c(g))?m=u(v)?v:a(v)?o(v):[]:s(g)||i(g)?m=i(v)?l(v):s(v)?v:{}:b=!1),d.push(g),p.push(m),b?t[r]=n(m,g,f,d,p):(m===m?m!==v:v===v)&&(t[r]=m)}var o=r(52),i=r(8),u=r(1),a=r(7),s=r(91),c=r(23),l=r(92);t.exports=n},function(t,e,r){function n(t){var e=t+"";return t=i(t),function(r){return o(r,t,e)}}var o=r(18),i=r(21);t.exports=n},function(t,e,r){function n(t,e){var r;return o(t,function(t,n,o){return r=e(t,n,o),!r}),!!r}var o=r(12);t.exports=n},function(t,e){function r(t){return null==t?"":t+""}t.exports=r},function(t,e,r){function n(t,e){var r=t.data,n="string"==typeof e||o(e)?r.set.has(e):r.hash[e];return n?0:-1}var o=r(2);t.exports=n},function(t,e,r){function n(t){var e=this.data;"string"==typeof t||o(t)?e.set.add(t):e.hash[t]=!0}var o=r(2);t.exports=n},function(t,e,r){function n(t){return u(function(e,r){var n=-1,u=null==e?0:r.length,a=u>2?r[u-2]:void 0,s=u>2?r[2]:void 0,c=u>1?r[u-1]:void 0;for("function"==typeof a?(a=o(a,c,5),u-=2):(a="function"==typeof c?c:void 0,u-=a?1:0),s&&i(r[0],r[1],s)&&(a=3>u?void 0:a,u=1);++n<u;){var l=r[n];l&&t(e,l,a)}return e})}var o=r(13),i=r(19),u=r(29);t.exports=n},function(t,e,r){function n(t,e){return function(r,n){var a=r?o(r):0;if(!i(a))return t(r,n);for(var s=e?a:-1,c=u(r);(e?s--:++s<a)&&n(c[s],s,c)!==!1;);return r}}var o=r(37),i=r(6),u=r(4);t.exports=n},function(t,e,r){function n(t){return function(e,r,n){for(var i=o(e),u=n(e),a=u.length,s=t?a:-1;t?s--:++s<a;){var c=u[s];if(r(i[c],c,i)===!1)break}return e}}var o=r(4);t.exports=n},function(t,e,r){(function(e){function n(t){return a&&u?new o(t):null}var o=r(51),i=r(14),u=i(e,"Set"),a=i(Object,"create");t.exports=n}).call(e,function(){return this}())},function(t,e,r){function n(t,e){return function(r,n,s){if(n=o(n,s,3),a(r)){var c=u(r,n,e);return c>-1?r[c]:void 0}return i(r,n,t)}}var o=r(17),i=r(59),u=r(60),a=r(1);t.exports=n},function(t,e,r){function n(t,e){return function(r,n,u){return"function"==typeof n&&void 0===u&&i(r)?t(r,n):e(r,o(n,u,3))}}var o=r(13),i=r(1);t.exports=n},function(t,e,r){function n(t,e,r,n,i,u,a){var s=-1,c=t.length,l=e.length;if(c!=l&&!(i&&l>c))return!1;for(;++s<c;){var f=t[s],d=e[s],p=n?n(i?d:f,i?f:d,s):void 0;if(void 0!==p){if(p)continue;return!1}if(i){if(!o(e,function(t){return f===t||r(f,t,n,i,u,a)}))return!1}else if(f!==d&&!r(f,d,n,i,u,a))return!1}return!0}var o=r(31);t.exports=n},function(t,e){function r(t,e,r){switch(r){case n:case o:return+t==+e;case i:return t.name==e.name&&t.message==e.message;case u:return t!=+t?e!=+e:t==+e;case a:case s:return t==e+""}return!1}var n="[object Boolean]",o="[object Date]",i="[object Error]",u="[object Number]",a="[object RegExp]",s="[object String]";t.exports=r},function(t,e,r){function n(t,e,r,n,i,a,s){var c=o(t),l=c.length,f=o(e),d=f.length;if(l!=d&&!i)return!1;for(var p=l;p--;){var h=c[p];if(!(i?h in e:u.call(e,h)))return!1}for(var g=i;++p<l;){h=c[p];var v=t[h],m=e[h],b=n?n(i?m:v,i?v:m,h):void 0;if(!(void 0===b?r(v,m,n,i,a,s):b))return!1;g||(g="constructor"==h)}if(!g){var y=t.constructor,j=e.constructor;if(y!=j&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof j&&j instanceof j))return!1}return!0}var o=r(10),i=Object.prototype,u=i.hasOwnProperty;t.exports=n},function(t,e,r){function n(t){for(var e=i(t),r=e.length;r--;)e[r][2]=o(e[r][1]);return e}var o=r(38),i=r(95);t.exports=n},function(t,e){function r(t,e,r){for(var n=t.length,o=e+(r?0:-1);r?o--:++o<n;){var i=t[o];if(i!==i)return o}return-1}t.exports=r},function(t,e,r){function n(t,e){t=o(t);for(var r=-1,n=e.length,i={};++r<n;){var u=e[r];u in t&&(i[u]=t[u])}return i}var o=r(4);t.exports=n},function(t,e,r){function n(t,e){var r={};return o(t,function(t,n,o){e(t,n,o)&&(r[n]=t)}),r}var o=r(33);t.exports=n},function(t,e,r){function n(t){for(var e=s(t),r=e.length,n=r&&t.length,c=!!n&&a(n)&&(i(t)||o(t)),f=-1,d=[];++f<r;){var p=e[f];(c&&u(p,n)||l.call(t,p))&&d.push(p)}return d}var o=r(8),i=r(1),u=r(15),a=r(6),s=r(16),c=Object.prototype,l=c.hasOwnProperty;t.exports=n},function(t,e,r){function n(t){return o(t)&&a.call(t)==i}var o=r(2),i="[object Function]",u=Object.prototype,a=u.toString;t.exports=n},function(t,e,r){function n(t){return null==t?!1:o(t)?l.test(s.call(t)):i(t)&&u.test(t)}var o=r(89),i=r(3),u=/^\[object .+?Constructor\]$/,a=Object.prototype,s=Function.prototype.toString,c=a.hasOwnProperty,l=RegExp("^"+s.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},function(t,e,r){function n(t){var e;if(!u(t)||l.call(t)!=a||i(t)||!c.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var r;return o(t,function(t,e){r=e}),void 0===r||c.call(t,r)}var o=r(33),i=r(8),u=r(3),a="[object Object]",s=Object.prototype,c=s.hasOwnProperty,l=s.toString;t.exports=n},function(t,e,r){function n(t){return o(t,i(t))}var o=r(56),i=r(16);t.exports=n},function(t,e,r){var n=r(68),o=r(75),i=o(n);t.exports=i},function(t,e,r){var n=r(54),o=r(57),i=r(61),u=r(13),a=r(16),s=r(86),c=r(87),l=r(29),f=l(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=n(i(e),String);return s(t,o(a(t),e))}var r=u(e[0],e[1],3);return c(t,function(t,e,n){return!r(t,e,n)})});t.exports=f},function(t,e,r){function n(t){t=i(t);for(var e=-1,r=o(t),n=r.length,u=Array(n);++e<n;){var a=r[e];u[e]=[a,t[a]]}return u}var o=r(10),i=r(4);t.exports=n},function(t,e,r){function n(t){return u(t)?o(t):i(t)}var o=r(35),i=r(70),u=r(20);t.exports=n},function(t,e,r){function n(){}function o(t){var e={}.toString.call(t);switch(e){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function i(t){return t===Object(t)}function u(t){if(!i(t))return t;var e=[];for(var r in t)null!=t[r]&&a(e,r,t[r]);return e.join("&")}function a(t,e,r){return Array.isArray(r)?r.forEach(function(r){a(t,e,r)}):void t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}function s(t){for(var e,r,n={},o=t.split("&"),i=0,u=o.length;u>i;++i)r=o[i],e=r.split("="),n[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return n}function c(t){var e,r,n,o,i=t.split(/\r?\n/),u={};i.pop();for(var a=0,s=i.length;s>a;++a)r=i[a],e=r.indexOf(":"),n=r.slice(0,e).toLowerCase(),o=j(r.slice(e+1)),u[n]=o;return u}function l(t){return/[\/+]json\b/.test(t)}function f(t){return t.split(/ *; */).shift()}function d(t){return y(t.split(/ *; */),function(t,e){var r=e.split(/ *= */),n=r.shift(),o=r.shift();return n&&o&&(t[n]=o),t},{})}function p(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=c(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function h(t,e){var r=this;b.call(this),this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t=null,e=null;try{e=new p(r)}catch(n){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=n,t.rawResponse=r.xhr&&r.xhr.responseText?r.xhr.responseText:null,r.callback(t)}if(r.emit("response",e),t)return r.callback(t,e);if(e.status>=200&&e.status<300)return r.callback(t,e);var o=new Error(e.statusText||"Unsuccessful HTTP response");o.original=t,o.response=e,o.status=e.status,r.callback(o,e)})}function g(t,e){return"function"==typeof e?new h("GET",t).end(e):1==arguments.length?new h("GET",t):new h(t,e)}function v(t,e){var r=g("DELETE",t);return e&&r.end(e),r}var m,b=r(98),y=r(99);m="undefined"!=typeof window?window:"undefined"!=typeof self?self:this,g.getXHR=function(){if(!(!m.XMLHttpRequest||m.location&&"file:"==m.location.protocol&&m.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1};var j="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};g.serializeObject=u,g.parseString=s,g.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},g.serialize={"application/x-www-form-urlencoded":u,"application/json":JSON.stringify},g.parse={"application/x-www-form-urlencoded":s,"application/json":JSON.parse},p.prototype.get=function(t){return this.header[t.toLowerCase()]},p.prototype.setHeaderProperties=function(t){var e=this.header["content-type"]||"";this.type=f(e);var r=d(e);for(var n in r)this[n]=r[n]},p.prototype.parseBody=function(t){var e=g.parse[this.type];return e&&t&&(t.length||t instanceof Object)?e(t):null},p.prototype.setStatusProperties=function(t){1223===t&&(t=204);var e=t/100|0;this.status=this.statusCode=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=4==e||5==e?this.toError():!1,this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},p.prototype.toError=function(){var t=this.req,e=t.method,r=t.url,n="cannot "+e+" "+r+" ("+this.status+")",o=new Error(n);return o.status=this.status,o.method=e,o.url=r,o},g.Response=p,b(h.prototype),h.prototype.use=function(t){return t(this),this},h.prototype.timeout=function(t){return this._timeout=t,this},h.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},h.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},h.prototype.set=function(t,e){if(i(t)){for(var r in t)this.set(r,t[r]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},h.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},h.prototype.getHeader=function(t){return this._header[t.toLowerCase()]},h.prototype.type=function(t){return this.set("Content-Type",g.types[t]||t),this},h.prototype.parse=function(t){return this._parser=t,this},h.prototype.accept=function(t){return this.set("Accept",g.types[t]||t),this},h.prototype.auth=function(t,e){var r=btoa(t+":"+e);return this.set("Authorization","Basic "+r),this},h.prototype.query=function(t){return"string"!=typeof t&&(t=u(t)),t&&this._query.push(t),this},h.prototype.field=function(t,e){return this._formData||(this._formData=new m.FormData),this._formData.append(t,e),this},h.prototype.attach=function(t,e,r){return this._formData||(this._formData=new m.FormData),this._formData.append(t,e,r),this},h.prototype.send=function(t){var e=i(t),r=this.getHeader("Content-Type");if(e&&i(this._data))for(var n in t)this._data[n]=t[n];else"string"==typeof t?(r||this.type("form"),r=this.getHeader("Content-Type"),"application/x-www-form-urlencoded"==r?this._data=this._data?this._data+"&"+t:t:this._data=(this._data||"")+t):this._data=t;return!e||o(t)?this:(r||this.type("json"),this)},h.prototype.callback=function(t,e){var r=this._callback;this.clearTimeout(),r(t,e)},h.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},h.prototype.timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},h.prototype.withCredentials=function(){return this._withCredentials=!0,this},h.prototype.end=function(t){var e=this,r=this.xhr=g.getXHR(),i=this._query.join("&"),u=this._timeout,a=this._formData||this._data;this._callback=t||n,r.onreadystatechange=function(){if(4==r.readyState){var t;try{t=r.status}catch(n){t=0}if(0==t){if(e.timedout)return e.timeoutError();if(e.aborted)return;return e.crossDomainError()}e.emit("end")}};var s=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.emit("progress",t)};this.hasListeners("progress")&&(r.onprogress=s);try{r.upload&&this.hasListeners("progress")&&(r.upload.onprogress=s)}catch(c){}if(u&&!this._timer&&(this._timer=setTimeout(function(){e.timedout=!0,e.abort()},u)),i&&(i=g.serializeObject(i),this.url+=~this.url.indexOf("?")?"&"+i:"?"+i),r.open(this.method,this.url,!0),this._withCredentials&&(r.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof a&&!o(a)){var f=this.getHeader("Content-Type"),d=this._parser||g.serialize[f?f.split(";")[0]:""];!d&&l(f)&&(d=g.serialize["application/json"]),d&&(a=d(a))}for(var p in this.header)null!=this.header[p]&&r.setRequestHeader(p,this.header[p]);return this.emit("request",this),r.send("undefined"!=typeof a?a:null),this},h.prototype.then=function(t,e){return this.end(function(r,n){r?e(r):t(n)})},g.Request=h,g.get=function(t,e,r){var n=g("GET",t);return"function"==typeof e&&(r=e,e=null),e&&n.query(e),r&&n.end(r),n},g.head=function(t,e,r){var n=g("HEAD",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},g.del=v,g.delete=v,g.patch=function(t,e,r){var n=g("PATCH",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},g.post=function(t,e,r){var n=g("POST",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},g.put=function(t,e,r){var n=g("PUT",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},t.exports=g},function(t,e){function r(t){return t?n(t):void 0}function n(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},r.prototype.once=function(t,e){function r(){n.off(t,r),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=e,this.on(t,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[t];if(!r)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===e||n.fn===e){r.splice(o,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks[t];if(r){r=r.slice(0);for(var n=0,o=r.length;o>n;++n)r[n].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e){t.exports=function(t,e,r){for(var n=0,o=t.length,i=3==arguments.length?r:t[n++];o>n;)i=e.call(null,i,t[n],++n,t);return i}}])});