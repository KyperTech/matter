function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("superagent"),require("underscore")):"function"==typeof define&&define.amd?define(["superagent","underscore"],t):e.Matter=t(e.superagent,e._)}(this,function(e,t){"use strict";function n(e){return new Promise(function(t,n){e.end(function(e,r){return e?(401==e.status&&console.warn("Unauthorized. You must be signed into make this request."),n(e)):t(r.body)})})}function r(e){return s.getItem(o.tokenName)&&(e=e.set("Authorization","Bearer "+s.getItem(o.tokenName)),console.log("Set auth header")),e}e="default"in e?e["default"]:e,t="default"in t?t["default"]:t;var o={serverUrl:"http://tessellate.elasticbeanstalk.com",tokenName:"matter"},s=Object.defineProperties({setItem:function(e,t){this.exists&&window.sessionStorage.setItem(e,t)},getItem:function(e){return this.exists?window.sessionStorage.getItem(e):null},removeItem:function(e){if(this.exists)try{window.sessionStorage.removeItem(e)}catch(t){console.warn("Item could not be removed from session storage.",t)}},clear:function(){if(this.exists)try{window.sessionStorage.clear()}catch(e){console.warn("Session storage could not be cleared.",e)}}},{exists:{get:function(){var e="test";if("undefined"==typeof window)return!1;try{return window.sessionStorage.setItem(e,"1"),window.sessionStorage.removeItem(e),!0}catch(t){return console.warn("Session storage does not exist.",t),!1}},configurable:!0,enumerable:!0}}),i=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"string",value:function(e){return console.log("Token was set",e),s.setItem(o.tokenName,e)}},{key:"save",value:function(e){this.string=e,s.setItem(o.tokenName,e)}},{key:"delete",value:function(){s.removeItem(o.tokenName),console.log("Token was removed")}},{key:"string",get:function(){return s.getItem(o.tokenName)}},{key:"data",get:function(){}}]),e}(),u={get:function(t,o){var s=e.get(t);return o&&s.query(o),s=r(s),n(s)},post:function(t,o){var s=e.post(t).send(o);return s=r(s),n(s)},put:function(t,o){var s=e.put(t).send(o);return s=r(s),n(s)},del:function(t,o){var s=e.put(t).send(o);return s=r(s),n(s)}},a=void 0,c=function(){function e(t,n){if(_classCallCheck(this,e),!t)throw new Error("Application name is required to use Matter");this.name=t,n&&(this.options=n)}return _createClass(e,[{key:"signup",value:function(e){return u.post(this.endpoint+"/signup",e).then(function(e){console.log(e)})["catch"](function(e){return console.error("[signup()] Error signing up:",e),Promise.reject(e)})}},{key:"login",value:function(e){return e&&e.password&&e.username?u.put(this.endpoint+"/login",e).then(function(e){return t.has(e,"data")&&t.has(e.data,"status")&&409==e.data.status?(console.error("[Matter.login()] Account not found: ",e),Promise.reject(e.data)):(t.has(e,"token")&&(i.string=e.token),console.log("[Matter.login()] Successful login: ",e),e)})["catch"](function(e){return(409==e.status||400==e.status)&&(e=e.response.text),Promise.reject(e)}):(console.error("Username/Email and Password are required to login"),Promise.reject({message:"Username/Email and Password are required to login"}))}},{key:"logout",value:function(){return u.put(this.endpoint+"/logout").then(function(e){return console.log("[Matter.logout()] Logout successful: ",e),i["delete"](),e})["catch"](function(e){return console.error("[Matter.logout()] Error logging out: ",e),i["delete"](),Promise.reject(e)})}},{key:"getCurrentUser",value:function(){return u.get(this.endpoint+"/user",{}).then(function(e){return console.log("[getCurrentUser()] Current User:",e.data),a=e.data})["catch"](function(e){return console.error("[getCurrentUser()] Error getting current user: ",e),Promise.reject(e)})}},{key:"getAuthToken",value:function(){return i.string}},{key:"endpoint",get:function(){var e=o.serverUrl;return t.has(this,"options")&&this.options.localServer&&(e="http://localhost:4000"),"tessellate"==this.name?window&&t.has(window,"location")&&window.location.host==e&&(console.warn("Host is Server, serverUrl simplified!"),e=""):e=o.serverUrl+"/apps/"+this.name,e}}]),e}();return c});
//# sourceMappingURL=matter.min.js.map