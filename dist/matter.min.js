!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Matter=e():t.Matter=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(3),a=r(u),s=n(1),c=r(s),f=n(4),l=r(f),p=n(6),d=r(p),h=n(7),v=r(h),g=n(5),_=r(g),y=n(2),m=r(y),w=n(8),b=r(w),j=function(){function t(e,n){if(o(this,t),!e)throw c.default.error({description:"Application name requires to use Matter.",func:"constructor",obj:"Matter"}),new Error("Application name is required to use Matter");this.name=e,n&&(this.options=n),this.config=a.default}return i(t,[{key:"signup",value:function(t){if(c.default.log({description:"Signup called.",signupData:t,func:"signup",obj:"Matter"}),!t||!m.default.isObject(t)&&!m.default.isString(t))return c.default.error({description:"Signup information is required to signup.",func:"signup",obj:"Matter"}),Promise.reject({message:"Login data is required to login."});if(m.default.isObject(t))return d.default.post(this.endpoint+"/signup",t).then(function(e){return c.default.log({description:"Account request successful.",signupData:t,response:e,func:"signup",obj:"Matter"}),m.default.has(e,"account")?e.account:(c.default.warn({description:"Account was not contained in signup response.",signupData:t,response:e,func:"signup",obj:"Matter"}),e)}).catch(function(e){return c.default.error({description:"Error requesting signup.",signupData:t,error:e,func:"signup",obj:"Matter"}),Promise.reject(e)});var e=new b.default({provider:t,app:this});return e.signup(t).then(function(e){return c.default.info({description:"Provider signup successful.",provider:t,res:e,func:"signup",obj:"Matter"}),Promise.resolve(e)})}},{key:"login",value:function(t){var e=this;if(!t||!m.default.isObject(t)&&!m.default.isString(t))return c.default.error({description:"Username/Email and Password are required to login",func:"login",obj:"Matter"}),Promise.reject({message:"Login data is required to login."});if(m.default.isObject(t))return t.password&&t.username?d.default.put(this.endpoint+"/login",t).then(function(t){if(m.default.has(t,"data")&&m.default.has(t.data,"status")&&409==t.data.status)return c.default.warn({description:"Account not found.",response:t,func:"login",obj:"Matter"}),Promise.reject(t.data);c.default.log({description:"Successful login.",response:t,func:"login",obj:"Matter"}),m.default.has(t,"token")&&(e.token.string=t.token);var n={};return m.default.has(t,"account")?n=t.account:e.token.data?(c.default.log({description:"User data available from token.",tokenData:e.token.data,type:typeof e.token.data,func:"login",obj:"Matter"}),e.token.data.un?(c.default.log({description:"Token is AuthRocket format.",func:"login",obj:"Matter"}),n={username:e.token.data.un,name:e.token.data.n||null,authrocketId:e.token.data.uid||null}):(c.default.log({description:"Token is default format.",func:"login",obj:"Matter"}),n=e.token.data)):(c.default.error({description:"User data not available from response or token.",func:"login",obj:"Matter"}),n={token:e.token.string}),e.storage.setItem(a.default.tokenUserDataName,n),n}).catch(function(t){return c.default.error({description:"Error requesting login.",error:t,status:t.status,func:"login",obj:"Matter"}),(409==t.status||400==t.status)&&(t=t.response.text),Promise.reject(t)}):Promise.reject({message:"Username/Email and Password are required to login"});var n=new b.default({provider:t,app:this});return n.login().then(function(e){return c.default.info({description:"Provider login successful.",provider:t,res:e,func:"login",obj:"Matter"}),Promise.resolve(e)})}},{key:"logout",value:function(){var t=this;return this.isLoggedIn?d.default.put(this.endpoint+"/logout").then(function(e){return c.default.log({description:"Logout successful.",response:e,func:"logout",obj:"Matter"}),t.currentUser=null,t.token.delete(),e}).catch(function(e){return c.default.error({description:"Error requesting log out: ",error:e,func:"logout",obj:"Matter"}),t.storage.removeItem(a.default.tokenUserDataName),t.token.delete(),Promise.reject(e)}):(c.default.warn({description:"No logged in account to log out.",func:"logout",obj:"Matter"}),Promise.reject({message:"No logged in account to log out."}))}},{key:"getCurrentUser",value:function(){var t=this;return this.currentUser?Promise.resolve(this.currentUser):this.isLoggedIn?d.default.get(this.endpoint+"/user").then(function(e){return c.default.log({description:"Current User Request responded.",responseData:e,func:"currentUser",obj:"Matter"}),t.currentUser=e,e}).catch(function(t){return 401==t.status?(c.default.warn({description:"Called for current user without token.",error:t,func:"currentUser",obj:"Matter"}),v.default.delete(),Promise.resolve(null)):(c.default.error({description:"Error requesting current user.",error:t,func:"currentUser",obj:"Matter"}),Promise.reject(t))}):Promise.resolve(null)}},{key:"updateProfile",value:function(t){var e=this;return this.isLoggedIn?d.default.put(this.endpoint+"/user/"+this.token.data.username,t).then(function(t){return c.default.log({description:"Update profile request responded.",responseData:t,func:"updateProfile",obj:"Matter"}),e.currentUser=t,t}).catch(function(t){return c.default.error({description:"Error requesting current user.",error:t,func:"updateProfile",obj:"Matter"}),Promise.reject(t)}):(c.default.error({description:"No current user profile to update.",func:"updateProfile",obj:"Matter"}),Promise.reject({message:"Must be logged in to update profile."}))}},{key:"changePassword",value:function(t){return this.isLoggedIn?d.default.put(this.endpoint+"/user/"+this.token.data.username,t).then(function(t){return c.default.log({description:"Update password request responded.",responseData:t,func:"changePassword",obj:"Matter"}),t}).catch(function(t){return c.default.error({description:"Error requesting password change.",error:t,func:"changePassword",obj:"Matter"}),Promise.reject(t)}):(c.default.error({description:"No current user profile for which to change password.",func:"changePassword",obj:"Matter"}),Promise.reject({message:"Must be logged in to change password."}))}},{key:"recoverPassword",value:function(){return this.isLoggedIn?d.default.post(this.endpoint+"/accounts/"+this.token.data.username+"/recover").then(function(t){return c.default.log({description:"Recover password request responded.",responseData:t,func:"recoverPassword",obj:"Matter"}),t}).catch(function(t){return c.default.error({description:"Error requesting password recovery.",error:t,func:"recoverPassword",obj:"Matter"}),Promise.reject(t)}):(c.default.error({description:"No current user for which to recover password.",func:"recoverPassword",obj:"Matter"}),Promise.reject({message:"Must be logged in to recover password."}))}},{key:"isInGroup",value:function(t){var e=this;if(!this.isLoggedIn)return c.default.log({description:"No logged in user to check.",func:"isInGroup",obj:"Matter"}),!1;if(!t||!m.default.isString(t))return t&&m.default.isArray(t)?(c.default.info({description:"Array of groups.",list:t,func:"isInGroup",obj:"Matter"}),this.isInGroups(t)):!1;var n=function(){var n=t,r=n.split(",");if(r.length>1)return c.default.info({description:"String list of groups.",list:r,func:"isInGroup",obj:"Matter"}),{v:e.isInGroups(r)};var o=e.token.data.groups||[];return c.default.log({description:"Checking if user is in group.",group:n,userGroups:e.token.data.groups||[],func:"isInGroup",obj:"Matter"}),{v:m.default.any(o,function(t){return n==t.name})}}();return"object"==typeof n?n.v:void 0}},{key:"isInGroups",value:function(t){var e=this;if(!this.isLoggedIn)return c.default.log({description:"No logged in user to check.",func:"isInGroups",obj:"Matter"}),!1;if(t&&m.default.isArray(t))return m.default.every(m.default.map(t,function(t){return m.default.isString(t)?e.isInGroup(t):m.default.has(t,"name")?e.isInGroup(t.name):(c.default.error({description:"Invalid group object.",group:t,func:"isInGroups",obj:"Matter"}),!1)}),!0);if(t&&m.default.isString(t)){var n=t.split(",");return n.length>1?this.isInGroups(n):this.isInGroup(n[0])}return c.default.error({description:"Invalid groups list.",func:"isInGroups",obj:"Matter"}),!1}},{key:"endpoint",get:function(){m.default.has(this,"options")&&(this.options.localServer&&(a.default.envName="local",c.default.info({description:"LocalServer option was set to true. Now server url is local server.",url:a.default.serverUrl,func:"endpoint",obj:"Matter"})),this.options.env&&(a.default.envName=this.options.env,c.default.info({description:"Environment set based on provided environment.",config:a.default,func:"endpoint",obj:"Matter"})));var t=a.default.serverUrl+"/apps/"+this.name;return"tessellate"==this.name&&("undefined"==typeof window||!m.default.has(window,"location")||-1===window.location.host.indexOf("tessellate")&&-1===window.location.host.indexOf("localhost")?(t=a.default.serverUrl,c.default.info({description:"App is tessellate, serverUrl set as main tessellate server.",url:t,func:"endpoint",obj:"Matter"})):(t="",c.default.info({description:"Host is Tessellate Server, serverUrl simplified!",url:t,func:"endpoint",obj:"Matter"}))),c.default.log({description:"Endpoint created.",url:t,func:"endpoint",obj:"Matter"}),t}},{key:"isLoggedIn",get:function(){return this.token.string?!0:!1}},{key:"currentUser",set:function(t){c.default.log({description:"Current User set.",user:t,func:"currentUser",obj:"Matter"}),this.storage.setItem(a.default.tokenUserDataName,t)},get:function(){return this.storage.getItem(a.default.tokenUserDataName)?this.storage.getItem(a.default.tokenUserDataName):null}},{key:"storage",get:function(){return _.default}},{key:"token",get:function(){return v.default}},{key:"utils",get:function(){return{logger:c.default,request:d.default,storage:_.default,dom:l.default}}}]),t}();e.default=j,t.exports=e.default},function(t,e,n){function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){return t&&console[t]?console[t].apply(console,e):console.log.apply(console,e)}function i(t){var e="",n={};c.default.isObject(t)?("debug"==f&&c.default.has(t,"func")&&(e+=c.default.has(t,"obj")?"["+t.obj+"."+t.func+"()]\n ":c.default.has(t,"file")?"["+t.file+" > "+t.func+"()]\n ":"["+t.func+"()]\n "),c.default.each(c.default.omit(c.default.keys(t)),function(r){"func"!=r&&"obj"!=r&&("description"==r||"message"==r?e+=t[r]:c.default.isString(t[r])?n[r]=t[r]:n[r]=t[r])}),e+="\n"):c.default.isString(t)&&(e=t);var r=[e,n];return r}Object.defineProperty(e,"__esModule",{value:!0});var u=n(3),a=r(u),s=n(2),c=r(s),f="debug",l={log:function(t){var e=i(t);"production"==a.default.envName?o("log",e):o("log",e)},info:function(t){var e=i(t);"production"==a.default.envName?o("info",e):o("info",e)},warn:function(t){var e=i(t);"production"==a.default.envName?o("warn",e):o("warn",e)},debug:function(t){var e=i(t);"production"==a.default.envName||o("debug",e)},error:function(t){var e=i(t);"production"==a.default.envName?o("error",e):o("error",e)}};e.default=l,t.exports=e.default},function(t,e,n){var r;(function(t,o){(function(){function i(t,e){if(t!==e){var n=null===t,r=t===A,o=t===t,i=null===e,u=e===A,a=e===e;if(t>e&&!i||!o||n&&!u&&a||r&&a)return 1;if(e>t&&!n||!a||i&&!r&&o||u&&o)return-1}return 0}function u(t,e,n){for(var r=t.length,o=n?r:-1;n?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function a(t,e,n){if(e!==e)return y(t,n);for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}function s(t){return"function"==typeof t||!1}function c(t){return null==t?"":t+""}function f(t,e){for(var n=-1,r=t.length;++n<r&&e.indexOf(t.charAt(n))>-1;);return n}function l(t,e){for(var n=t.length;n--&&e.indexOf(t.charAt(n))>-1;);return n}function p(t,e){return i(t.criteria,e.criteria)||t.index-e.index}function d(t,e,n){for(var r=-1,o=t.criteria,u=e.criteria,a=o.length,s=n.length;++r<a;){var c=i(o[r],u[r]);if(c){if(r>=s)return c;var f=n[r];return c*("asc"===f||f===!0?1:-1)}}return t.index-e.index}function h(t){return Wt[t]}function v(t){return Xt[t]}function g(t,e,n){return e?t=Vt[t]:n&&(t=Yt[t]),"\\"+t}function _(t){return"\\"+Yt[t]}function y(t,e,n){for(var r=t.length,o=e+(n?0:-1);n?o--:++o<r;){var i=t[o];if(i!==i)return o}return-1}function m(t){return!!t&&"object"==typeof t}function w(t){return 160>=t&&t>=9&&13>=t||32==t||160==t||5760==t||6158==t||t>=8192&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function b(t,e){for(var n=-1,r=t.length,o=-1,i=[];++n<r;)t[n]===e&&(t[n]=W,i[++o]=n);return i}function j(t,e){for(var n,r=-1,o=t.length,i=-1,u=[];++r<o;){var a=t[r],s=e?e(a,r,t):a;r&&n===s||(n=s,u[++i]=a)}return u}function k(t){for(var e=-1,n=t.length;++e<n&&w(t.charCodeAt(e)););return e}function x(t){for(var e=t.length;e--&&w(t.charCodeAt(e)););return e}function E(t){return Jt[t]}function I(t){function e(t){if(m(t)&&!Ma(t)&&!(t instanceof o)){if(t instanceof r)return t;if(eu.call(t,"__chain__")&&eu.call(t,"__wrapped__"))return dr(t)}return new r(t)}function n(){}function r(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function o(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Pu,this.__views__=[]}function w(){var t=new o(this.__wrapped__);return t.__actions__=te(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=te(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=te(this.__views__),t}function Q(){if(this.__filtered__){var t=new o(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function rt(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ma(t),r=0>e,o=n?t.length:0,i=Wn(0,o,this.__views__),u=i.start,a=i.end,s=a-u,c=r?a:u-1,f=this.__iteratees__,l=f.length,p=0,d=ku(s,this.__takeCount__);if(!n||z>o||o==s&&d==s)return nn(r&&n?t.reverse():t,this.__actions__);var h=[];t:for(;s--&&d>p;){c+=e;for(var v=-1,g=t[c];++v<l;){var _=f[v],y=_.iteratee,m=_.type,w=y(g);if(m==F)g=w;else if(!w){if(m==B)continue t;break t}}h[p++]=g}return h}function it(){this.__data__={}}function Wt(t){return this.has(t)&&delete this.__data__[t]}function Xt(t){return"__proto__"==t?A:this.__data__[t]}function Jt(t){return"__proto__"!=t&&eu.call(this.__data__,t)}function Kt(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Vt(t){var e=t?t.length:0;for(this.data={hash:_u(null),set:new lu};e--;)this.push(t[e])}function Yt(t,e){var n=t.data,r="string"==typeof e||Ro(e)?n.set.has(e):n.hash[e];return r?0:-1}function Zt(t){var e=this.data;"string"==typeof t||Ro(t)?e.set.add(t):e.hash[t]=!0}function Qt(t,e){for(var n=-1,r=t.length,o=-1,i=e.length,u=Gi(r+i);++n<r;)u[n]=t[n];for(;++o<i;)u[n++]=e[o];return u}function te(t,e){var n=-1,r=t.length;for(e||(e=Gi(r));++n<r;)e[n]=t[n];return e}function ee(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function ne(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function ie(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function ue(t,e,n,r){for(var o=-1,i=t.length,u=r,a=u;++o<i;){var s=t[o],c=+e(s);n(c,u)&&(u=c,a=s)}return a}function ae(t,e){for(var n=-1,r=t.length,o=-1,i=[];++n<r;){var u=t[n];e(u,n,t)&&(i[++o]=u)}return i}function se(t,e){for(var n=-1,r=t.length,o=Gi(r);++n<r;)o[n]=e(t[n],n,t);return o}function ce(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}function fe(t,e,n,r){var o=-1,i=t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}function le(t,e,n,r){var o=t.length;for(r&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n}function pe(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function de(t,e){for(var n=t.length,r=0;n--;)r+=+e(t[n])||0;return r}function he(t,e){return t===A?e:t}function ve(t,e,n,r){return t!==A&&eu.call(r,n)?t:e}function ge(t,e,n){for(var r=-1,o=Ha(e),i=o.length;++r<i;){var u=o[r],a=t[u],s=n(a,e[u],u,t,e);(s===s?s===a:a!==a)&&(a!==A||u in t)||(t[u]=s)}return t}function _e(t,e){return null==e?t:me(e,Ha(e),t)}function ye(t,e){for(var n=-1,r=null==t,o=!r&&Yn(t),i=o?t.length:0,u=e.length,a=Gi(u);++n<u;){var s=e[n];o?a[n]=Zn(s,i)?t[s]:A:a[n]=r?A:t[s]}return a}function me(t,e,n){n||(n={});for(var r=-1,o=e.length;++r<o;){var i=e[r];n[i]=t[i]}return n}function we(t,e,n){var r=typeof t;return"function"==r?e===A?t:un(t,e,n):null==t?Pi:"object"==r?Le(t):e===A?Si(t):He(t,e)}function be(t,e,n,r,o,i,u){var a;if(n&&(a=o?n(t,r,o):n(t)),a!==A)return a;if(!Ro(t))return t;var s=Ma(t);if(s){if(a=Xn(t),!e)return te(t,a)}else{var c=ru.call(t),f=c==Z;if(c!=et&&c!=X&&(!f||o))return $t[c]?Kn(t,c,e):o?t:{};if(a=Jn(f?{}:t),!e)return _e(a,t)}i||(i=[]),u||(u=[]);for(var l=i.length;l--;)if(i[l]==t)return u[l];return i.push(t),u.push(a),(s?ee:Ce)(t,function(r,o){a[o]=be(r,e,n,o,t,i,u)}),a}function je(t,e,n){if("function"!=typeof t)throw new Vi($);return pu(function(){t.apply(A,n)},e)}function ke(t,e){var n=t?t.length:0,r=[];if(!n)return r;var o=-1,i=Bn(),u=i==a,s=u&&e.length>=z?vn(e):null,c=e.length;s&&(i=Yt,u=!1,e=s);t:for(;++o<n;){var f=t[o];if(u&&f===f){for(var l=c;l--;)if(e[l]===f)continue t;r.push(f)}else i(e,f,0)<0&&r.push(f)}return r}function xe(t,e){var n=!0;return Nu(t,function(t,r,o){return n=!!e(t,r,o)}),n}function Ee(t,e,n,r){var o=r,i=o;return Nu(t,function(t,u,a){var s=+e(t,u,a);(n(s,o)||s===r&&s===i)&&(o=s,i=t)}),i}function Ie(t,e,n,r){var o=t.length;for(n=null==n?0:+n||0,0>n&&(n=-n>o?0:o+n),r=r===A||r>o?o:+r||0,0>r&&(r+=o),o=n>r?0:r>>>0,n>>>=0;o>n;)t[n++]=e;return t}function Ae(t,e){var n=[];return Nu(t,function(t,r,o){e(t,r,o)&&n.push(t)}),n}function Pe(t,e,n,r){var o;return n(t,function(t,n,i){return e(t,n,i)?(o=r?n:t,!1):void 0}),o}function Me(t,e,n,r){r||(r=[]);for(var o=-1,i=t.length;++o<i;){var u=t[o];m(u)&&Yn(u)&&(n||Ma(u)||Io(u))?e?Me(u,e,n,r):ce(r,u):n||(r[r.length]=u)}return r}function Oe(t,e){return Du(t,e,ei)}function Ce(t,e){return Du(t,e,Ha)}function Ue(t,e){return Lu(t,e,Ha)}function Te(t,e){for(var n=-1,r=e.length,o=-1,i=[];++n<r;){var u=e[n];So(t[u])&&(i[++o]=u)}return i}function Se(t,e,n){if(null!=t){n!==A&&n in lr(t)&&(e=[n]);for(var r=0,o=e.length;null!=t&&o>r;)t=t[e[r++]];return r&&r==o?t:A}}function Re(t,e,n,r,o,i){return t===e?!0:null==t||null==e||!Ro(t)&&!m(e)?t!==t&&e!==e:Ne(t,e,Re,n,r,o,i)}function Ne(t,e,n,r,o,i,u){var a=Ma(t),s=Ma(e),c=J,f=J;a||(c=ru.call(t),c==X?c=et:c!=et&&(a=Fo(t))),s||(f=ru.call(e),f==X?f=et:f!=et&&(s=Fo(e)));var l=c==et,p=f==et,d=c==f;if(d&&!a&&!l)return Ln(t,e,c);if(!o){var h=l&&eu.call(t,"__wrapped__"),v=p&&eu.call(e,"__wrapped__");if(h||v)return n(h?t.value():t,v?e.value():e,r,o,i,u)}if(!d)return!1;i||(i=[]),u||(u=[]);for(var g=i.length;g--;)if(i[g]==t)return u[g]==e;i.push(t),u.push(e);var _=(a?Dn:Hn)(t,e,n,r,o,i,u);return i.pop(),u.pop(),_}function qe(t,e,n){var r=e.length,o=r,i=!n;if(null==t)return!o;for(t=lr(t);r--;){var u=e[r];if(i&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++r<o;){u=e[r];var a=u[0],s=t[a],c=u[1];if(i&&u[2]){if(s===A&&!(a in t))return!1}else{var f=n?n(s,c,a):A;if(!(f===A?Re(c,s,n,!0):f))return!1}}return!0}function De(t,e){var n=-1,r=Yn(t)?Gi(t.length):[];return Nu(t,function(t,o,i){r[++n]=e(t,o,i)}),r}function Le(t){var e=Fn(t);if(1==e.length&&e[0][2]){var n=e[0][0],r=e[0][1];return function(t){return null==t?!1:t[n]===r&&(r!==A||n in lr(t))}}return function(t){return qe(t,e)}}function He(t,e){var n=Ma(t),r=tr(t)&&rr(e),o=t+"";return t=pr(t),function(i){if(null==i)return!1;var u=o;if(i=lr(i),(n||!r)&&!(u in i)){if(i=1==t.length?i:Se(i,Je(t,0,-1)),null==i)return!1;u=Ir(t),i=lr(i)}return i[u]===e?e!==A||u in i:Re(e,i[u],A,!0)}}function Ge(t,e,n,r,o){if(!Ro(t))return t;var i=Yn(e)&&(Ma(e)||Fo(e)),u=i?A:Ha(e);return ee(u||e,function(a,s){if(u&&(s=a,a=e[s]),m(a))r||(r=[]),o||(o=[]),ze(t,e,s,Ge,n,r,o);else{var c=t[s],f=n?n(c,a,s,t,e):A,l=f===A;l&&(f=a),f===A&&(!i||s in t)||!l&&(f===f?f===c:c!==c)||(t[s]=f)}}),t}function ze(t,e,n,r,o,i,u){for(var a=i.length,s=e[n];a--;)if(i[a]==s)return void(t[n]=u[a]);var c=t[n],f=o?o(c,s,n,t,e):A,l=f===A;l&&(f=s,Yn(s)&&(Ma(s)||Fo(s))?f=Ma(c)?c:Yn(c)?te(c):[]:Go(s)||Io(s)?f=Io(c)?Ko(c):Go(c)?c:{}:l=!1),i.push(s),u.push(f),l?t[n]=r(f,s,o,i,u):(f===f?f!==c:c===c)&&(t[n]=f)}function Be(t){return function(e){return null==e?A:e[t]}}function Fe(t){var e=t+"";return t=pr(t),function(n){return Se(n,t,e)}}function $e(t,e){for(var n=t?e.length:0;n--;){var r=e[n];if(r!=o&&Zn(r)){var o=r;du.call(t,r,1)}}return t}function We(t,e){return t+yu(Iu()*(e-t+1))}function Xe(t,e,n,r,o){return o(t,function(t,o,i){n=r?(r=!1,t):e(n,t,o,i)}),n}function Je(t,e,n){var r=-1,o=t.length;e=null==e?0:+e||0,0>e&&(e=-e>o?0:o+e),n=n===A||n>o?o:+n||0,0>n&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var i=Gi(o);++r<o;)i[r]=t[r+e];return i}function Ke(t,e){var n;return Nu(t,function(t,r,o){return n=e(t,r,o),!n}),!!n}function Ve(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Ye(t,e,n){var r=Gn(),o=-1;e=se(e,function(t){return r(t)});var i=De(t,function(t){var n=se(e,function(e){return e(t)});return{criteria:n,index:++o,value:t}});return Ve(i,function(t,e){return d(t,e,n)})}function Ze(t,e){var n=0;return Nu(t,function(t,r,o){n+=+e(t,r,o)||0}),n}function Qe(t,e){var n=-1,r=Bn(),o=t.length,i=r==a,u=i&&o>=z,s=u?vn():null,c=[];s?(r=Yt,i=!1):(u=!1,s=e?[]:c);t:for(;++n<o;){var f=t[n],l=e?e(f,n,t):f;if(i&&f===f){for(var p=s.length;p--;)if(s[p]===l)continue t;e&&s.push(l),c.push(f)}else r(s,l,0)<0&&((e||u)&&s.push(l),c.push(f))}return c}function tn(t,e){for(var n=-1,r=e.length,o=Gi(r);++n<r;)o[n]=t[e[n]];return o}function en(t,e,n,r){for(var o=t.length,i=r?o:-1;(r?i--:++i<o)&&e(t[i],i,t););return n?Je(t,r?0:i,r?i+1:o):Je(t,r?i+1:0,r?o:i)}function nn(t,e){var n=t;n instanceof o&&(n=n.value());for(var r=-1,i=e.length;++r<i;){var u=e[r];n=u.func.apply(u.thisArg,ce([n],u.args))}return n}function rn(t,e,n){var r=0,o=t?t.length:r;if("number"==typeof e&&e===e&&Cu>=o){for(;o>r;){var i=r+o>>>1,u=t[i];(n?e>=u:e>u)&&null!==u?r=i+1:o=i}return o}return on(t,e,Pi,n)}function on(t,e,n,r){e=n(e);for(var o=0,i=t?t.length:0,u=e!==e,a=null===e,s=e===A;i>o;){var c=yu((o+i)/2),f=n(t[c]),l=f!==A,p=f===f;if(u)var d=p||r;else d=a?p&&l&&(r||null!=f):s?p&&(r||l):null==f?!1:r?e>=f:e>f;d?o=c+1:i=c}return ku(i,Ou)}function un(t,e,n){if("function"!=typeof t)return Pi;if(e===A)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)};case 5:return function(n,r,o,i,u){return t.call(e,n,r,o,i,u)}}return function(){return t.apply(e,arguments)}}function an(t){var e=new uu(t.byteLength),n=new hu(e);return n.set(new hu(t)),e}function sn(t,e,n){for(var r=n.length,o=-1,i=ju(t.length-r,0),u=-1,a=e.length,s=Gi(a+i);++u<a;)s[u]=e[u];for(;++o<r;)s[n[o]]=t[o];for(;i--;)s[u++]=t[o++];return s}function cn(t,e,n){for(var r=-1,o=n.length,i=-1,u=ju(t.length-o,0),a=-1,s=e.length,c=Gi(u+s);++i<u;)c[i]=t[i];for(var f=i;++a<s;)c[f+a]=e[a];for(;++r<o;)c[f+n[r]]=t[i++];return c}function fn(t,e){return function(n,r,o){var i=e?e():{};if(r=Gn(r,o,3),Ma(n))for(var u=-1,a=n.length;++u<a;){var s=n[u];t(i,s,r(s,u,n),n)}else Nu(n,function(e,n,o){t(i,e,r(e,n,o),o)});return i}}function ln(t){return yo(function(e,n){var r=-1,o=null==e?0:n.length,i=o>2?n[o-2]:A,u=o>2?n[2]:A,a=o>1?n[o-1]:A;for("function"==typeof i?(i=un(i,a,5),o-=2):(i="function"==typeof a?a:A,o-=i?1:0),u&&Qn(n[0],n[1],u)&&(i=3>o?A:i,o=1);++r<o;){var s=n[r];s&&t(e,s,i)}return e})}function pn(t,e){return function(n,r){var o=n?zu(n):0;if(!nr(o))return t(n,r);for(var i=e?o:-1,u=lr(n);(e?i--:++i<o)&&r(u[i],i,u)!==!1;);return n}}function dn(t){return function(e,n,r){for(var o=lr(e),i=r(e),u=i.length,a=t?u:-1;t?a--:++a<u;){var s=i[a];if(n(o[s],s,o)===!1)break}return e}}function hn(t,e){function n(){var o=this&&this!==re&&this instanceof n?r:t;return o.apply(e,arguments)}var r=_n(t);return n}function vn(t){return _u&&lu?new Vt(t):null}function gn(t){return function(e){for(var n=-1,r=Ei(li(e)),o=r.length,i="";++n<o;)i=t(i,r[n],n);return i}}function _n(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Ru(t.prototype),r=t.apply(n,e);return Ro(r)?r:n}}function yn(t){function e(n,r,o){o&&Qn(n,r,o)&&(r=A);var i=qn(n,t,A,A,A,A,A,r);return i.placeholder=e.placeholder,i}return e}function mn(t,e){return yo(function(n){var r=n[0];return null==r?r:(n.push(e),t.apply(A,n))})}function wn(t,e){return function(n,r,o){if(o&&Qn(n,r,o)&&(r=A),r=Gn(r,o,3),1==r.length){n=Ma(n)?n:fr(n);var i=ue(n,r,t,e);if(!n.length||i!==e)return i}return Ee(n,r,t,e)}}function bn(t,e){return function(n,r,o){if(r=Gn(r,o,3),Ma(n)){var i=u(n,r,e);return i>-1?n[i]:A}return Pe(n,r,t)}}function jn(t){return function(e,n,r){return e&&e.length?(n=Gn(n,r,3),u(e,n,t)):-1}}function kn(t){return function(e,n,r){return n=Gn(n,r,3),Pe(e,n,t,!0)}}function xn(t){return function(){for(var e,n=arguments.length,o=t?n:-1,i=0,u=Gi(n);t?o--:++o<n;){var a=u[i++]=arguments[o];if("function"!=typeof a)throw new Vi($);!e&&r.prototype.thru&&"wrapper"==zn(a)&&(e=new r([],!0))}for(o=e?-1:n;++o<n;){a=u[o];var s=zn(a),c="wrapper"==s?Gu(a):A;e=c&&er(c[0])&&c[1]==(N|U|S|q)&&!c[4].length&&1==c[9]?e[zn(c[0])].apply(e,c[3]):1==a.length&&er(a)?e[s]():e.thru(a)}return function(){var t=arguments,r=t[0];if(e&&1==t.length&&Ma(r)&&r.length>=z)return e.plant(r).value();for(var o=0,i=n?u[o].apply(this,t):r;++o<n;)i=u[o].call(this,i);return i}}}function En(t,e){return function(n,r,o){return"function"==typeof r&&o===A&&Ma(n)?t(n,r):e(n,un(r,o,3))}}function In(t){return function(e,n,r){return("function"!=typeof n||r!==A)&&(n=un(n,r,3)),t(e,n,ei)}}function An(t){return function(e,n,r){return("function"!=typeof n||r!==A)&&(n=un(n,r,3)),t(e,n)}}function Pn(t){return function(e,n,r){var o={};return n=Gn(n,r,3),Ce(e,function(e,r,i){var u=n(e,r,i);r=t?u:r,e=t?e:u,o[r]=e}),o}}function Mn(t){return function(e,n,r){return e=c(e),(t?e:"")+Tn(e,n,r)+(t?"":e)}}function On(t){var e=yo(function(n,r){var o=b(r,e.placeholder);return qn(n,t,A,r,o)});return e}function Cn(t,e){return function(n,r,o,i){var u=arguments.length<3;return"function"==typeof r&&i===A&&Ma(n)?t(n,r,o,u):Xe(n,Gn(r,i,4),o,u,e)}}function Un(t,e,n,r,o,i,u,a,s,c){function f(){for(var y=arguments.length,m=y,w=Gi(y);m--;)w[m]=arguments[m];if(r&&(w=sn(w,r,o)),i&&(w=cn(w,i,u)),h||g){var j=f.placeholder,k=b(w,j);if(y-=k.length,c>y){var x=a?te(a):A,E=ju(c-y,0),I=h?k:A,P=h?A:k,C=h?w:A,U=h?A:w;e|=h?S:R,e&=~(h?R:S),v||(e&=~(M|O));var T=[t,e,n,C,I,U,P,x,s,E],N=Un.apply(A,T);return er(t)&&Bu(N,T),N.placeholder=j,N}}var q=p?n:this,D=d?q[t]:t;return a&&(w=sr(w,a)),l&&s<w.length&&(w.length=s),this&&this!==re&&this instanceof f&&(D=_||_n(t)),D.apply(q,w)}var l=e&N,p=e&M,d=e&O,h=e&U,v=e&C,g=e&T,_=d?A:_n(t);return f}function Tn(t,e,n){var r=t.length;if(e=+e,r>=e||!wu(e))return"";var o=e-r;return n=null==n?" ":n+"",_i(n,gu(o/n.length)).slice(0,o)}function Sn(t,e,n,r){function o(){for(var e=-1,a=arguments.length,s=-1,c=r.length,f=Gi(c+a);++s<c;)f[s]=r[s];for(;a--;)f[s++]=arguments[++e];var l=this&&this!==re&&this instanceof o?u:t;return l.apply(i?n:this,f)}var i=e&M,u=_n(t);return o}function Rn(t){var e=$i[t];return function(t,n){return n=n===A?0:+n||0,n?(n=cu(10,n),e(t*n)/n):e(t)}}function Nn(t){return function(e,n,r,o){var i=Gn(r);return null==r&&i===we?rn(e,n,t):on(e,n,i(r,o,1),t)}}function qn(t,e,n,r,o,i,u,a){var s=e&O;if(!s&&"function"!=typeof t)throw new Vi($);var c=r?r.length:0;if(c||(e&=~(S|R),r=o=A),c-=o?o.length:0,e&R){var f=r,l=o;r=o=A}var p=s?A:Gu(t),d=[t,e,n,r,o,f,l,i,u,a];if(p&&(or(d,p),e=d[1],a=d[9]),d[9]=null==a?s?0:t.length:ju(a-c,0)||0,e==M)var h=hn(d[0],d[2]);else h=e!=S&&e!=(M|S)||d[4].length?Un.apply(A,d):Sn.apply(A,d);var v=p?Hu:Bu;return v(h,d)}function Dn(t,e,n,r,o,i,u){var a=-1,s=t.length,c=e.length;if(s!=c&&!(o&&c>s))return!1;for(;++a<s;){var f=t[a],l=e[a],p=r?r(o?l:f,o?f:l,a):A;if(p!==A){if(p)continue;return!1}if(o){if(!pe(e,function(t){return f===t||n(f,t,r,o,i,u)}))return!1}else if(f!==l&&!n(f,l,r,o,i,u))return!1}return!0}function Ln(t,e,n){switch(n){case K:case V:return+t==+e;case Y:return t.name==e.name&&t.message==e.message;case tt:return t!=+t?e!=+e:t==+e;case nt:case ot:return t==e+""}return!1}function Hn(t,e,n,r,o,i,u){var a=Ha(t),s=a.length,c=Ha(e),f=c.length;if(s!=f&&!o)return!1;for(var l=s;l--;){var p=a[l];if(!(o?p in e:eu.call(e,p)))return!1}for(var d=o;++l<s;){p=a[l];var h=t[p],v=e[p],g=r?r(o?v:h,o?h:v,p):A;if(!(g===A?n(h,v,r,o,i,u):g))return!1;d||(d="constructor"==p)}if(!d){var _=t.constructor,y=e.constructor;if(_!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof y&&y instanceof y))return!1}return!0}function Gn(t,n,r){var o=e.callback||Ii;return o=o===Ii?we:o,r?o(t,n,r):o}function zn(t){for(var e=t.name,n=Su[e],r=n?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==t)return o.name}return e}function Bn(t,n,r){var o=e.indexOf||xr;return o=o===xr?a:o,t?o(t,n,r):o}function Fn(t){for(var e=ni(t),n=e.length;n--;)e[n][2]=rr(e[n][1]);return e}function $n(t,e){var n=null==t?A:t[e];return Do(n)?n:A}function Wn(t,e,n){for(var r=-1,o=n.length;++r<o;){var i=n[r],u=i.size;switch(i.type){case"drop":t+=u;break;case"dropRight":e-=u;break;case"take":e=ku(e,t+u);break;case"takeRight":t=ju(t,e-u)}}return{start:t,end:e}}function Xn(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&eu.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Jn(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Xi),new e}function Kn(t,e,n){var r=t.constructor;switch(e){case ut:return an(t);case K:case V:return new r(+t);case at:case st:case ct:case ft:case lt:case pt:case dt:case ht:case vt:var o=t.buffer;return new r(n?an(o):o,t.byteOffset,t.length);case tt:case ot:return new r(t);case nt:var i=new r(t.source,St.exec(t));i.lastIndex=t.lastIndex}return i}function Vn(t,e,n){null==t||tr(e,t)||(e=pr(e),t=1==e.length?t:Se(t,Je(e,0,-1)),e=Ir(e));var r=null==t?t:t[e];return null==r?A:r.apply(t,n)}function Yn(t){return null!=t&&nr(zu(t))}function Zn(t,e){return t="number"==typeof t||qt.test(t)?+t:-1,e=null==e?Uu:e,t>-1&&t%1==0&&e>t}function Qn(t,e,n){if(!Ro(n))return!1;var r=typeof e;if("number"==r?Yn(n)&&Zn(e,n.length):"string"==r&&e in n){var o=n[e];return t===t?t===o:o!==o}return!1}function tr(t,e){var n=typeof t;if("string"==n&&At.test(t)||"number"==n)return!0;if(Ma(t))return!1;var r=!It.test(t);return r||null!=e&&t in lr(e)}function er(t){var n=zn(t);if(!(n in o.prototype))return!1;var r=e[n];if(t===r)return!0;var i=Gu(r);return!!i&&t===i[0]}function nr(t){return"number"==typeof t&&t>-1&&t%1==0&&Uu>=t}function rr(t){return t===t&&!Ro(t)}function or(t,e){var n=t[1],r=e[1],o=n|r,i=N>o,u=r==N&&n==U||r==N&&n==q&&t[7].length<=e[8]||r==(N|q)&&n==U;if(!i&&!u)return t;r&M&&(t[2]=e[2],o|=n&M?0:C);var a=e[3];if(a){var s=t[3];t[3]=s?sn(s,a,e[4]):te(a),t[4]=s?b(t[3],W):te(e[4])}return a=e[5],a&&(s=t[5],t[5]=s?cn(s,a,e[6]):te(a),t[6]=s?b(t[5],W):te(e[6])),a=e[7],a&&(t[7]=te(a)),r&N&&(t[8]=null==t[8]?e[8]:ku(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o,t}function ir(t,e){return t===A?e:Oa(t,e,ir)}function ur(t,e){t=lr(t);for(var n=-1,r=e.length,o={};++n<r;){var i=e[n];i in t&&(o[i]=t[i])}return o}function ar(t,e){var n={};
return Oe(t,function(t,r,o){e(t,r,o)&&(n[r]=t)}),n}function sr(t,e){for(var n=t.length,r=ku(e.length,n),o=te(t);r--;){var i=e[r];t[r]=Zn(i,n)?o[i]:A}return t}function cr(t){for(var e=ei(t),n=e.length,r=n&&t.length,o=!!r&&nr(r)&&(Ma(t)||Io(t)),i=-1,u=[];++i<n;){var a=e[i];(o&&Zn(a,r)||eu.call(t,a))&&u.push(a)}return u}function fr(t){return null==t?[]:Yn(t)?Ro(t)?t:Xi(t):ui(t)}function lr(t){return Ro(t)?t:Xi(t)}function pr(t){if(Ma(t))return t;var e=[];return c(t).replace(Pt,function(t,n,r,o){e.push(r?o.replace(Ut,"$1"):n||t)}),e}function dr(t){return t instanceof o?t.clone():new r(t.__wrapped__,t.__chain__,te(t.__actions__))}function hr(t,e,n){e=(n?Qn(t,e,n):null==e)?1:ju(yu(e)||1,1);for(var r=0,o=t?t.length:0,i=-1,u=Gi(gu(o/e));o>r;)u[++i]=Je(t,r,r+=e);return u}function vr(t){for(var e=-1,n=t?t.length:0,r=-1,o=[];++e<n;){var i=t[e];i&&(o[++r]=i)}return o}function gr(t,e,n){var r=t?t.length:0;return r?((n?Qn(t,e,n):null==e)&&(e=1),Je(t,0>e?0:e)):[]}function _r(t,e,n){var r=t?t.length:0;return r?((n?Qn(t,e,n):null==e)&&(e=1),e=r-(+e||0),Je(t,0,0>e?0:e)):[]}function yr(t,e,n){return t&&t.length?en(t,Gn(e,n,3),!0,!0):[]}function mr(t,e,n){return t&&t.length?en(t,Gn(e,n,3),!0):[]}function wr(t,e,n,r){var o=t?t.length:0;return o?(n&&"number"!=typeof n&&Qn(t,e,n)&&(n=0,r=o),Ie(t,e,n,r)):[]}function br(t){return t?t[0]:A}function jr(t,e,n){var r=t?t.length:0;return n&&Qn(t,e,n)&&(e=!1),r?Me(t,e):[]}function kr(t){var e=t?t.length:0;return e?Me(t,!0):[]}function xr(t,e,n){var r=t?t.length:0;if(!r)return-1;if("number"==typeof n)n=0>n?ju(r+n,0):n;else if(n){var o=rn(t,e);return r>o&&(e===e?e===t[o]:t[o]!==t[o])?o:-1}return a(t,e,n||0)}function Er(t){return _r(t,1)}function Ir(t){var e=t?t.length:0;return e?t[e-1]:A}function Ar(t,e,n){var r=t?t.length:0;if(!r)return-1;var o=r;if("number"==typeof n)o=(0>n?ju(r+n,0):ku(n||0,r-1))+1;else if(n){o=rn(t,e,!0)-1;var i=t[o];return(e===e?e===i:i!==i)?o:-1}if(e!==e)return y(t,o,!0);for(;o--;)if(t[o]===e)return o;return-1}function Pr(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,r=Bn(),o=t.length;++n<o;)for(var i=0,u=t[n];(i=r(e,u,i))>-1;)du.call(e,i,1);return e}function Mr(t,e,n){var r=[];if(!t||!t.length)return r;var o=-1,i=[],u=t.length;for(e=Gn(e,n,3);++o<u;){var a=t[o];e(a,o,t)&&(r.push(a),i.push(o))}return $e(t,i),r}function Or(t){return gr(t,1)}function Cr(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Qn(t,e,n)&&(e=0,n=r),Je(t,e,n)):[]}function Ur(t,e,n){var r=t?t.length:0;return r?((n?Qn(t,e,n):null==e)&&(e=1),Je(t,0,0>e?0:e)):[]}function Tr(t,e,n){var r=t?t.length:0;return r?((n?Qn(t,e,n):null==e)&&(e=1),e=r-(+e||0),Je(t,0>e?0:e)):[]}function Sr(t,e,n){return t&&t.length?en(t,Gn(e,n,3),!1,!0):[]}function Rr(t,e,n){return t&&t.length?en(t,Gn(e,n,3)):[]}function Nr(t,e,n,r){var o=t?t.length:0;if(!o)return[];null!=e&&"boolean"!=typeof e&&(r=n,n=Qn(t,e,r)?A:e,e=!1);var i=Gn();return(null!=n||i!==we)&&(n=i(n,r,3)),e&&Bn()==a?j(t,n):Qe(t,n)}function qr(t){if(!t||!t.length)return[];var e=-1,n=0;t=ae(t,function(t){return Yn(t)?(n=ju(t.length,n),!0):void 0});for(var r=Gi(n);++e<n;)r[e]=se(t,Be(e));return r}function Dr(t,e,n){var r=t?t.length:0;if(!r)return[];var o=qr(t);return null==e?o:(e=un(e,n,4),se(o,function(t){return fe(t,e,A,!0)}))}function Lr(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Yn(n))var r=r?ce(ke(r,n),ke(n,r)):n}return r?Qe(r):[]}function Hr(t,e){var n=-1,r=t?t.length:0,o={};for(!r||e||Ma(t[0])||(e=[]);++n<r;){var i=t[n];e?o[i]=e[n]:i&&(o[i[0]]=i[1])}return o}function Gr(t){var n=e(t);return n.__chain__=!0,n}function zr(t,e,n){return e.call(n,t),t}function Br(t,e,n){return e.call(n,t)}function Fr(){return Gr(this)}function $r(){return new r(this.value(),this.__chain__)}function Wr(t){for(var e,r=this;r instanceof n;){var o=dr(r);e?i.__wrapped__=o:e=o;var i=o;r=r.__wrapped__}return i.__wrapped__=t,e}function Xr(){var t=this.__wrapped__,e=function(t){return n&&n.__dir__<0?t:t.reverse()};if(t instanceof o){var n=t;return this.__actions__.length&&(n=new o(this)),n=n.reverse(),n.__actions__.push({func:Br,args:[e],thisArg:A}),new r(n,this.__chain__)}return this.thru(e)}function Jr(){return this.value()+""}function Kr(){return nn(this.__wrapped__,this.__actions__)}function Vr(t,e,n){var r=Ma(t)?ie:xe;return n&&Qn(t,e,n)&&(e=A),("function"!=typeof e||n!==A)&&(e=Gn(e,n,3)),r(t,e)}function Yr(t,e,n){var r=Ma(t)?ae:Ae;return e=Gn(e,n,3),r(t,e)}function Zr(t,e){return oa(t,Le(e))}function Qr(t,e,n,r){var o=t?zu(t):0;return nr(o)||(t=ui(t),o=t.length),n="number"!=typeof n||r&&Qn(e,n,r)?0:0>n?ju(o+n,0):n||0,"string"==typeof t||!Ma(t)&&Bo(t)?o>=n&&t.indexOf(e,n)>-1:!!o&&Bn(t,e,n)>-1}function to(t,e,n){var r=Ma(t)?se:De;return e=Gn(e,n,3),r(t,e)}function eo(t,e){return to(t,Si(e))}function no(t,e,n){var r=Ma(t)?ae:Ae;return e=Gn(e,n,3),r(t,function(t,n,r){return!e(t,n,r)})}function ro(t,e,n){if(n?Qn(t,e,n):null==e){t=fr(t);var r=t.length;return r>0?t[We(0,r-1)]:A}var o=-1,i=Jo(t),r=i.length,u=r-1;for(e=ku(0>e?0:+e||0,r);++o<e;){var a=We(o,u),s=i[a];i[a]=i[o],i[o]=s}return i.length=e,i}function oo(t){return ro(t,Pu)}function io(t){var e=t?zu(t):0;return nr(e)?e:Ha(t).length}function uo(t,e,n){var r=Ma(t)?pe:Ke;return n&&Qn(t,e,n)&&(e=A),("function"!=typeof e||n!==A)&&(e=Gn(e,n,3)),r(t,e)}function ao(t,e,n){if(null==t)return[];n&&Qn(t,e,n)&&(e=A);var r=-1;e=Gn(e,n,3);var o=De(t,function(t,n,o){return{criteria:e(t,n,o),index:++r,value:t}});return Ve(o,p)}function so(t,e,n,r){return null==t?[]:(r&&Qn(e,n,r)&&(n=A),Ma(e)||(e=null==e?[]:[e]),Ma(n)||(n=null==n?[]:[n]),Ye(t,e,n))}function co(t,e){return Yr(t,Le(e))}function fo(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Vi($);var n=t;t=e,e=n}return t=wu(t=+t)?t:0,function(){return--t<1?e.apply(this,arguments):void 0}}function lo(t,e,n){return n&&Qn(t,e,n)&&(e=A),e=t&&null==e?t.length:ju(+e||0,0),qn(t,N,A,A,A,A,e)}function po(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new Vi($);var r=t;t=e,e=r}return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=A),n}}function ho(t,e,n){function r(){d&&au(d),c&&au(c),v=0,c=d=h=A}function o(e,n){n&&au(n),c=d=h=A,e&&(v=va(),f=t.apply(p,s),d||c||(s=p=A))}function i(){var t=e-(va()-l);0>=t||t>e?o(h,c):d=pu(i,t)}function u(){o(_,d)}function a(){if(s=arguments,l=va(),p=this,h=_&&(d||!y),g===!1)var n=y&&!d;else{c||y||(v=l);var r=g-(l-v),o=0>=r||r>g;o?(c&&(c=au(c)),v=l,f=t.apply(p,s)):c||(c=pu(u,r))}return o&&d?d=au(d):d||e===g||(d=pu(i,e)),n&&(o=!0,f=t.apply(p,s)),!o||d||c||(s=p=A),f}var s,c,f,l,p,d,h,v=0,g=!1,_=!0;if("function"!=typeof t)throw new Vi($);if(e=0>e?0:+e||0,n===!0){var y=!0;_=!1}else Ro(n)&&(y=!!n.leading,g="maxWait"in n&&ju(+n.maxWait||0,e),_="trailing"in n?!!n.trailing:_);return a.cancel=r,a}function vo(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Vi($);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var u=t.apply(this,r);return n.cache=i.set(o,u),u};return n.cache=new vo.Cache,n}function go(t){if("function"!=typeof t)throw new Vi($);return function(){return!t.apply(this,arguments)}}function _o(t){return po(2,t)}function yo(t,e){if("function"!=typeof t)throw new Vi($);return e=ju(e===A?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,o=ju(n.length-e,0),i=Gi(o);++r<o;)i[r]=n[e+r];switch(e){case 0:return t.call(this,i);case 1:return t.call(this,n[0],i);case 2:return t.call(this,n[0],n[1],i)}var u=Gi(e+1);for(r=-1;++r<e;)u[r]=n[r];return u[e]=i,t.apply(this,u)}}function mo(t){if("function"!=typeof t)throw new Vi($);return function(e){return t.apply(this,e)}}function wo(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new Vi($);return n===!1?r=!1:Ro(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),ho(t,e,{leading:r,maxWait:+e,trailing:o})}function bo(t,e){return e=null==e?Pi:e,qn(e,S,A,[t],[])}function jo(t,e,n,r){return e&&"boolean"!=typeof e&&Qn(t,e,n)?e=!1:"function"==typeof e&&(r=n,n=e,e=!1),"function"==typeof n?be(t,e,un(n,r,1)):be(t,e)}function ko(t,e,n){return"function"==typeof e?be(t,!0,un(e,n,1)):be(t,!0)}function xo(t,e){return t>e}function Eo(t,e){return t>=e}function Io(t){return m(t)&&Yn(t)&&eu.call(t,"callee")&&!fu.call(t,"callee")}function Ao(t){return t===!0||t===!1||m(t)&&ru.call(t)==K}function Po(t){return m(t)&&ru.call(t)==V}function Mo(t){return!!t&&1===t.nodeType&&m(t)&&!Go(t)}function Oo(t){return null==t?!0:Yn(t)&&(Ma(t)||Bo(t)||Io(t)||m(t)&&So(t.splice))?!t.length:!Ha(t).length}function Co(t,e,n,r){n="function"==typeof n?un(n,r,3):A;var o=n?n(t,e):A;return o===A?Re(t,e,n):!!o}function Uo(t){return m(t)&&"string"==typeof t.message&&ru.call(t)==Y}function To(t){return"number"==typeof t&&wu(t)}function So(t){return Ro(t)&&ru.call(t)==Z}function Ro(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function No(t,e,n,r){return n="function"==typeof n?un(n,r,3):A,qe(t,Fn(e),n)}function qo(t){return Ho(t)&&t!=+t}function Do(t){return null==t?!1:So(t)?iu.test(tu.call(t)):m(t)&&Nt.test(t)}function Lo(t){return null===t}function Ho(t){return"number"==typeof t||m(t)&&ru.call(t)==tt}function Go(t){var e;if(!m(t)||ru.call(t)!=et||Io(t)||!eu.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var n;return Oe(t,function(t,e){n=e}),n===A||eu.call(t,n)}function zo(t){return Ro(t)&&ru.call(t)==nt}function Bo(t){return"string"==typeof t||m(t)&&ru.call(t)==ot}function Fo(t){return m(t)&&nr(t.length)&&!!Ft[ru.call(t)]}function $o(t){return t===A}function Wo(t,e){return e>t}function Xo(t,e){return e>=t}function Jo(t){var e=t?zu(t):0;return nr(e)?e?te(t):[]:ui(t)}function Ko(t){return me(t,ei(t))}function Vo(t,e,n){var r=Ru(t);return n&&Qn(t,e,n)&&(e=A),e?_e(r,e):r}function Yo(t){return Te(t,ei(t))}function Zo(t,e,n){var r=null==t?A:Se(t,pr(e),e+"");return r===A?n:r}function Qo(t,e){if(null==t)return!1;var n=eu.call(t,e);if(!n&&!tr(e)){if(e=pr(e),t=1==e.length?t:Se(t,Je(e,0,-1)),null==t)return!1;e=Ir(e),n=eu.call(t,e)}return n||nr(t.length)&&Zn(e,t.length)&&(Ma(t)||Io(t))}function ti(t,e,n){n&&Qn(t,e,n)&&(e=A);for(var r=-1,o=Ha(t),i=o.length,u={};++r<i;){var a=o[r],s=t[a];e?eu.call(u,s)?u[s].push(a):u[s]=[a]:u[s]=a}return u}function ei(t){if(null==t)return[];Ro(t)||(t=Xi(t));var e=t.length;e=e&&nr(e)&&(Ma(t)||Io(t))&&e||0;for(var n=t.constructor,r=-1,o="function"==typeof n&&n.prototype===t,i=Gi(e),u=e>0;++r<e;)i[r]=r+"";for(var a in t)u&&Zn(a,e)||"constructor"==a&&(o||!eu.call(t,a))||i.push(a);return i}function ni(t){t=lr(t);for(var e=-1,n=Ha(t),r=n.length,o=Gi(r);++e<r;){var i=n[e];o[e]=[i,t[i]]}return o}function ri(t,e,n){var r=null==t?A:t[e];return r===A&&(null==t||tr(e,t)||(e=pr(e),t=1==e.length?t:Se(t,Je(e,0,-1)),r=null==t?A:t[Ir(e)]),r=r===A?n:r),So(r)?r.call(t):r}function oi(t,e,n){if(null==t)return t;var r=e+"";e=null!=t[r]||tr(e,t)?[r]:pr(e);for(var o=-1,i=e.length,u=i-1,a=t;null!=a&&++o<i;){var s=e[o];Ro(a)&&(o==u?a[s]=n:null==a[s]&&(a[s]=Zn(e[o+1])?[]:{})),a=a[s]}return t}function ii(t,e,n,r){var o=Ma(t)||Fo(t);if(e=Gn(e,r,4),null==n)if(o||Ro(t)){var i=t.constructor;n=o?Ma(t)?new i:[]:Ru(So(i)?i.prototype:A)}else n={};return(o?ee:Ce)(t,function(t,r,o){return e(n,t,r,o)}),n}function ui(t){return tn(t,Ha(t))}function ai(t){return tn(t,ei(t))}function si(t,e,n){return e=+e||0,n===A?(n=e,e=0):n=+n||0,t>=ku(e,n)&&t<ju(e,n)}function ci(t,e,n){n&&Qn(t,e,n)&&(e=n=A);var r=null==t,o=null==e;if(null==n&&(o&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,o=!0)),r&&o&&(e=1,o=!1),t=+t||0,o?(e=t,t=0):e=+e||0,n||t%1||e%1){var i=Iu();return ku(t+i*(e-t+su("1e-"+((i+"").length-1))),e)}return We(t,e)}function fi(t){return t=c(t),t&&t.charAt(0).toUpperCase()+t.slice(1)}function li(t){return t=c(t),t&&t.replace(Dt,h).replace(Ct,"")}function pi(t,e,n){t=c(t),e+="";var r=t.length;return n=n===A?r:ku(0>n?0:+n||0,r),n-=e.length,n>=0&&t.indexOf(e,n)==n}function di(t){return t=c(t),t&&jt.test(t)?t.replace(wt,v):t}function hi(t){return t=c(t),t&&Ot.test(t)?t.replace(Mt,g):t||"(?:)"}function vi(t,e,n){t=c(t),e=+e;var r=t.length;if(r>=e||!wu(e))return t;var o=(e-r)/2,i=yu(o),u=gu(o);return n=Tn("",u,n),n.slice(0,i)+t+n}function gi(t,e,n){return(n?Qn(t,e,n):null==e)?e=0:e&&(e=+e),t=wi(t),Eu(t,e||(Rt.test(t)?16:10))}function _i(t,e){var n="";if(t=c(t),e=+e,1>e||!t||!wu(e))return n;do e%2&&(n+=t),e=yu(e/2),t+=t;while(e);return n}function yi(t,e,n){return t=c(t),n=null==n?0:ku(0>n?0:+n||0,t.length),t.lastIndexOf(e,n)==n}function mi(t,n,r){var o=e.templateSettings;r&&Qn(t,n,r)&&(n=r=A),t=c(t),n=ge(_e({},r||n),o,ve);var i,u,a=ge(_e({},n.imports),o.imports,ve),s=Ha(a),f=tn(a,s),l=0,p=n.interpolate||Lt,d="__p += '",h=Ji((n.escape||Lt).source+"|"+p.source+"|"+(p===Et?Tt:Lt).source+"|"+(n.evaluate||Lt).source+"|$","g"),v="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Bt+"]")+"\n";t.replace(h,function(e,n,r,o,a,s){return r||(r=o),d+=t.slice(l,s).replace(Ht,_),n&&(i=!0,d+="' +\n__e("+n+") +\n'"),a&&(u=!0,d+="';\n"+a+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=s+e.length,e}),d+="';\n";var g=n.variable;g||(d="with (obj) {\n"+d+"\n}\n"),d=(u?d.replace(gt,""):d).replace(_t,"$1").replace(yt,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var y=Ya(function(){return Fi(s,v+"return "+d).apply(A,f)});if(y.source=d,Uo(y))throw y;return y}function wi(t,e,n){var r=t;return(t=c(t))?(n?Qn(r,e,n):null==e)?t.slice(k(t),x(t)+1):(e+="",t.slice(f(t,e),l(t,e)+1)):t}function bi(t,e,n){var r=t;return t=c(t),t?(n?Qn(r,e,n):null==e)?t.slice(k(t)):t.slice(f(t,e+"")):t}function ji(t,e,n){var r=t;return t=c(t),t?(n?Qn(r,e,n):null==e)?t.slice(0,x(t)+1):t.slice(0,l(t,e+"")+1):t}function ki(t,e,n){n&&Qn(t,e,n)&&(e=A);var r=D,o=L;if(null!=e)if(Ro(e)){var i="separator"in e?e.separator:i;r="length"in e?+e.length||0:r,o="omission"in e?c(e.omission):o}else r=+e||0;if(t=c(t),r>=t.length)return t;var u=r-o.length;if(1>u)return o;var a=t.slice(0,u);if(null==i)return a+o;if(zo(i)){if(t.slice(u).search(i)){var s,f,l=t.slice(0,u);for(i.global||(i=Ji(i.source,(St.exec(i)||"")+"g")),i.lastIndex=0;s=i.exec(l);)f=s.index;a=a.slice(0,null==f?u:f)}}else if(t.indexOf(i,u)!=u){var p=a.lastIndexOf(i);p>-1&&(a=a.slice(0,p))}return a+o}function xi(t){return t=c(t),t&&bt.test(t)?t.replace(mt,E):t}function Ei(t,e,n){return n&&Qn(t,e,n)&&(e=A),t=c(t),t.match(e||Gt)||[]}function Ii(t,e,n){return n&&Qn(t,e,n)&&(e=A),m(t)?Mi(t):we(t,e)}function Ai(t){return function(){return t}}function Pi(t){return t}function Mi(t){return Le(be(t,!0))}function Oi(t,e){return He(t,be(e,!0))}function Ci(t,e,n){if(null==n){var r=Ro(e),o=r?Ha(e):A,i=o&&o.length?Te(e,o):A;(i?i.length:r)||(i=!1,n=e,e=t,t=this)}i||(i=Te(e,Ha(e)));var u=!0,a=-1,s=So(t),c=i.length;n===!1?u=!1:Ro(n)&&"chain"in n&&(u=n.chain);for(;++a<c;){var f=i[a],l=e[f];t[f]=l,s&&(t.prototype[f]=function(e){return function(){var n=this.__chain__;if(u||n){var r=t(this.__wrapped__),o=r.__actions__=te(this.__actions__);return o.push({func:e,args:arguments,thisArg:t}),r.__chain__=n,r}return e.apply(t,ce([this.value()],arguments))}}(l))}return t}function Ui(){return re._=ou,this}function Ti(){}function Si(t){return tr(t)?Be(t):Fe(t)}function Ri(t){return function(e){return Se(t,pr(e),e+"")}}function Ni(t,e,n){n&&Qn(t,e,n)&&(e=n=A),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;for(var r=-1,o=ju(gu((e-t)/(n||1)),0),i=Gi(o);++r<o;)i[r]=t,t+=n;return i}function qi(t,e,n){if(t=yu(t),1>t||!wu(t))return[];var r=-1,o=Gi(ku(t,Mu));for(e=un(e,n,1);++r<t;)Mu>r?o[r]=e(r):e(r);return o}function Di(t){var e=++nu;return c(t)+e}function Li(t,e){return(+t||0)+(+e||0)}function Hi(t,e,n){return n&&Qn(t,e,n)&&(e=A),e=Gn(e,n,3),1==e.length?de(Ma(t)?t:fr(t),e):Ze(t,e)}t=t?oe.defaults(re.Object(),t,oe.pick(re,zt)):re;var Gi=t.Array,zi=t.Date,Bi=t.Error,Fi=t.Function,$i=t.Math,Wi=t.Number,Xi=t.Object,Ji=t.RegExp,Ki=t.String,Vi=t.TypeError,Yi=Gi.prototype,Zi=Xi.prototype,Qi=Ki.prototype,tu=Fi.prototype.toString,eu=Zi.hasOwnProperty,nu=0,ru=Zi.toString,ou=re._,iu=Ji("^"+tu.call(eu).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),uu=t.ArrayBuffer,au=t.clearTimeout,su=t.parseFloat,cu=$i.pow,fu=Zi.propertyIsEnumerable,lu=$n(t,"Set"),pu=t.setTimeout,du=Yi.splice,hu=t.Uint8Array,vu=$n(t,"WeakMap"),gu=$i.ceil,_u=$n(Xi,"create"),yu=$i.floor,mu=$n(Gi,"isArray"),wu=t.isFinite,bu=$n(Xi,"keys"),ju=$i.max,ku=$i.min,xu=$n(zi,"now"),Eu=t.parseInt,Iu=$i.random,Au=Wi.NEGATIVE_INFINITY,Pu=Wi.POSITIVE_INFINITY,Mu=4294967295,Ou=Mu-1,Cu=Mu>>>1,Uu=9007199254740991,Tu=vu&&new vu,Su={};e.support={};e.templateSettings={escape:kt,evaluate:xt,interpolate:Et,variable:"",imports:{_:e}};var Ru=function(){function t(){}return function(e){if(Ro(e)){t.prototype=e;var n=new t;t.prototype=A}return n||{}}}(),Nu=pn(Ce),qu=pn(Ue,!0),Du=dn(),Lu=dn(!0),Hu=Tu?function(t,e){return Tu.set(t,e),t}:Pi,Gu=Tu?function(t){return Tu.get(t)}:Ti,zu=Be("length"),Bu=function(){var t=0,e=0;return function(n,r){var o=va(),i=G-(o-e);if(e=o,i>0){if(++t>=H)return n}else t=0;return Hu(n,r)}}(),Fu=yo(function(t,e){return m(t)&&Yn(t)?ke(t,Me(e,!1,!0)):[]}),$u=jn(),Wu=jn(!0),Xu=yo(function(t){for(var e=t.length,n=e,r=Gi(l),o=Bn(),i=o==a,u=[];n--;){var s=t[n]=Yn(s=t[n])?s:[];r[n]=i&&s.length>=120?vn(n&&s):null}var c=t[0],f=-1,l=c?c.length:0,p=r[0];t:for(;++f<l;)if(s=c[f],(p?Yt(p,s):o(u,s,0))<0){for(var n=e;--n;){var d=r[n];if((d?Yt(d,s):o(t[n],s,0))<0)continue t}p&&p.push(s),u.push(s)}return u}),Ju=yo(function(t,e){e=Me(e);var n=ye(t,e);return $e(t,e.sort(i)),n}),Ku=Nn(),Vu=Nn(!0),Yu=yo(function(t){return Qe(Me(t,!1,!0))}),Zu=yo(function(t,e){return Yn(t)?ke(t,e):[]}),Qu=yo(qr),ta=yo(function(t){var e=t.length,n=e>2?t[e-2]:A,r=e>1?t[e-1]:A;return e>2&&"function"==typeof n?e-=2:(n=e>1&&"function"==typeof r?(--e,r):A,r=A),t.length=e,Dr(t,n,r)}),ea=yo(function(t){return t=Me(t),this.thru(function(e){return Qt(Ma(e)?e:[lr(e)],t)})}),na=yo(function(t,e){return ye(t,Me(e))}),ra=fn(function(t,e,n){eu.call(t,n)?++t[n]:t[n]=1}),oa=bn(Nu),ia=bn(qu,!0),ua=En(ee,Nu),aa=En(ne,qu),sa=fn(function(t,e,n){eu.call(t,n)?t[n].push(e):t[n]=[e]}),ca=fn(function(t,e,n){t[n]=e}),fa=yo(function(t,e,n){var r=-1,o="function"==typeof e,i=tr(e),u=Yn(t)?Gi(t.length):[];return Nu(t,function(t){var a=o?e:i&&null!=t?t[e]:A;u[++r]=a?a.apply(t,n):Vn(t,e,n)}),u}),la=fn(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),pa=Cn(fe,Nu),da=Cn(le,qu),ha=yo(function(t,e){if(null==t)return[];var n=e[2];return n&&Qn(e[0],e[1],n)&&(e.length=1),Ye(t,Me(e),[])}),va=xu||function(){return(new zi).getTime()},ga=yo(function(t,e,n){var r=M;if(n.length){var o=b(n,ga.placeholder);r|=S}return qn(t,r,e,n,o)}),_a=yo(function(t,e){e=e.length?Me(e):Yo(t);for(var n=-1,r=e.length;++n<r;){var o=e[n];t[o]=qn(t[o],M,t)}return t}),ya=yo(function(t,e,n){var r=M|O;if(n.length){var o=b(n,ya.placeholder);r|=S}return qn(e,r,t,n,o)}),ma=yn(U),wa=yn(T),ba=yo(function(t,e){return je(t,1,e)}),ja=yo(function(t,e,n){return je(t,e,n)}),ka=xn(),xa=xn(!0),Ea=yo(function(t,e){if(e=Me(e),"function"!=typeof t||!ie(e,s))throw new Vi($);var n=e.length;return yo(function(r){for(var o=ku(r.length,n);o--;)r[o]=e[o](r[o]);return t.apply(this,r)})}),Ia=On(S),Aa=On(R),Pa=yo(function(t,e){return qn(t,q,A,A,A,Me(e))}),Ma=mu||function(t){return m(t)&&nr(t.length)&&ru.call(t)==J},Oa=ln(Ge),Ca=ln(function(t,e,n){return n?ge(t,e,n):_e(t,e)}),Ua=mn(Ca,he),Ta=mn(Oa,ir),Sa=kn(Ce),Ra=kn(Ue),Na=In(Du),qa=In(Lu),Da=An(Ce),La=An(Ue),Ha=bu?function(t){var e=null==t?A:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Yn(t)?cr(t):Ro(t)?bu(t):[]}:cr,Ga=Pn(!0),za=Pn(),Ba=yo(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=se(Me(e),Ki);return ur(t,ke(ei(t),e))}var n=un(e[0],e[1],3);return ar(t,function(t,e,r){return!n(t,e,r)})}),Fa=yo(function(t,e){return null==t?{}:"function"==typeof e[0]?ar(t,un(e[0],e[1],3)):ur(t,Me(e))}),$a=gn(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)}),Wa=gn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Xa=Mn(),Ja=Mn(!0),Ka=gn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Va=gn(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Ya=yo(function(t,e){try{return t.apply(A,e)}catch(n){return Uo(n)?n:new Bi(n)}}),Za=yo(function(t,e){return function(n){return Vn(n,t,e)}}),Qa=yo(function(t,e){return function(n){return Vn(t,n,e)}}),ts=Rn("ceil"),es=Rn("floor"),ns=wn(xo,Au),rs=wn(Wo,Pu),os=Rn("round");return e.prototype=n.prototype,r.prototype=Ru(n.prototype),r.prototype.constructor=r,o.prototype=Ru(n.prototype),o.prototype.constructor=o,it.prototype.delete=Wt,it.prototype.get=Xt,it.prototype.has=Jt,it.prototype.set=Kt,Vt.prototype.push=Zt,vo.Cache=it,e.after=fo,e.ary=lo,e.assign=Ca,e.at=na,e.before=po,e.bind=ga,e.bindAll=_a,e.bindKey=ya,e.callback=Ii,e.chain=Gr,e.chunk=hr,e.compact=vr,e.constant=Ai,e.countBy=ra,e.create=Vo,e.curry=ma,e.curryRight=wa,e.debounce=ho,e.defaults=Ua,e.defaultsDeep=Ta,e.defer=ba,e.delay=ja,e.difference=Fu,e.drop=gr,e.dropRight=_r,e.dropRightWhile=yr,e.dropWhile=mr,e.fill=wr,e.filter=Yr,e.flatten=jr,e.flattenDeep=kr,e.flow=ka,e.flowRight=xa,e.forEach=ua,e.forEachRight=aa,e.forIn=Na,e.forInRight=qa,e.forOwn=Da,e.forOwnRight=La,e.functions=Yo,e.groupBy=sa,e.indexBy=ca,e.initial=Er,e.intersection=Xu,e.invert=ti,e.invoke=fa,e.keys=Ha,e.keysIn=ei,e.map=to,e.mapKeys=Ga,e.mapValues=za,e.matches=Mi,e.matchesProperty=Oi,e.memoize=vo,e.merge=Oa,e.method=Za,e.methodOf=Qa,e.mixin=Ci,e.modArgs=Ea,e.negate=go,e.omit=Ba,e.once=_o,e.pairs=ni,e.partial=Ia,e.partialRight=Aa,e.partition=la,e.pick=Fa,e.pluck=eo,e.property=Si,e.propertyOf=Ri,e.pull=Pr,e.pullAt=Ju,e.range=Ni,e.rearg=Pa,e.reject=no,e.remove=Mr,e.rest=Or,e.restParam=yo,e.set=oi,e.shuffle=oo,e.slice=Cr,e.sortBy=ao,e.sortByAll=ha,e.sortByOrder=so,e.spread=mo,e.take=Ur,e.takeRight=Tr,e.takeRightWhile=Sr,e.takeWhile=Rr,e.tap=zr,e.throttle=wo,e.thru=Br,e.times=qi,e.toArray=Jo,e.toPlainObject=Ko,e.transform=ii,e.union=Yu,e.uniq=Nr,e.unzip=qr,e.unzipWith=Dr,e.values=ui,e.valuesIn=ai,e.where=co,e.without=Zu,e.wrap=bo,e.xor=Lr,e.zip=Qu,e.zipObject=Hr,e.zipWith=ta,e.backflow=xa,e.collect=to,e.compose=xa,e.each=ua,e.eachRight=aa,e.extend=Ca,e.iteratee=Ii,e.methods=Yo,e.object=Hr,e.select=Yr,e.tail=Or,e.unique=Nr,Ci(e,e),e.add=Li,e.attempt=Ya,e.camelCase=$a,e.capitalize=fi,e.ceil=ts,e.clone=jo,e.cloneDeep=ko,e.deburr=li,e.endsWith=pi,e.escape=di,e.escapeRegExp=hi,e.every=Vr,e.find=oa,e.findIndex=$u,e.findKey=Sa,e.findLast=ia,e.findLastIndex=Wu,e.findLastKey=Ra,e.findWhere=Zr,e.first=br,e.floor=es,e.get=Zo,e.gt=xo,e.gte=Eo,e.has=Qo,e.identity=Pi,e.includes=Qr,e.indexOf=xr,e.inRange=si,e.isArguments=Io,e.isArray=Ma,e.isBoolean=Ao,e.isDate=Po,e.isElement=Mo,e.isEmpty=Oo,e.isEqual=Co,e.isError=Uo,e.isFinite=To,e.isFunction=So,e.isMatch=No,e.isNaN=qo,e.isNative=Do,e.isNull=Lo,e.isNumber=Ho,e.isObject=Ro,e.isPlainObject=Go,e.isRegExp=zo,e.isString=Bo,e.isTypedArray=Fo,e.isUndefined=$o,e.kebabCase=Wa,e.last=Ir,e.lastIndexOf=Ar,e.lt=Wo,e.lte=Xo,e.max=ns,e.min=rs,e.noConflict=Ui,e.noop=Ti,e.now=va,e.pad=vi,e.padLeft=Xa,e.padRight=Ja,e.parseInt=gi,e.random=ci,e.reduce=pa,e.reduceRight=da,e.repeat=_i,e.result=ri,e.round=os,e.runInContext=I,e.size=io,e.snakeCase=Ka,e.some=uo,e.sortedIndex=Ku,e.sortedLastIndex=Vu,e.startCase=Va,e.startsWith=yi,e.sum=Hi,e.template=mi,e.trim=wi,e.trimLeft=bi,e.trimRight=ji,e.trunc=ki,e.unescape=xi,e.uniqueId=Di,e.words=Ei,e.all=Vr,e.any=uo,e.contains=Qr,e.eq=Co,e.detect=oa,e.foldl=pa,e.foldr=da,e.head=br,e.include=Qr,e.inject=pa,Ci(e,function(){var t={};return Ce(e,function(n,r){e.prototype[r]||(t[r]=n)}),t}(),!1),e.sample=ro,e.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return ro(e,t)}):ro(this.value())},e.VERSION=P,ee(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),ee(["drop","take"],function(t,e){o.prototype[t]=function(n){var r=this.__filtered__;if(r&&!e)return new o(this);n=null==n?1:ju(yu(n)||0,0);var i=this.clone();return r?i.__takeCount__=ku(i.__takeCount__,n):i.__views__.push({size:n,type:t+(i.__dir__<0?"Right":"")}),i},o.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),ee(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n!=F;o.prototype[t]=function(t,e){var o=this.clone();return o.__iteratees__.push({iteratee:Gn(t,e,1),type:n}),o.__filtered__=o.__filtered__||r,o}}),ee(["first","last"],function(t,e){var n="take"+(e?"Right":"");o.prototype[t]=function(){return this[n](1).value()[0]}}),ee(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");o.prototype[t]=function(){return this.__filtered__?new o(this):this[n](1)}}),ee(["pluck","where"],function(t,e){var n=e?"filter":"map",r=e?Le:Si;o.prototype[t]=function(t){return this[n](r(t))}}),o.prototype.compact=function(){return this.filter(Pi)},o.prototype.reject=function(t,e){return t=Gn(t,e,1),this.filter(function(e){return!t(e)})},o.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=this;return n.__filtered__&&(t>0||0>e)?new o(n):(0>t?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==A&&(e=+e||0,n=0>e?n.dropRight(-e):n.take(e-t)),n)},o.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},o.prototype.toArray=function(){return this.take(Pu)},Ce(o.prototype,function(t,n){var i=/^(?:filter|map|reject)|While$/.test(n),u=/^(?:first|last)$/.test(n),a=e[u?"take"+("last"==n?"Right":""):n];a&&(e.prototype[n]=function(){var e=u?[1]:arguments,n=this.__chain__,s=this.__wrapped__,c=!!this.__actions__.length,f=s instanceof o,l=e[0],p=f||Ma(s);p&&i&&"function"==typeof l&&1!=l.length&&(f=p=!1);var d=function(t){return u&&n?a(t,1)[0]:a.apply(A,ce([t],e))},h={func:Br,args:[d],thisArg:A},v=f&&!c;if(u&&!n)return v?(s=s.clone(),s.__actions__.push(h),t.call(s)):a.call(A,this.value())[0];if(!u&&p){s=v?s:new o(this);var g=t.apply(s,e);return g.__actions__.push(h),new r(g,n)}return this.thru(d)})}),ee(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var n=(/^(?:replace|split)$/.test(t)?Qi:Yi)[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",o=/^(?:join|pop|replace|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return o&&!this.__chain__?n.apply(this.value(),t):this[r](function(e){return n.apply(e,t)})}}),Ce(o.prototype,function(t,n){var r=e[n];if(r){var o=r.name,i=Su[o]||(Su[o]=[]);i.push({name:n,func:r})}}),Su[Un(A,O).name]=[{name:"wrapper",func:A}],o.prototype.clone=w,o.prototype.reverse=Q,o.prototype.value=rt,e.prototype.chain=Fr,e.prototype.commit=$r,e.prototype.concat=ea,e.prototype.plant=Wr,e.prototype.reverse=Xr,e.prototype.toString=Jr,e.prototype.run=e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=Kr,e.prototype.collect=e.prototype.map,e.prototype.head=e.prototype.first,e.prototype.select=e.prototype.filter,e.prototype.tail=e.prototype.rest,e}var A,P="3.10.1",M=1,O=2,C=4,U=8,T=16,S=32,R=64,N=128,q=256,D=30,L="...",H=150,G=16,z=200,B=1,F=2,$="Expected a function",W="__lodash_placeholder__",X="[object Arguments]",J="[object Array]",K="[object Boolean]",V="[object Date]",Y="[object Error]",Z="[object Function]",Q="[object Map]",tt="[object Number]",et="[object Object]",nt="[object RegExp]",rt="[object Set]",ot="[object String]",it="[object WeakMap]",ut="[object ArrayBuffer]",at="[object Float32Array]",st="[object Float64Array]",ct="[object Int8Array]",ft="[object Int16Array]",lt="[object Int32Array]",pt="[object Uint8Array]",dt="[object Uint8ClampedArray]",ht="[object Uint16Array]",vt="[object Uint32Array]",gt=/\b__p \+= '';/g,_t=/\b(__p \+=) '' \+/g,yt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mt=/&(?:amp|lt|gt|quot|#39|#96);/g,wt=/[&<>"'`]/g,bt=RegExp(mt.source),jt=RegExp(wt.source),kt=/<%-([\s\S]+?)%>/g,xt=/<%([\s\S]+?)%>/g,Et=/<%=([\s\S]+?)%>/g,It=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,At=/^\w*$/,Pt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Mt=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,Ot=RegExp(Mt.source),Ct=/[\u0300-\u036f\ufe20-\ufe23]/g,Ut=/\\(\\)?/g,Tt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,St=/\w*$/,Rt=/^0[xX]/,Nt=/^\[object .+?Constructor\]$/,qt=/^\d+$/,Dt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Lt=/($^)/,Ht=/['\n\r\u2028\u2029\\]/g,Gt=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),zt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Bt=-1,Ft={};Ft[at]=Ft[st]=Ft[ct]=Ft[ft]=Ft[lt]=Ft[pt]=Ft[dt]=Ft[ht]=Ft[vt]=!0,Ft[X]=Ft[J]=Ft[ut]=Ft[K]=Ft[V]=Ft[Y]=Ft[Z]=Ft[Q]=Ft[tt]=Ft[et]=Ft[nt]=Ft[rt]=Ft[ot]=Ft[it]=!1;var $t={};$t[X]=$t[J]=$t[ut]=$t[K]=$t[V]=$t[at]=$t[st]=$t[ct]=$t[ft]=$t[lt]=$t[tt]=$t[et]=$t[nt]=$t[ot]=$t[pt]=$t[dt]=$t[ht]=$t[vt]=!0,$t[Y]=$t[Z]=$t[Q]=$t[rt]=$t[it]=!1;var Wt={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Xt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Jt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Kt={"function":!0,object:!0},Vt={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Yt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Zt=Kt[typeof e]&&e&&!e.nodeType&&e,Qt=Kt[typeof t]&&t&&!t.nodeType&&t,te=Zt&&Qt&&"object"==typeof o&&o&&o.Object&&o,ee=Kt[typeof self]&&self&&self.Object&&self,ne=Kt[typeof window]&&window&&window.Object&&window,re=(Qt&&Qt.exports===Zt&&Zt,te||ne!==(this&&this.window)&&ne||ee||this),oe=I();re._=oe,r=function(){return oe}.call(e,n,e,t),!(r!==A&&(t.exports=r))}).call(this)}).call(e,n(16)(t),function(){return this}())},function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(2),u={envs:{local:{serverUrl:"http://localhost:4000",logLevel:"trace"},dev:{serverUrl:"http://tessellate-stage.elasticbeanstalk.com",logLevel:"debug"},stage:{serverUrl:"http://tessellate-stage.elasticbeanstalk.com",logLevel:"info"},prod:{serverUrl:"http://tessellate.elasticbeanstalk.com",logLevel:"warn"}},tokenName:"tessellate",tokenDataName:"tessellate-tokenData",tokenUserDataName:"tessellate-currentUser"},a=null,s="prod",c=function(){function t(){return r(this,t),a||(a=this),(0,i.merge)(a,u)}return o(t,[{key:"applySettings",value:function(t){(0,i.merge)(a,t)}},{key:"serverUrl",get:function(){var t=u.envs[s].serverUrl;if("undefined"!=typeof window&&(0,i.has)(window,"location")&&(0,i.has)(window.location,"host")&&""!==window.location.host){var e=(0,i.find)(u.envs,function(t){return t.serverUrl===window.location.host});e&&(t="")}return t}},{key:"logLevel",get:function(){return u.envs[s].logLevel}},{key:"envName",set:function(t){s=t}},{key:"env",get:function(){return u.envs[s]}}]),t}(),f=new c;e.default=f,
t.exports=e.default},function(t,e,n){function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=r(o),u=n(2),a=r(u),s={loadCss:function(t){if("undefined"==typeof document)throw i.default.error({description:"Document does not exsist to load assets into.",func:"loadCss",obj:"dom"}),new Error("Document object is required to load assets.");var e=document.createElement("link");return e.rel="stylesheet",e.type="text/css",e.href=t,document.getElementsByTagName("head")[0].insertBefore(e,document.getElementsByTagName("head")[0].firstChild),i.default.log({description:"CSS was loaded into document.",element:e,func:"loadCss",obj:"dom"}),e},loadJs:function(t){if("undefined"!=typeof window&&a.default.has(window,"document")){var e=window.document.createElement("script");return e.src=t,e.type="text/javascript",window.document.getElementsByTagName("head")[0].appendChild(e),i.default.log({description:"JS was loaded into document.",element:e,func:"loadCss",obj:"dom"}),e}throw i.default.error({description:"Document does not exsist to load assets into.",func:"loadCss",obj:"dom"}),new Error("Document object is required to load assets.")},asyncLoadJs:function(t){if("undefined"!=typeof window&&a.default.has(window,"document")){var e=window.document.createElement("script");return e.src=t,e.type="text/javascript",window.document.getElementsByTagName("head")[0].appendChild(e),i.default.log({description:"JS was loaded into document.",element:e,func:"loadCss",obj:"dom"}),new Promise(function(t){window.setTimeout(t,30)})}throw i.default.error({description:"Document does not exsist to load assets into.",func:"loadCss",obj:"dom"}),new Error("Document object is required to load assets.")}};e.default=s,t.exports=e.default},function(t,e,n){function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=r(o),u=n(2),a=r(u),s={},c=Object.defineProperties({item:function(t,e){return this.setItem(t,e)},setItem:function(t,e){s[t]=e,this.localExists&&(a.default.isObject(e)&&(e=JSON.stringify(e)),window.sessionStorage.setItem(t,e))},getItem:function(t){if(s[t])return s[t];if(this.localExists){var e=window.sessionStorage.getItem(t);if(e){var n=!1,r=null;try{r=JSON.parse(e),n=!0}catch(o){n=!1}if(n)return r}return e}return null},removeItem:function(t){if(s[t]&&(s[t]=null),this.localExists)try{window.sessionStorage.removeItem(t)}catch(e){i.default.error({description:"Error removing item from session storage",error:e,obj:"storage",func:"removeItem"})}},clear:function(){if(s={},this.localExists)try{window.sessionStorage.clear()}catch(t){i.default.warn({description:"Session storage could not be cleared.",error:t})}}},{localExists:{get:function(){var t="test";if("undefined"==typeof window||"undefined"==typeof window.sessionStorage)return!1;try{return window.sessionStorage.setItem(t,"1"),window.sessionStorage.removeItem(t),!0}catch(e){return i.default.error({description:"Error saving to session storage",error:e,obj:"storage",func:"localExists"}),!1}},configurable:!0,enumerable:!0}});e.default=c,t.exports=e.default},function(t,e,n){function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){return new Promise(function(e,n){t.end(function(t,r){return t?(401==t.status&&a.default.warn({description:"Unauthorized. You must be signed into make this request.",func:"handleResponse"}),t&&t.response?n(t.response.text):(a.default.warn({description:"Unauthorized. You must be signed into make this request.",error:t,func:"handleResponse"}),n(t))):e(r.body)})})}function i(t){return c.default.string&&(t=t.set("Authorization","Bearer "+c.default.string)),t}Object.defineProperty(e,"__esModule",{value:!0});var u=n(1),a=r(u),s=n(7),c=r(s),f=n(13),l=r(f),p={get:function(t,e){var n=l.default.get(t);return e&&n.query(e),n=i(n),o(n)},post:function(t,e){var n=l.default.post(t).send(e);return n=i(n),o(n)},put:function(t,e){var n=l.default.put(t,e);return n=i(n),o(n)},del:function(t,e){var n=l.default.put(t,e);return n=i(n),o(n)}};e.default=p,t.exports=e.default},function(t,e,n){function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){var e=void 0;if(t&&""!=t)try{e=(0,p.default)(t)}catch(n){throw s.default.error({description:"Error decoding token.",data:e,error:n,func:"decodeToken",file:"token"}),new Error("Invalid token string.")}return e}Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),u=r(i),a=n(1),s=r(a),c=n(5),f=r(c),l=n(10),p=r(l),d=n(2),h=r(d),v=Object.defineProperties({save:function(t){this.string=t},"delete":function(){f.default.removeItem(u.default.tokenName),f.default.removeItem(u.default.tokenDataName),s.default.log({description:"Token was removed.",func:"delete",obj:"token"})}},{string:{get:function(){return f.default.getItem(u.default.tokenName)},set:function(t){var e=void 0;if(h.default.isString(t))e=t;else{if(s.default.log({description:"Token data is not string.",token:t,func:"string",obj:"token"}),!h.default.isObject(t)||!h.default.has(t,"token"))return void s.default.error({description:"Invalid value set to token.",token:t,func:"string",obj:"token"});e=t.token}s.default.log({description:"Token was set.",token:t,tokenStr:e,func:"string",obj:"token"}),f.default.setItem(u.default.tokenName,e),this.data=(0,p.default)(e)},configurable:!0,enumerable:!0},data:{get:function(){return f.default.getItem(u.default.tokenDataName)?f.default.getItem(u.default.tokenDataName):o(this.string)},set:function(t){if(h.default.isString(t)){var e=t;t=o(e),s.default.info({description:"Token data was set as string. Decoding token.",token:e,tokenData:t,func:"data",obj:"token"})}else s.default.log({description:"Token data was set.",data:t,func:"data",obj:"token"}),f.default.setItem(u.default.tokenDataName,t)},configurable:!0,enumerable:!0}});e.default=v,t.exports=e.default},function(t,e,n){function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(6),a=r(u),s=n(1),c=r(s),f=n(4),l=r(f),p={},d=function(){function t(e){o(this,t),this.app=e.app?e.app:null,this.redirectUri=e.redirectUri?e.redirectUri:"redirect.html",this.provider=e.provider?e.provider:null}return i(t,[{key:"loadHello",value:function(){return"undefined"==typeof window||window.hello?Promise.reject():l.default.asyncLoadJs("https://s3.amazonaws.com/kyper-cdn/js/hello.js")}},{key:"helloLoginListener",value:function(){window.hello.on("auth.login",function(t){c.default.info({description:"User logged in to google.",func:"loadHello",obj:"Google"}),window.hello(t.network).api("/me").then(function(e){var n=e;return n.provider=t.network,a.default.post(this.endpoint+"/provider",n).then(function(t){return c.default.log({description:"Provider request successful.",response:t,func:"signup",obj:"GoogleUtil"}),t}).catch(function(t){return c.default.error({description:"Error requesting login.",error:t,func:"signup",obj:"Matter"}),Promise.reject(t)})})})}},{key:"initHello",value:function(){var t=this;return this.loadHello().then(function(){return a.default.get(t.app.endpoint+"/providers").then(function(e){c.default.log({description:"Provider request successful.",response:e,func:"initHello",obj:"ProviderAuth"});var n=e[t.provider];return n?(c.default.log({description:"Providers config built",providersConfig:e,func:"initHello",obj:"ProviderAuth"}),window.hello.init(e,{redirect_uri:"redirect.html"})):(c.default.error({description:"Provider is not setup.\nVisit build.kyper.io to enter your client id for "+t.provider,provider:t.provider,clientIds:p,func:"login",obj:"ProviderAuth"}),Promise.reject({message:"Provider is not setup."}))},function(t){return c.default.error({description:"Error loading hellojs.",error:t,func:"initHello",obj:"ProviderAuth"}),Promise.reject({message:"Error requesting application third party providers."})}).catch(function(t){return c.default.error({description:"Error loading hellojs.",error:t,func:"initHello",obj:"ProviderAuth"}),Promise.reject({message:"Error loading third party login capability."})})})}},{key:"login",value:function(){var t=this;return this.initHello().then(function(){return window.hello.login(t.provider)},function(t){return c.default.error({description:"Error initalizing hellojs.",error:t,func:"login",obj:"Matter"}),Promise.reject({message:"Error with third party login."})})}},{key:"signup",value:function(){return this.login()}}]),t}();e.default=d,t.exports=e.default},function(t,e,n){var r=n(12);t.exports=function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}var n=r.atob(e);try{return decodeURIComponent(escape(n))}catch(o){return n}}},function(t,e,n){"use strict";var r=n(9),o=n(11);t.exports=function(t){if(!t)throw new Error("Invalid token specified");return o(r(t.split(".")[1]))}},function(module,exports){module.exports=function(str){var parsed;return parsed="object"==typeof JSON?JSON.parse(str):eval("("+str+")")}},function(t,e,n){!function(){var t=e,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r=function(){try{document.createElement("$")}catch(t){return t}}();t.btoa||(t.btoa=function(t){for(var e,o,i=0,u=n,a="";t.charAt(0|i)||(u="=",i%1);a+=u.charAt(63&e>>8-i%1*8)){if(o=t.charCodeAt(i+=.75),o>255)throw r;e=e<<8|o}return a}),t.atob||(t.atob=function(t){if(t=t.replace(/=+$/,""),t.length%4==1)throw r;for(var e,o,i=0,u=0,a="";o=t.charAt(u++);~o&&(e=i%4?64*e+o:o,i++%4)?a+=String.fromCharCode(255&e>>(-2*i&6)):0)o=n.indexOf(o);return a})}()},function(t,e,n){function r(){}function o(t){var e={}.toString.call(t);switch(e){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function i(t){return t===Object(t)}function u(t){if(!i(t))return t;var e=[];for(var n in t)null!=t[n]&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}function a(t){for(var e,n,r={},o=t.split("&"),i=0,u=o.length;u>i;++i)n=o[i],e=n.split("="),r[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return r}function s(t){var e,n,r,o,i=t.split(/\r?\n/),u={};i.pop();for(var a=0,s=i.length;s>a;++a)n=i[a],e=n.indexOf(":"),r=n.slice(0,e).toLowerCase(),o=_(n.slice(e+1)),u[r]=o;return u}function c(t){return t.split(/ *; */).shift()}function f(t){return g(t.split(/ *; */),function(t,e){var n=e.split(/ *= */),r=n.shift(),o=n.shift();return r&&o&&(t[r]=o),t},{})}function l(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=s(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function p(t,e){var n=this;v.call(this),this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t=null,e=null;try{e=new l(n)}catch(r){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=r,n.callback(t)}if(n.emit("response",e),t)return n.callback(t,e);if(e.status>=200&&e.status<300)return n.callback(t,e);var o=new Error(e.statusText||"Unsuccessful HTTP response");o.original=t,o.response=e,o.status=e.status,n.callback(o,e)})}function d(t,e){return"function"==typeof e?new p("GET",t).end(e):1==arguments.length?new p("GET",t):new p(t,e)}var h,v=n(14),g=n(15);h="undefined"!=typeof window?window:"undefined"!=typeof self?self:this,d.getXHR=function(){if(!(!h.XMLHttpRequest||h.location&&"file:"==h.location.protocol&&h.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1};var _="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};d.serializeObject=u,d.parseString=a,d.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},d.serialize={"application/x-www-form-urlencoded":u,"application/json":JSON.stringify},d.parse={"application/x-www-form-urlencoded":a,"application/json":JSON.parse},l.prototype.get=function(t){return this.header[t.toLowerCase()]},l.prototype.setHeaderProperties=function(t){var e=this.header["content-type"]||"";this.type=c(e);var n=f(e);for(var r in n)this[r]=n[r]},l.prototype.parse=function(t){return this.parser=t,this},l.prototype.parseBody=function(t){var e=this.parser||d.parse[this.type];return e&&t&&(t.length||t instanceof Object)?e(t):null},l.prototype.setStatusProperties=function(t){1223===t&&(t=204);var e=t/100|0;this.status=this.statusCode=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=4==e||5==e?this.toError():!1,this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},l.prototype.toError=function(){var t=this.req,e=t.method,n=t.url,r="cannot "+e+" "+n+" ("+this.status+")",o=new Error(r);return o.status=this.status,o.method=e,o.url=n,o},d.Response=l,v(p.prototype),p.prototype.use=function(t){return t(this),this},p.prototype.timeout=function(t){return this._timeout=t,this},p.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},p.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},p.prototype.set=function(t,e){if(i(t)){for(var n in t)this.set(n,t[n]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},p.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},p.prototype.getHeader=function(t){return this._header[t.toLowerCase()]},p.prototype.type=function(t){return this.set("Content-Type",d.types[t]||t),this},p.prototype.accept=function(t){return this.set("Accept",d.types[t]||t),this},p.prototype.auth=function(t,e){var n=btoa(t+":"+e);return this.set("Authorization","Basic "+n),this},p.prototype.query=function(t){return"string"!=typeof t&&(t=u(t)),t&&this._query.push(t),this},p.prototype.field=function(t,e){return this._formData||(this._formData=new h.FormData),this._formData.append(t,e),this},p.prototype.attach=function(t,e,n){return this._formData||(this._formData=new h.FormData),this._formData.append(t,e,n),this},p.prototype.send=function(t){var e=i(t),n=this.getHeader("Content-Type");if(e&&i(this._data))for(var r in t)this._data[r]=t[r];else"string"==typeof t?(n||this.type("form"),n=this.getHeader("Content-Type"),"application/x-www-form-urlencoded"==n?this._data=this._data?this._data+"&"+t:t:this._data=(this._data||"")+t):this._data=t;return!e||o(t)?this:(n||this.type("json"),this)},p.prototype.callback=function(t,e){var n=this._callback;this.clearTimeout(),n(t,e)},p.prototype.crossDomainError=function(){var t=new Error("Origin is not allowed by Access-Control-Allow-Origin");t.crossDomain=!0,this.callback(t)},p.prototype.timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},p.prototype.withCredentials=function(){return this._withCredentials=!0,this},p.prototype.end=function(t){var e=this,n=this.xhr=d.getXHR(),i=this._query.join("&"),u=this._timeout,a=this._formData||this._data;this._callback=t||r,n.onreadystatechange=function(){if(4==n.readyState){var t;try{t=n.status}catch(r){t=0}if(0==t){if(e.timedout)return e.timeoutError();if(e.aborted)return;return e.crossDomainError()}e.emit("end")}};var s=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.emit("progress",t)};this.hasListeners("progress")&&(n.onprogress=s);try{n.upload&&this.hasListeners("progress")&&(n.upload.onprogress=s)}catch(c){}if(u&&!this._timer&&(this._timer=setTimeout(function(){e.timedout=!0,e.abort()},u)),i&&(i=d.serializeObject(i),this.url+=~this.url.indexOf("?")?"&"+i:"?"+i),n.open(this.method,this.url,!0),this._withCredentials&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof a&&!o(a)){var f=this.getHeader("Content-Type"),l=d.serialize[f?f.split(";")[0]:""];l&&(a=l(a))}for(var p in this.header)null!=this.header[p]&&n.setRequestHeader(p,this.header[p]);return this.emit("request",this),n.send(a),this},p.prototype.then=function(t,e){return this.end(function(n,r){n?e(n):t(r)})},d.Request=p,d.get=function(t,e,n){var r=d("GET",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},d.head=function(t,e,n){var r=d("HEAD",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},d.del=function(t,e){var n=d("DELETE",t);return e&&n.end(e),n},d.patch=function(t,e,n){var r=d("PATCH",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},d.post=function(t,e,n){var r=d("POST",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},d.put=function(t,e,n){var r=d("PUT",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},t.exports=d},function(t,e){function n(t){return t?r(t):void 0}function r(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},n.prototype.once=function(t,e){function n(){r.off(t,n),e.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=e,this.on(t,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===e||r.fn===e){n.splice(o,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks[t];if(n){n=n.slice(0);for(var r=0,o=n.length;o>r;++r)n[r].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e){t.exports=function(t,e,n){for(var r=0,o=t.length,i=3==arguments.length?n:t[r++];o>r;)i=e.call(null,i,t[r],++r,t);return i}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}}])});