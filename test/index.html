<!doctype html>
<html lang='en'>
<head>
  <meta charset='utf-8'>
  <title>Matter Tester</title>
  <script src='../dist/matter.bundle.js'></script>
  <style type="text/css">
    .inputBoxes {
      margin:35px;
    }
    .status-label {
      display:inline;
      margin-right:30px;
    }
  </style>
</head>
<body>
  <div style="text-align:center;">
    <h2>Matter Library Tester</h2>
      <h3 class="status-label">Logged In: <span id="status">False</span></h3>
      <button onclick="logout()" id="logout-btn">Logout</button>
    <div>
      <div>
        <h3>Login</h3>
        <div class="inputBoxes">
          <input type="text" name="username" placeholder="username" id="login-username"><br>
          <input type="password" name="password" placeholder="password" id="login-password"><br>
        </div>
        <button onclick="login()">Login</button>
      </div>
      <div>
        <h3>Signup</h3>
        <form name="signup">
          <div class="inputBoxes">
            <input type="text" name="username" placeholder="username"><br>
            <input type="text" name="name" placeholder="name"><br>
            <input type="text" name="email" placeholder="email"><br>
            <input type="password" name="password" placeholder="password"><br>
          </div>
          <button onclick="signup()">Signup</button>
        </form>
      </div>
    </div>
  </div>

  <script>
    var matter = new Matter('tessellate', {localServer:true});
    console.log('matter:', matter);
    document.addEventListener("DOMContentLoaded", function(event) { 
      setStatus();
    });
    function setStatus() {
      var statusEl = document.getElementById("status");
      var logoutButton = document.getElementById("logout-btn");

      if(matter.isLoggedIn){
        statusEl.innerHTML = "True";
        statusEl.style.color = 'green';
        // statusEl.className = statusEl.className ? ' status-loggedIn' : 'status-loggedIn';
        logoutButton.style.display='inline';
      } else {
        statusEl.innerHTML = "False";
        statusEl.style.color = 'red';
        logoutButton.style.display='none';
      }
    }
    
    function login(){
      //Information will need to be changed for a successful login
      var username = document.getElementById('login-username').value;
      var password = document.getElementById('login-password').value;

      matter.login({username:username, password:password}).then(function(loginInfo){
        console.log('successful login:', loginInfo);
        setStatus();
      }, function(err){
        console.error('login() : Error logging in:', err);
      });   
    }
    function logout(){
      matter.logout().then(function(){
        console.log('successful logout');
        setStatus();
      }, function(err){
        console.error('logout() : Error logging out:', err);
      });   
    }
    function signup(){
      matter.logout().then(function(){
        console.log('successful logout');
        setStatus();
      }, function(err){
        console.error('logout() : Error logging out:', err);
      });   
    }
  </script>
</body>
</html>
